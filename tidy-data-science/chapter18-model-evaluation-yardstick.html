<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Á¨¨18Á´†: „É¢„Éá„É´Ë©ï‰æ°„ÅÆÊ•µÊÑè - yardstick | TidyverseÂÆåÂÖ®„Éû„Çπ„Çø„Éº</title>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RBPWE348T2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-RBPWE348T2');
    </script>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1184134440246706"
         crossorigin="anonymous"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --accent-neon: #00ff88;
            --accent-cyan: #00d4ff;
            --accent-purple: #9d4edd;
            --accent-emerald: #10d9c4;
            --accent-lime: #84cc16;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --border-neon: #00ff88;
            --shadow-neon: 0 0 20px #00ff8840;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            line-height: 1.8;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: linear-gradient(45deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: 20px;
            border: 2px solid var(--accent-neon);
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.4);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 136, 0.1), transparent);
            animation: scan 3s infinite;
        }

        @keyframes scan {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        h1 {
            font-size: 3rem;
            font-weight: 700;
            color: var(--accent-neon);
            margin-bottom: 10px;
            text-shadow: 0 0 20px var(--accent-neon);
            position: relative;
            z-index: 1;
        }

        .subtitle {
            font-size: 1.4rem;
            color: var(--accent-cyan);
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .chapter-meta {
            display: flex;
            justify-content: center;
            gap: 20px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            position: relative;
            z-index: 1;
        }

        .chapter-description {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        /* Navigation Widget */
        .chapter-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 3px;
            margin: 30px 0;
            padding: 6px;
            background: var(--bg-secondary);
            border-radius: 8px;
            border: 1px solid var(--accent-neon);
            width: fit-content;
            max-width: 90vw;
            margin-left: auto;
            margin-right: auto;
            flex-wrap: wrap;
        }

        .nav-button {
            padding: 1px 5px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            text-decoration: none;
            border-radius: 2px;
            border: 1px solid var(--accent-cyan);
            transition: all 0.3s ease;
            font-size: 0.65rem;
            white-space: nowrap;
        }

        .nav-button:hover {
            background: var(--accent-cyan);
            color: var(--bg-primary);
            box-shadow: 0 0 6px var(--accent-cyan);
        }

        .nav-button.current {
            background: var(--accent-neon);
            color: var(--bg-primary);
            box-shadow: 0 0 6px var(--accent-neon);
        }

        /* Content Sections */
        .section {
            background: rgba(255, 255, 255, 0.02);
            margin: 30px 0;
            padding: 30px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 255, 136, 0.15);
            position: relative;
        }

        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-neon), var(--accent-cyan), var(--accent-purple));
            border-radius: 15px 15px 0 0;
        }

        h2 {
            color: var(--accent-neon);
            font-size: 2rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px var(--accent-neon);
        }

        h3 {
            color: var(--accent-cyan);
            font-size: 1.5rem;
            margin: 25px 0 15px 0;
            text-shadow: 0 0 8px var(--accent-cyan);
        }

        h4 {
            color: var(--accent-purple);
            font-size: 1.2rem;
            margin: 20px 0 10px 0;
        }

        /* Code Blocks */
        .code-block {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid var(--accent-neon);
            border-radius: 15px;
            overflow: hidden;
            margin: 2rem 0;
            box-shadow: 0 8px 32px rgba(0, 255, 136, 0.1);
        }

        .code-header {
            background: rgba(0, 255, 136, 0.1);
            padding: 0.8rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            border-bottom: 1px solid var(--accent-neon);
        }

        .code-dots {
            display: flex;
            gap: 0.3rem;
        }

        .code-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent-neon);
            opacity: 0.6;
        }

        .code-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--accent-cyan);
            font-weight: 500;
        }

        .code-content {
            padding: 1.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
            overflow-x: auto;
            background: #0d1117;
        }

        .code-line {
            display: block;
            margin-bottom: 0.3rem;
        }

        /* Syntax highlighting */
        .code-comment { color: #8b949e; }
        .code-keyword { color: #ff7b72; }
        .code-string { color: #a5d6ff; }
        .code-function { color: #d2a8ff; }
        .code-variable { color: #ffa657; }
        .code-regex { color: #39ff14; font-weight: bold; }
        .code-pattern { color: #ffff00; background: rgba(255, 255, 0, 0.1); padding: 0.1rem 0.3rem; border-radius: 3px; }

        pre {
            background: var(--bg-primary);
            border: 1px solid var(--accent-neon);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'JetBrains Mono', monospace;
            position: relative;
        }

        pre::before {
            content: 'üíª R Code';
            position: absolute;
            top: -12px;
            right: 20px;
            background: var(--bg-secondary);
            color: var(--accent-neon);
            padding: 4px 12px;
            border-radius: 5px;
            font-size: 0.8rem;
        }

        code {
            color: var(--accent-neon);
            font-family: 'JetBrains Mono', monospace;
            background: var(--bg-tertiary);
            padding: 2px 6px;
            border-radius: 4px;
        }

        /* List Styles */
        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }

        li {
            margin-bottom: 8px;
        }

        /* Special Boxes */
        .tip-box {
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.2), var(--bg-tertiary));
            border: 1px solid var(--accent-neon);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }

        .tip-box::before {
            content: 'üí° Tip';
            position: absolute;
            top: -12px;
            left: 20px;
            background: var(--bg-secondary);
            color: var(--accent-neon);
            padding: 4px 12px;
            border-radius: 5px;
            font-weight: bold;
        }

        .warning-box {
            background: linear-gradient(135deg, #ff444420, var(--bg-tertiary));
            border: 1px solid #ff4444;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }

        .warning-box::before {
            content: '‚ö†Ô∏è Ê≥®ÊÑè';
            position: absolute;
            top: -12px;
            left: 20px;
            background: var(--bg-secondary);
            color: #ff4444;
            padding: 4px 12px;
            border-radius: 5px;
            font-weight: bold;
        }

        /* Function Grid */
        .function-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .function-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--accent-cyan);
            border-radius: 15px;
            padding: 2rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .function-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--accent-neon) 0%, var(--accent-cyan) 50%, var(--accent-purple) 100%);
            opacity: 0.1;
            transition: all 0.5s ease;
            z-index: -1;
        }

        .function-card:hover::before {
            left: 0;
        }

        .function-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
        }

        .function-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--accent-neon);
            margin-bottom: 1rem;
        }

        .function-description {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
        }

        .function-syntax {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--accent-cyan);
            background: rgba(0, 255, 255, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            border-left: 3px solid var(--accent-cyan);
        }

        /* Evaluation Workflow */
        .evaluation-workflow {
            background: var(--bg-tertiary);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid var(--accent-purple);
        }

        .workflow-title {
            color: var(--accent-purple);
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .workflow-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .workflow-step {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--accent-neon);
            text-align: center;
            transition: all 0.3s ease;
        }

        .workflow-step:hover {
            background: var(--accent-neon);
            color: var(--bg-primary);
        }

        .step-number {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .chapter-nav {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-button {
                width: 200px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìä „É¢„Éá„É´Ë©ï‰æ°„ÅÆÊ•µÊÑè - yardstick</h1>
            <div class="subtitle">Á¨¨18Á´†: ÂåÖÊã¨ÁöÑ„Å™„É¢„Éá„É´ÊÄßËÉΩË©ï‰æ°„Çí„Éû„Çπ„Çø„Éº„Åô„Çã</div>
            <div class="chapter-meta">
                <span>üîç Comprehensive Evaluation</span>
                <span>üìä Metrics & Visualization</span>
                <span>üéØ ROC/PR Curves</span>
            </div>
            <p class="chapter-description">
                yardstick„Éë„ÉÉ„Ç±„Éº„Ç∏„Åß„É¢„Éá„É´ÊÄßËÉΩ„ÇíÂ§öËßíÁöÑ„Å´Ë©ï‰æ°„ÄÇÂõûÂ∏∞„ÉªÂàÜÈ°ûÂïèÈ°å„ÅÆ‰∏ªË¶ÅÊåáÊ®ô„Åã„Çâ„Ç´„Çπ„Çø„É†„É°„Éà„É™„ÉÉ„ÇØ„Åæ„Åß„ÄÅÂÆüÁî®ÁöÑ„Å™Ë©ï‰æ°ÊâãÊ≥ï„ÇíÂÆåÂÖ®„Éû„Çπ„Çø„Éº„Åó„Çà„ÅÜ„ÄÇ
            </p>
        </header>

        <!-- Navigation Widget -->
        <nav class="chapter-nav">
            <a href="chapter10-advanced-dplyr.html" class="nav-button">Ch10: dplyrÂøúÁî®</a>
            <a href="chapter11-machine-learning.html" class="nav-button">Ch11: Ê©üÊ¢∞Â≠¶Áøí</a>
            <a href="chapter12-model-evaluation.html" class="nav-button">Ch12: „É¢„Éá„É´Ë©ï‰æ°</a>
            <a href="chapter13-advanced-ggplot2.html" class="nav-button">Ch13: ggplot2ÂøúÁî®</a>
            <a href="chapter14-interactive-visualization.html" class="nav-button">Ch14: ÂØæË©±ÁöÑÂèØË¶ñÂåñ</a>
            <a href="chapter15-big-data.html" class="nav-button">Ch15: „Éì„ÉÉ„Ç∞„Éá„Éº„Çø</a>
            <a href="chapter16-resampling-rsample.html" class="nav-button">Ch16: „É™„Çµ„É≥„Éó„É™„É≥„Ç∞</a>
            <a href="chapter17-hyperparameter-tuning.html" class="nav-button">Ch17: „ÉÅ„É•„Éº„Éã„É≥„Ç∞</a>
            <a href="chapter18-model-evaluation-yardstick.html" class="nav-button current">Ch18: „É¢„Éá„É´Ë©ï‰æ°</a>
            <a href="chapter19-prediction-interpretation.html" class="nav-button">Ch19: ‰∫àÊ∏¨Ëß£Èáà</a>
            <a href="chapter20-best-practices.html" class="nav-button">Ch20: „Éô„Çπ„Éà„Éó„É©„ÇØ„ÉÜ„Ç£„Çπ</a>
        </nav>

        <div class="section">
            <h2>üéØ Chapter 18„ÅÆÂ≠¶ÁøíÁõÆÊ®ô</h2>
            <p>
                Êú¨Á´†„Åß„ÅØ„ÄÅyardstick„Éë„ÉÉ„Ç±„Éº„Ç∏„Çí‰ΩøÁî®„Åó„ÅüÂåÖÊã¨ÁöÑ„Å™„É¢„Éá„É´Ë©ï‰æ°ÊâãÊ≥ï„ÇíÂ≠¶Áøí„Åó„ÄÅÂÆüÁî®ÁöÑ„Å™Ë©ï‰æ°„Ç∑„Çπ„ÉÜ„É†„ÇíÊßãÁØâ„Åó„Åæ„Åô„ÄÇ
            </p>

            <div class="evaluation-workflow">
                <div class="workflow-title">üîÑ „É¢„Éá„É´Ë©ï‰æ°„ÉØ„Éº„ÇØ„Éï„É≠„Éº</div>
                <div class="workflow-steps">
                    <div class="workflow-step">
                        <div class="step-number">1Ô∏è‚É£</div>
                        <div>„Éá„Éº„ÇøÊ∫ñÂÇô</div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">2Ô∏è‚É£</div>
                        <div>Âü∫Êú¨ÊåáÊ®ôË®àÁÆó</div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">3Ô∏è‚É£</div>
                        <div>Ê∑∑ÂêåË°åÂàó‰ΩúÊàê</div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">4Ô∏è‚É£</div>
                        <div>ROC/PRÊõ≤Á∑ö</div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">5Ô∏è‚É£</div>
                        <div>ÈñæÂÄ§ÊúÄÈÅ©Âåñ</div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">6Ô∏è‚É£</div>
                        <div>„É¨„Éù„Éº„Éà‰ΩúÊàê</div>
                    </div>
                </div>
            </div>

            <ul>
                <li><strong>yardstick„Éë„ÉÉ„Ç±„Éº„Ç∏</strong>„Å´„Çà„ÇãÂåÖÊã¨ÁöÑ„Å™„É¢„Éá„É´Ë©ï‰æ°</li>
                <li><strong>ÂõûÂ∏∞ÂïèÈ°å</strong>„ÅÆË©ï‰æ°ÊåáÊ®ôÔºàRMSE„ÄÅMAE„ÄÅR¬≤Ôºâ„ÅÆÁêÜËß£„Å®ÂÆüË£Ö</li>
                <li><strong>ÂàÜÈ°ûÂïèÈ°å</strong>„ÅÆË©ï‰æ°ÊåáÊ®ôÔºàAccuracy„ÄÅPrecision„ÄÅRecall„ÄÅF1„ÄÅAUCÔºâ</li>
                <li><strong>Â§ö„ÇØ„É©„ÇπÂàÜÈ°û</strong>„ÅÆÁâπÊÆä„Å™Ë©ï‰æ°ÊâãÊ≥ï</li>
                <li><strong>ROCÊõ≤Á∑ö„ÉªPRÊõ≤Á∑ö</strong>„ÅÆ‰ΩúÊàê„Å®Ëß£Èáà</li>
                <li><strong>„Ç´„Çπ„Çø„É†Ë©ï‰æ°ÊåáÊ®ô</strong>„ÅÆ‰ΩúÊàê</li>
            </ul>
        </div>

        <!-- KEY FUNCTIONS -->
        <div class="section">
            <h2>‚öôÔ∏è ‰∏ªË¶Å„Å™Ë©ï‰æ°Èñ¢Êï∞</h2>
            <p>
                yardstick„Éë„ÉÉ„Ç±„Éº„Ç∏„ÅÆ‰∏ªË¶ÅÈñ¢Êï∞„ÇíÁêÜËß£„Åó„ÄÅÂäπÊûúÁöÑ„Å™„É¢„Éá„É´Ë©ï‰æ°„ÇíÂÆüÁèæ„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ
            </p>
            
            <div class="function-grid">
                <div class="function-card">
                    <div class="function-title">metrics()</div>
                    <div class="function-description">
                        „É¢„Éá„É´„ÅÆÂü∫Êú¨ÁöÑ„Å™Ë©ï‰æ°ÊåáÊ®ô„Çí‰∏ÄÊã¨Ë®àÁÆó„ÄÇÂõûÂ∏∞„ÄÅÂàÜÈ°ûÂïèÈ°å„ÅßÈÅ©Âàá„Å™ÊåáÊ®ô„ÇíËá™ÂãïÈÅ∏Êäû„ÄÇ
                    </div>
                    <div class="function-syntax">metrics(truth, estimate, ...)</div>
                </div>
                
                <div class="function-card">
                    <div class="function-title">conf_mat()</div>
                    <div class="function-description">
                        Ê∑∑ÂêåË°åÂàóÔºàConfusion MatrixÔºâ„Çí‰ΩúÊàê„ÄÇÂàÜÈ°û„É¢„Éá„É´„ÅÆË©≥Á¥∞„Å™ÊÄßËÉΩÂàÜÊûê„ÅÆÂü∫Á§é„ÄÇ
                    </div>
                    <div class="function-syntax">conf_mat(truth, estimate)</div>
                </div>
                
                <div class="function-card">
                    <div class="function-title">roc_curve()</div>
                    <div class="function-description">
                        ROCÊõ≤Á∑ö„Çí‰ΩúÊàê„Åó„ÄÅ„É¢„Éá„É´„ÅÆÂà§Âà•ËÉΩÂäõ„ÇíË©ï‰æ°„ÄÇ‰∫åÂÄ§ÂàÜÈ°û„ÅÆÊ®ôÊ∫ñÁöÑ„Å™Ë©ï‰æ°ÊâãÊ≥ï„ÄÇ
                    </div>
                    <div class="function-syntax">roc_curve(truth, prob_col)</div>
                </div>
                
                <div class="function-card">
                    <div class="function-title">pr_curve()</div>
                    <div class="function-description">
                        Precision-RecallÊõ≤Á∑ö„Çí‰ΩúÊàê„ÄÇ‰∏çÂùáË°°„Éá„Éº„Çø„Çª„ÉÉ„Éà„ÅßÁâπ„Å´ÊúâÁî®„Å™Ë©ï‰æ°ÊåáÊ®ô„ÄÇ
                    </div>
                    <div class="function-syntax">pr_curve(truth, prob_col)</div>
                </div>
                
                <div class="function-card">
                    <div class="function-title">metric_set()</div>
                    <div class="function-description">
                        „Ç´„Çπ„Çø„É†„É°„Éà„É™„ÉÉ„ÇØ„Çª„ÉÉ„Éà„Çí‰ΩúÊàê„ÄÇÁâπÂÆö„ÅÆÁî®ÈÄî„Å´Âêà„Çè„Åõ„ÅüË©ï‰æ°ÊåáÊ®ô„Çí„Ç∞„É´„Éº„ÉóÂåñ„ÄÇ
                    </div>
                    <div class="function-syntax">metric_set(rmse, mae, rsq)</div>
                </div>
                
                <div class="function-card">
                    <div class="function-title">autoplot()</div>
                    <div class="function-description">
                        Ë©ï‰æ°ÁµêÊûú„ÅÆËá™ÂãïÂèØË¶ñÂåñ„ÄÇÊ∑∑ÂêåË°åÂàó„ÄÅROCÊõ≤Á∑ö„Å™„Å©„ÇíÁ∞°Âçò„Å´„Ç∞„É©„ÉïÂåñ„ÄÇ
                    </div>
                    <div class="function-syntax">autoplot(conf_matrix)</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üîç yardstick„Éë„ÉÉ„Ç±„Éº„Ç∏„Å®„ÅØ</h2>
            <p>yardstick„ÅØ„ÄÅÊ©üÊ¢∞Â≠¶Áøí„É¢„Éá„É´„ÅÆÊÄßËÉΩË©ï‰æ°„ÅÆ„Åü„ÇÅ„ÅÆÁµ±‰∏Ä„Åï„Çå„ÅüAPI„ÇíÊèê‰æõ„Åô„ÇãTidymodels„ÅÆ‰∏≠Ê†∏„Éë„ÉÉ„Ç±„Éº„Ç∏„Åß„Åô„ÄÇ</p>

            <h3>‰∏ª„Å™Ê©üËÉΩ</h3>
            <ul>
                <li>Ë±äÂØå„Å™<strong>Ë©ï‰æ°ÊåáÊ®ô</strong>„ÅÆÊèê‰æõ</li>
                <li><strong>ÂàÜÈ°û„ÉªÂõûÂ∏∞</strong>‰∏°ÂØæÂøú</li>
                <li><strong>Â§ö„ÇØ„É©„Çπ„Éª‰∫åÂÄ§ÂàÜÈ°û</strong>„ÅÆËá™ÂãïÂØæÂøú</li>
                <li><strong>ÂèØË¶ñÂåñ</strong>„Å®„ÅÆÁ∑äÂØÜ„Å™ÈÄ£Êê∫</li>
                <li><strong>„Ç´„Çπ„Çø„É†ÊåáÊ®ô</strong>„ÅÆ‰ΩúÊàêÊîØÊè¥</li>
            </ul>

            <pre>
# Âü∫Êú¨„Çª„ÉÉ„Éà„Ç¢„ÉÉ„Éó
library(tidymodels)
library(tidyverse)
library(yardstick)

# „Çµ„É≥„Éó„É´„Éá„Éº„Çø„ÅÆÊ∫ñÂÇô
data("ames", package = "modeldata")
data("two_class_dat", package = "modeldata")
data("hpc_data", package = "modeldata")

# ÂõûÂ∏∞Áî®„Éá„Éº„Çø
ames_sample <- ames |> 
  select(Sale_Price, Lot_Area, Year_Built, Overall_Qual) |>
  mutate(log_price = log10(Sale_Price)) |>
  slice_sample(n = 1000)

# ‰∫àÊ∏¨ÁµêÊûú„ÅÆ„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥
set.seed(123)
ames_predictions <- ames_sample |>
  mutate(
    .pred = log_price + rnorm(n(), 0, 0.1),
    residuals = log_price - .pred
  )

# ÂàÜÈ°ûÁî®„Éá„Éº„Çø„ÅÆÊ∫ñÂÇô
classification_sample <- two_class_dat |>
  rename(truth = Class, estimate = predicted) |>
  mutate(
    .pred_Class1 = 1 - .pred_Class2,
    .pred_Class2 = .pred_Class2
  )
</pre>
        </div>

        <div class="section">
            <h2>üìà ÂõûÂ∏∞ÂïèÈ°å„ÅÆË©ï‰æ°ÊåáÊ®ô</h2>
            
            <h3>1. Âü∫Êú¨ÁöÑ„Å™Ë©ï‰æ°ÊåáÊ®ô</h3>
            <p>ÂõûÂ∏∞ÂïèÈ°å„Å´„Åä„Åë„Çã‰ª£Ë°®ÁöÑ„Å™Ë©ï‰æ°ÊåáÊ®ô„ÇíÁêÜËß£„Åó„Åæ„Åô„ÄÇ</p>

            <pre>
# ‰∏ªË¶Å„Å™ÂõûÂ∏∞ÊåáÊ®ô„ÅÆË®àÁÆó
regression_metrics <- ames_predictions |>
  metrics(truth = log_price, estimate = .pred)

regression_metrics

# ÂÄãÂà•ÊåáÊ®ô„ÅÆË®àÁÆó
rmse_value <- ames_predictions |> rmse(truth = log_price, estimate = .pred)
mae_value <- ames_predictions |> mae(truth = log_price, estimate = .pred)
rsq_value <- ames_predictions |> rsq(truth = log_price, estimate = .pred)
mape_value <- ames_predictions |> mape(truth = log_price, estimate = .pred)

# ÁµêÊûú„ÅÆ„Åæ„Å®„ÇÅ
tibble(
  Metric = c("RMSE", "MAE", "R¬≤", "MAPE"),
  Value = c(rmse_value$.estimate, mae_value$.estimate, 
            rsq_value$.estimate, mape_value$.estimate)
)
</pre>

            <h3>2. „Ç´„Çπ„Çø„É†Ë©ï‰æ°ÊåáÊ®ô„Çª„ÉÉ„Éà</h3>
            <p>ÁâπÂÆö„ÅÆÁî®ÈÄî„Å´Âøú„Åò„ÅüË©ï‰æ°ÊåáÊ®ô„Çª„ÉÉ„Éà„Çí‰ΩúÊàê„Åß„Åç„Åæ„Åô„ÄÇ</p>

            <pre>
# „Ç´„Çπ„Çø„É†ÊåáÊ®ô„Çª„ÉÉ„Éà„ÅÆ‰ΩúÊàê
custom_regression_metrics <- metric_set(
  rmse, mae, rsq, mape, 
  ccc,  # ‰∏ÄËá¥Áõ∏Èñ¢‰øÇÊï∞
  rpiq, # ÂõõÂàÜ‰ΩçÁØÑÂõ≤„Å´ÂØæ„Åô„Çã‰∫àÊ∏¨ÊÄßËÉΩÊØî
  huber_loss  # HuberÊêçÂ§±
)

# „Ç´„Çπ„Çø„É†ÊåáÊ®ô„Åß„ÅÆË©ï‰æ°
custom_results <- ames_predictions |>
  custom_regression_metrics(truth = log_price, estimate = .pred)

custom_results
</pre>

            <h3>3. „Ç∞„É´„Éº„ÉóÂà•Ë©ï‰æ°</h3>
            <pre>
# Âª∫ÁØâÂπ¥‰ª£Âà•„ÅÆË©ï‰æ°
ames_grouped <- ames_predictions |>
  mutate(
    era = case_when(
      Year_Built < 1950 ~ "Pre-1950",
      Year_Built < 1980 ~ "1950-1979",
      Year_Built < 2000 ~ "1980-1999",
      TRUE ~ "2000+"
    )
  )

# „Ç∞„É´„Éº„ÉóÂà•Ë©ï‰æ°
grouped_metrics <- ames_grouped |>
  group_by(era) |>
  metrics(truth = log_price, estimate = .pred) |>
  ungroup()

# ÂèØË¶ñÂåñ
grouped_metrics |>
  filter(.metric == "rmse") |>
  ggplot(aes(x = era, y = .estimate)) +
  geom_col(fill = "lightblue") +
  geom_text(aes(label = round(.estimate, 3)), vjust = -0.3) +
  labs(title = "RMSE by Construction Era",
       x = "Era", y = "RMSE") +
  theme_minimal()
</pre>

            <h3>4. ÊÆãÂ∑ÆÂàÜÊûê</h3>
            <pre>
# ÊÆãÂ∑Æ„ÅÆË©≥Á¥∞ÂàÜÊûê
residual_analysis <- ames_predictions |>
  mutate(
    abs_residuals = abs(residuals),
    squared_residuals = residuals^2,
    standardized_residuals = residuals / sd(residuals)
  )

# ÊÆãÂ∑Æ„Éó„É≠„ÉÉ„Éà
p1 <- residual_analysis |>
  ggplot(aes(x = .pred, y = residuals)) +
  geom_point(alpha = 0.6) +
  geom_hline(yintercept = 0, color = "red", linetype = "dashed") +
  geom_smooth(se = FALSE) +
  labs(title = "Residuals vs Fitted", x = "Fitted", y = "Residuals")

p2 <- residual_analysis |>
  ggplot(aes(sample = standardized_residuals)) +
  stat_qq() + stat_qq_line() +
  labs(title = "Q-Q Plot of Standardized Residuals")

library(patchwork)
p1 + p2
</pre>
        </div>

        <div class="section">
            <h2>üéØ ‰∫åÂÄ§ÂàÜÈ°ûÂïèÈ°å„ÅÆË©ï‰æ°</h2>
            
            <h3>1. Âü∫Êú¨ÁöÑ„Å™ÂàÜÈ°ûÊåáÊ®ô</h3>
            <p>‰∫åÂÄ§ÂàÜÈ°û„Å´„Åä„Åë„Çã‰∏ªË¶Å„Å™Ë©ï‰æ°ÊåáÊ®ô„ÇíÂ≠¶Áøí„Åó„Åæ„Åô„ÄÇ</p>

            <pre>
# Âü∫Êú¨ÁöÑ„Å™ÂàÜÈ°ûÊåáÊ®ô
binary_metrics <- classification_sample |>
  metrics(truth = truth, estimate = estimate, .pred_Class1)

binary_metrics

# Ê∑∑ÂêåË°åÂàóÔºàConfusion MatrixÔºâ
conf_matrix <- classification_sample |>
  conf_mat(truth = truth, estimate = estimate)

conf_matrix

# Ê∑∑ÂêåË°åÂàó„ÅÆÂèØË¶ñÂåñ
autoplot(conf_matrix, type = "heatmap") +
  scale_fill_gradient(low = "white", high = "lightblue") +
  theme_minimal()
</pre>

            <h3>2. Á≤æÂ∫¶„ÉªÂÜçÁèæÁéá„ÉªF1„Çπ„Ç≥„Ç¢</h3>
            <pre>
# Ë©≥Á¥∞„Å™ÂàÜÈ°ûÊåáÊ®ô
detailed_metrics <- classification_sample |>
  summarise(
    accuracy = accuracy_vec(truth, estimate),
    precision = precision_vec(truth, estimate),
    recall = recall_vec(truth, estimate),
    f1_score = f_meas_vec(truth, estimate),
    specificity = specificity_vec(truth, estimate),
    sensitivity = sensitivity_vec(truth, estimate)
  )

detailed_metrics

# ÊåáÊ®ô„ÅÆËß£Èáà
interpretation <- tribble(
  ~Metric, ~Formula, ~Interpretation,
  "Accuracy", "(TP + TN) / (TP + TN + FP + FN)", "ÂÖ®‰ΩìÁöÑ„Å™Ê≠£Ëß£Áéá",
  "Precision", "TP / (TP + FP)", "ÈôΩÊÄß‰∫àÊ∏¨„ÅÆÊ≠£Á¢∫„Åï",
  "Recall (Sensitivity)", "TP / (TP + FN)", "ÂÆüÈöõ„ÅÆÈôΩÊÄß„ÅÆÊ§úÂá∫Áéá",
  "Specificity", "TN / (TN + FP)", "ÂÆüÈöõ„ÅÆÈô∞ÊÄß„ÅÆÊ§úÂá∫Áéá",
  "F1 Score", "2 * (Precision * Recall) / (Precision + Recall)", "Á≤æÂ∫¶„Å®ÂÜçÁèæÁéá„ÅÆË™øÂíåÂπ≥Âùá"
)

interpretation
</pre>

            <h3>3. ROCÊõ≤Á∑ö„Å®AUC</h3>
            <pre>
# ROCÊõ≤Á∑ö„ÅÆ‰ΩúÊàê
roc_curve_data <- classification_sample |>
  roc_curve(truth = truth, .pred_Class1)

# ROCÊõ≤Á∑ö„ÅÆÂèØË¶ñÂåñ
roc_plot <- roc_curve_data |>
  ggplot(aes(x = 1 - specificity, y = sensitivity)) +
  geom_line(size = 1.2, color = "blue") +
  geom_abline(slope = 1, intercept = 0, linetype = "dashed", color = "red") +
  coord_equal() +
  labs(title = "ROC Curve",
       x = "False Positive Rate (1 - Specificity)",
       y = "True Positive Rate (Sensitivity)") +
  theme_minimal()

roc_plot

# AUCÂÄ§„ÅÆË®àÁÆó
auc_value <- classification_sample |>
  roc_auc(truth = truth, .pred_Class1)

auc_value
</pre>

            <h3>4. PRÊõ≤Á∑öÔºàPrecision-RecallÊõ≤Á∑öÔºâ</h3>
            <pre>
# PRÊõ≤Á∑ö„ÅÆ‰ΩúÊàê
pr_curve_data <- classification_sample |>
  pr_curve(truth = truth, .pred_Class1)

# PRÊõ≤Á∑ö„ÅÆÂèØË¶ñÂåñ
pr_plot <- pr_curve_data |>
  ggplot(aes(x = recall, y = precision)) +
  geom_line(size = 1.2, color = "green") +
  labs(title = "Precision-Recall Curve",
       x = "Recall", y = "Precision") +
  theme_minimal()

pr_plot

# PR-AUCÂÄ§„ÅÆË®àÁÆó
pr_auc_value <- classification_sample |>
  pr_auc(truth = truth, .pred_Class1)

pr_auc_value

# ROC„Å®PR„ÅÆÊØîËºÉ
library(patchwork)
(roc_plot + labs(subtitle = paste("AUC =", round(auc_value$.estimate, 3)))) +
(pr_plot + labs(subtitle = paste("PR-AUC =", round(pr_auc_value$.estimate, 3))))
</pre>

            <div class="tip-box">
                <p><strong>ROC vs PRÊõ≤Á∑ö„ÅÆ‰Ωø„ÅÑÂàÜ„ÅëÔºö</strong></p>
                <ul>
                    <li><strong>ROCÊõ≤Á∑ö</strong>: „Éê„É©„É≥„Çπ„ÅÆÂèñ„Çå„Åü„Éá„Éº„Çø„Çª„ÉÉ„Éà„Å´ÈÅ©„Åó„Å¶„ÅÑ„Çã</li>
                    <li><strong>PRÊõ≤Á∑ö</strong>: ‰∏çÂùáË°°„Éá„Éº„Çø„Çª„ÉÉ„ÉàÔºàÈôΩÊÄß„Çµ„É≥„Éó„É´„ÅåÂ∞ë„Å™„ÅÑÔºâ„Å´ÈÅ©„Åó„Å¶„ÅÑ„Çã</li>
                    <li>‰∏°Êñπ„Çí‰ΩµÁî®„Åô„Çã„Åì„Å®„Åß„ÄÅ„É¢„Éá„É´„ÅÆÊÄßËÉΩ„ÇíÂ§öËßíÁöÑ„Å´Ë©ï‰æ°ÂèØËÉΩ</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>üé® Â§ö„ÇØ„É©„ÇπÂàÜÈ°û„ÅÆË©ï‰æ°</h2>
            
            <h3>1. Â§ö„ÇØ„É©„ÇπÂàÜÈ°ûÊåáÊ®ô</h3>
            <p>3„Å§‰ª•‰∏ä„ÅÆ„ÇØ„É©„Çπ„Åå„ÅÇ„ÇãÂàÜÈ°ûÂïèÈ°å„ÅÆË©ï‰æ°ÊñπÊ≥ï„ÇíÂ≠¶Áøí„Åó„Åæ„Åô„ÄÇ</p>

            <pre>
# Â§ö„ÇØ„É©„ÇπÂàÜÈ°û„Éá„Éº„Çø„ÅÆÊ∫ñÂÇô
multiclass_sample <- hpc_data |>
  select(obs, pred, VF:L) |>
  slice_sample(n = 500)

# Âü∫Êú¨ÁöÑ„Å™Â§ö„ÇØ„É©„ÇπÊåáÊ®ô
multiclass_metrics <- multiclass_sample |>
  metrics(truth = obs, estimate = pred, VF:L)

multiclass_metrics

# „ÇØ„É©„ÇπÂà•Ë©≥Á¥∞Ë©ï‰æ°
class_metrics <- multiclass_sample |>
  summarise(
    accuracy = accuracy_vec(obs, pred),
    kappa = kap_vec(obs, pred),
    mcc = mcc_vec(obs, pred)  # Matthews correlation coefficient
  )

class_metrics
</pre>

            <h3>2. „Éû„ÇØ„É≠„Éª„Éû„Ç§„ÇØ„É≠Âπ≥Âùá</h3>
            <pre>
# „Éû„ÇØ„É≠Âπ≥Âùá„Å®„Éû„Ç§„ÇØ„É≠Âπ≥Âùá„ÅÆË®àÁÆó
macro_micro_comparison <- tribble(
  ~averaging, ~precision, ~recall, ~f1,
  "macro", 
  precision_vec(multiclass_sample$obs, multiclass_sample$pred, estimator = "macro"),
  recall_vec(multiclass_sample$obs, multiclass_sample$pred, estimator = "macro"),
  f_meas_vec(multiclass_sample$obs, multiclass_sample$pred, estimator = "macro"),
  "micro",
  precision_vec(multiclass_sample$obs, multiclass_sample$pred, estimator = "micro"),
  recall_vec(multiclass_sample$obs, multiclass_sample$pred, estimator = "micro"),
  f_meas_vec(multiclass_sample$obs, multiclass_sample$pred, estimator = "micro")
)

macro_micro_comparison
</pre>

            <h3>3. „ÇØ„É©„ÇπÂà•Ë©≥Á¥∞ÂàÜÊûê</h3>
            <pre>
# „ÇØ„É©„ÇπÂà•„ÅÆÊ∑∑ÂêåË°åÂàó
multiclass_conf <- multiclass_sample |>
  conf_mat(truth = obs, estimate = pred)

multiclass_conf

# Ê∑∑ÂêåË°åÂàó„ÅÆÂèØË¶ñÂåñ
autoplot(multiclass_conf, type = "heatmap") +
  scale_fill_gradient(low = "white", high = "darkblue") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

# „ÇØ„É©„ÇπÂà•„ÅÆÁ≤æÂ∫¶„ÉªÂÜçÁèæÁéá
class_by_class_metrics <- multiclass_sample |>
  group_by(obs) |>
  summarise(
    count = n(),
    correct = sum(obs == pred),
    accuracy = correct / count
  ) |>
  arrange(desc(accuracy))

class_by_class_metrics
</pre>
        </div>

        <div class="section">
            <h2>üìä ÈñæÂÄ§„ÅÆÊúÄÈÅ©Âåñ</h2>
            
            <h3>1. ÊúÄÈÅ©ÈñæÂÄ§„ÅÆÊé¢Á¥¢</h3>
            <p>ÂàÜÈ°ûÂïèÈ°å„Å´„Åä„ÅÑ„Å¶„ÄÅ‰∫àÊ∏¨Á¢∫Áéá„Çí‰∫åÂÄ§„Å´Â§âÊèõ„Åô„ÇãÊúÄÈÅ©„Å™ÈñæÂÄ§„ÇíË¶ã„Å§„Åë„Åæ„Åô„ÄÇ</p>

            <pre>
# Áï∞„Å™„ÇãÈñæÂÄ§„Åß„ÅÆ„É°„Éà„É™„ÇØ„ÇπË®àÁÆó
threshold_analysis <- tibble(
  threshold = seq(0.1, 0.9, by = 0.05)
) |>
  mutate(
    metrics = map(threshold, ~ {
      classification_sample |>
        mutate(
          pred_class = if_else(.pred_Class1 >= .x, "Class1", "Class2"),
          pred_class = factor(pred_class, levels = levels(truth))
        ) |>
        summarise(
          accuracy = accuracy_vec(truth, pred_class),
          precision = precision_vec(truth, pred_class),
          recall = recall_vec(truth, pred_class),
          f1 = f_meas_vec(truth, pred_class)
        )
    })
  ) |>
  unnest(metrics)

# ÊúÄÈÅ©ÈñæÂÄ§„ÅÆÂèØË¶ñÂåñ
threshold_plot <- threshold_analysis |>
  pivot_longer(accuracy:f1, names_to = "metric", values_to = "value") |>
  ggplot(aes(x = threshold, y = value, color = metric)) +
  geom_line(size = 1) +
  geom_point() +
  labs(title = "Metrics vs Threshold",
       x = "Threshold", y = "Metric Value",
       color = "Metric") +
  theme_minimal()

threshold_plot

# ÊúÄÈÅ©ÈñæÂÄ§„ÅÆÁâπÂÆö
optimal_thresholds <- threshold_analysis |>
  summarise(
    best_accuracy = threshold[which.max(accuracy)],
    best_f1 = threshold[which.max(f1)],
    best_precision = threshold[which.max(precision)],
    best_recall = threshold[which.max(recall)]
  )

optimal_thresholds
</pre>

            <h3>2. Youden's JÁµ±Ë®àÈáè</h3>
            <pre>
# Youden's JÁµ±Ë®àÈáè„Å´„Çà„ÇãÊúÄÈÅ©ÈñæÂÄ§
# J = Sensitivity + Specificity - 1
youden_analysis <- tibble(
  threshold = seq(0.01, 0.99, by = 0.01)
) |>
  mutate(
    j_stat = map_dbl(threshold, ~ {
      pred_class <- if_else(classification_sample$.pred_Class1 >= .x, 
                           "Class1", "Class2")
      pred_class <- factor(pred_class, levels = levels(classification_sample$truth))
      
      sens <- sensitivity_vec(classification_sample$truth, pred_class)
      spec <- specificity_vec(classification_sample$truth, pred_class)
      
      sens + spec - 1
    })
  )

# ÊúÄÈÅ©ÈñæÂÄ§„ÅÆÁâπÂÆö
optimal_youden <- youden_analysis |>
  slice_max(j_stat, n = 1)

# YoudenÁµ±Ë®àÈáè„ÅÆÂèØË¶ñÂåñ
youden_plot <- youden_analysis |>
  ggplot(aes(x = threshold, y = j_stat)) +
  geom_line(size = 1, color = "blue") +
  geom_vline(xintercept = optimal_youden$threshold, 
             color = "red", linetype = "dashed") +
  geom_text(x = optimal_youden$threshold + 0.1, 
            y = optimal_youden$j_stat, 
            label = paste("Optimal =", round(optimal_youden$threshold, 3))) +
  labs(title = "Youden's J Statistic vs Threshold",
       x = "Threshold", y = "J Statistic") +
  theme_minimal()

youden_plot
</pre>
        </div>

        <div class="section">
            <h2>üõ†Ô∏è „Ç´„Çπ„Çø„É†Ë©ï‰æ°ÊåáÊ®ô„ÅÆ‰ΩúÊàê</h2>
            
            <h3>1. Âü∫Êú¨ÁöÑ„Å™„Ç´„Çπ„Çø„É†ÊåáÊ®ô</h3>
            <p>„Éì„Ç∏„Éç„ÇπË¶Å‰ª∂„Å´Âøú„Åò„ÅüÁã¨Ëá™„ÅÆË©ï‰æ°ÊåáÊ®ô„Çí‰ΩúÊàê„Åß„Åç„Åæ„Åô„ÄÇ</p>

            <pre>
# „Ç´„Çπ„Çø„É†ÊåáÊ®ô„ÅÆ‰æãÔºöÂä†ÈáçÁ≤æÂ∫¶
weighted_accuracy <- function(data, truth, estimate, class_weights = NULL, ...) {
  # „Éá„Éï„Ç©„É´„Éà„ÅÆÈáç„ÅøÔºàÂÖ®„Å¶1Ôºâ
  if (is.null(class_weights)) {
    class_weights <- rep(1, length(levels(data[[truth]])))
    names(class_weights) <- levels(data[[truth]])
  }
  
  # Ê∑∑ÂêåË°åÂàó„ÅÆ‰ΩúÊàê
  cm <- table(data[[truth]], data[[estimate]])
  
  # ÂêÑ„ÇØ„É©„Çπ„ÅÆÊ≠£Ëß£Êï∞„Å´Èáç„Åø„ÇíÈÅ©Áî®
  weighted_correct <- sum(diag(cm) * class_weights[rownames(cm)])
  total_weighted <- sum(cm * outer(class_weights[rownames(cm)], 
                                  class_weights[colnames(cm)]))
  
  # ÁµêÊûú„ÇíËøî„Åô
  tibble(
    .metric = "weighted_accuracy",
    .estimator = "multiclass",
    .estimate = weighted_correct / sum(cm)
  )
}

# „Ç´„Çπ„Çø„É†ÊåáÊ®ô„ÅÆ‰ΩøÁî®‰æã
custom_weights <- c("Class1" = 2, "Class2" = 1)  # Class1„ÇíÈáçË¶ñ

weighted_result <- weighted_accuracy(
  classification_sample, 
  "truth", 
  "estimate", 
  class_weights = custom_weights
)

weighted_result
</pre>

            <h3>2. „Éì„Ç∏„Éç„ÇπÊåáÊ®ô„ÅÆÂÆüË£Ö</h3>
            <pre>
# „Ç≥„Çπ„ÉàËÄÉÊÖÆË©ï‰æ°ÊåáÊ®ô
cost_sensitive_metric <- function(data, truth, estimate, 
                                 fn_cost = 1, fp_cost = 1, ...) {
  cm <- conf_mat_vec(data[[truth]], data[[estimate]])
  
  # Ê∑∑ÂêåË°åÂàó„Åã„ÇâÂêÑË¶ÅÁ¥†„ÇíÊäΩÂá∫
  tp <- cm[1, 1]  # True Positive
  tn <- cm[2, 2]  # True Negative  
  fp <- cm[2, 1]  # False Positive
  fn <- cm[1, 2]  # False Negative
  
  # Á∑è„Ç≥„Çπ„Éà„ÅÆË®àÁÆó
  total_cost <- fn * fn_cost + fp * fp_cost
  total_cases <- sum(cm)
  
  # „Ç≥„Çπ„Éà per case
  cost_per_case <- total_cost / total_cases
  
  tibble(
    .metric = "cost_per_case",
    .estimator = "binary",
    .estimate = cost_per_case
  )
}

# ‰ΩøÁî®‰æãÔºöÂÅΩÈô∞ÊÄß„ÅÆ„Ç≥„Çπ„Éà„ÅåÂÅΩÈôΩÊÄß„ÅÆ5ÂÄç„ÅÆÂ†¥Âêà
cost_result <- cost_sensitive_metric(
  classification_sample,
  "truth",
  "estimate", 
  fn_cost = 5,
  fp_cost = 1
)

cost_result
</pre>
        </div>

        <div class="section">
            <h2>üìã ÂåÖÊã¨ÁöÑ„Å™„É¢„Éá„É´Ë©ï‰æ°„É¨„Éù„Éº„Éà</h2>
            
            <h3>1. Ëá™Âãï„É¨„Éù„Éº„ÉàÁîüÊàê</h3>
            <pre>
# ÂåÖÊã¨ÁöÑË©ï‰æ°Èñ¢Êï∞
comprehensive_evaluation <- function(data, truth_col, pred_col, pred_prob_col) {
  
  # Âü∫Êú¨Áµ±Ë®à
  basic_stats <- data |>
    summarise(
      n_samples = n(),
      n_classes = n_distinct(!!sym(truth_col)),
      class_balance = list(table(!!sym(truth_col)))
    )
  
  # Âü∫Êú¨„É°„Éà„É™„ÇØ„Çπ
  basic_metrics <- data |>
    metrics(truth = !!sym(truth_col), 
            estimate = !!sym(pred_col),
            !!sym(pred_prob_col))
  
  # Ê∑∑ÂêåË°åÂàó
  conf_matrix <- data |>
    conf_mat(truth = !!sym(truth_col), estimate = !!sym(pred_col))
  
  # ROC & PRÊõ≤Á∑ö„Éá„Éº„Çø
  roc_data <- data |>
    roc_curve(truth = !!sym(truth_col), !!sym(pred_prob_col))
  
  pr_data <- data |>
    pr_curve(truth = !!sym(truth_col), !!sym(pred_prob_col))
  
  # ÁµêÊûú„Çí„É™„Çπ„Éà„ÅßËøî„Åô
  list(
    basic_stats = basic_stats,
    metrics = basic_metrics,
    confusion_matrix = conf_matrix,
    roc_curve = roc_data,
    pr_curve = pr_data
  )
}

# ‰ΩøÁî®‰æã
evaluation_report <- comprehensive_evaluation(
  classification_sample,
  "truth",
  "estimate", 
  ".pred_Class1"
)

# „É¨„Éù„Éº„Éà„ÅÆË°®Á§∫
evaluation_report$basic_stats
evaluation_report$metrics
</pre>

            <h3>2. ÂèØË¶ñÂåñ‰ªò„Åç„É¨„Éù„Éº„Éà</h3>
            <pre>
# ÂèØË¶ñÂåñÈñ¢Êï∞
create_evaluation_plots <- function(eval_report) {
  # ROCÊõ≤Á∑ö
  roc_plot <- eval_report$roc_curve |>
    ggplot(aes(x = 1 - specificity, y = sensitivity)) +
    geom_line(size = 1.2, color = "blue") +
    geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
    coord_equal() +
    labs(title = "ROC Curve", x = "FPR", y = "TPR") +
    theme_minimal()
  
  # PRÊõ≤Á∑ö
  pr_plot <- eval_report$pr_curve |>
    ggplot(aes(x = recall, y = precision)) +
    geom_line(size = 1.2, color = "green") +
    labs(title = "Precision-Recall Curve") +
    theme_minimal()
  
  # Ê∑∑ÂêåË°åÂàó
  conf_plot <- autoplot(eval_report$confusion_matrix, type = "heatmap") +
    scale_fill_gradient(low = "white", high = "lightblue") +
    labs(title = "Confusion Matrix") +
    theme_minimal()
  
  # „É°„Éà„É™„ÇØ„ÇπÊ£í„Ç∞„É©„Éï
  metrics_plot <- eval_report$metrics |>
    filter(.metric %in% c("accuracy", "precision", "recall", "f_meas")) |>
    ggplot(aes(x = .metric, y = .estimate)) +
    geom_col(fill = "lightcoral") +
    geom_text(aes(label = round(.estimate, 3)), vjust = -0.3) +
    ylim(0, 1) +
    labs(title = "Key Metrics", x = "Metric", y = "Value") +
    theme_minimal()
  
  # 4„Å§„ÅÆ„Éó„É≠„ÉÉ„Éà„ÇíÁµÑ„ÅøÂêà„Çè„Åõ
  library(patchwork)
  (roc_plot + pr_plot) / (conf_plot + metrics_plot)
}

# ÂèØË¶ñÂåñÂÆüË°å
evaluation_plots <- create_evaluation_plots(evaluation_report)
evaluation_plots
</pre>
        </div>

        <!-- EVALUATION STRATEGIES -->
        <div class="section">
            <h2>üéØ Ë©ï‰æ°Êà¶Áï•„ÅÆÈÅ∏ÊäûÊåáÈáù</h2>
            <p>
                Áï∞„Å™„ÇãÂïèÈ°å„Çø„Ç§„Éó„ÇÑ„Éá„Éº„Çø„ÅÆÊÄßË≥™„Å´Âøú„Åò„ÅüÊúÄÈÅ©„Å™Ë©ï‰æ°Êà¶Áï•„ÇíÈÅ∏Êäû„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ
            </p>
            
            <div class="function-grid">
                <div class="function-card">
                    <div class="function-title">üìä ÂõûÂ∏∞ÂïèÈ°å</div>
                    <div class="function-description">
                        <strong>‰∏ªË¶ÅÊåáÊ®ô:</strong> RMSE, MAE, R¬≤<br>
                        <strong>ÈÅ∏ÊäûÊåáÈáù:</strong> RMSEÔºàËß£Èáà„Åó„ÇÑ„Åô„ÅÑÔºâ„ÄÅMAEÔºàÂ§ñ„ÇåÂÄ§„Å´È†ëÂÅ•Ôºâ<br>
                        <strong>Ê≥®ÊÑèÁÇπ:</strong> „Çπ„Ç±„Éº„É´„ÇÑÂàÜÂ∏É„ÇíËÄÉÊÖÆ
                    </div>
                </div>
                
                <div class="function-card">
                    <div class="function-title">‚öñÔ∏è „Éê„É©„É≥„ÇπÂàÜÈ°û</div>
                    <div class="function-description">
                        <strong>‰∏ªË¶ÅÊåáÊ®ô:</strong> Accuracy, F1-score<br>
                        <strong>ÈÅ©Áî®„Ç±„Éº„Çπ:</strong> ÂêÑ„ÇØ„É©„Çπ„ÅÆ„Çµ„É≥„Éó„É´Êï∞„ÅåÂêåÁ®ãÂ∫¶<br>
                        <strong>ÂèØË¶ñÂåñ:</strong> ROCÊõ≤Á∑ö„ÅåÂäπÊûúÁöÑ
                    </div>
                </div>
                
                <div class="function-card">
                    <div class="function-title">‚ö†Ô∏è ‰∏çÂùáË°°ÂàÜÈ°û</div>
                    <div class="function-description">
                        <strong>‰∏ªË¶ÅÊåáÊ®ô:</strong> Precision, Recall, PR-AUC<br>
                        <strong>ÈÅ©Áî®„Ç±„Éº„Çπ:</strong> Èô£ÊÄß„Çµ„É≥„Éó„É´„ÅåÂ∞ë„Å™„ÅÑÂ†¥Âêà<br>
                        <strong>ÂèØË¶ñÂåñ:</strong> PRÊõ≤Á∑ö„ÇíÂÑ™ÂÖà
                    </div>
                </div>
                
                <div class="function-card">
                    <div class="function-title">üè¢ „Éì„Ç∏„Éç„ÇπÊåáÊ®ô</div>
                    <div class="function-description">
                        <strong>‰∏ªË¶ÅÊåáÊ®ô:</strong> „Ç´„Çπ„Çø„É†„É°„Éà„É™„ÉÉ„ÇØ<br>
                        <strong>ÈÅ©Áî®„Ç±„Éº„Çπ:</strong> „Ç≥„Çπ„ÉàËÄÉÊÖÆ„ÄÅROIÈáçË¶ñ<br>
                        <strong>ÁâπÂæ¥:</strong> „Éì„Ç∏„Éç„ÇπË¶Å‰ª∂„ÇíÁõ¥Êé•ÂèçÊò†
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üéÜ Á´†„ÅÆ„Åæ„Å®„ÇÅ</h2>
            <p>
                Êú¨Á´†„Åß„ÅØ„ÄÅyardstick„Éë„ÉÉ„Ç±„Éº„Ç∏„Çí‰ΩøÁî®„Åó„ÅüÂåÖÊã¨ÁöÑ„Å™„É¢„Éá„É´Ë©ï‰æ°ÊäÄË°ì„Çí„Éû„Çπ„Çø„Éº„Åó„Åæ„Åó„Åü„ÄÇÂÆüÁî®ÁöÑ„Å™Ê©üÊ¢∞Â≠¶Áøí„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åß„ÅÆË©ï‰æ°ÊäÄË°ì„ÇíÁøíÂæó„Åó„Åæ„Åó„Åü„ÄÇ
            </p>
            
            <h3>üìö Â≠¶Áøí„Åó„Åü‰∏ªË¶Å„Éù„Ç§„É≥„Éà</h3>
            <div class="function-grid" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                <div class="function-card">
                    <div class="function-title">Âü∫Êú¨Ë©ï‰æ°</div>
                    <div class="function-description">
                        ‚Ä¢ yardstick„Éë„ÉÉ„Ç±„Éº„Ç∏„ÅÆÁµ±‰∏ÄAPI<br>
                        ‚Ä¢ ÂõûÂ∏∞„ÉªÂàÜÈ°ûÊåáÊ®ô„ÅÆÁêÜËß£<br>
                        ‚Ä¢ metrics()Èñ¢Êï∞„Åß‰∏ÄÊã¨Ë©ï‰æ°
                    </div>
                </div>
                
                <div class="function-card">
                    <div class="function-title">È´òÂ∫¶„Å™ÂèØË¶ñÂåñ</div>
                    <div class="function-description">
                        ‚Ä¢ ROCÊõ≤Á∑ö„Å®PRÊõ≤Á∑ö„ÅÆ‰ΩúÊàê<br>
                        ‚Ä¢ Ê∑∑ÂêåË°åÂàó„ÅÆ„Éí„Éº„Éà„Éû„ÉÉ„Éó<br>
                        ‚Ä¢ autoplot()„ÅßÁ∞°ÂçòÂèØË¶ñÂåñ
                    </div>
                </div>
                
                <div class="function-card">
                    <div class="function-title">ÂÆüÁî®ÁöÑ„ÉÜ„ÇØ„Éã„ÉÉ„ÇØ</div>
                    <div class="function-description">
                        ‚Ä¢ ÈóæÂÄ§ÊúÄÈÅ©ÂåñÊâãÊ≥ï<br>
                        ‚Ä¢ „Ç´„Çπ„Çø„É†„É°„Éà„É™„ÉÉ„ÇØ‰ΩúÊàê<br>
                        ‚Ä¢ Ëá™Âãï„É¨„Éù„Éº„ÉàÁîüÊàê
                    </div>
                </div>
            </div>
            
            <p style="margin-top: 30px; font-size: 1.1rem; color: var(--accent-neon); text-align: center;">
                üöÄ <strong>„Åì„Çå„Åß„ÅÇ„Å™„Åü„ÇÇ„É¢„Éá„É´Ë©ï‰æ°„ÅÆ„Ç®„Ç≠„Çπ„Éë„Éº„Éà„Åß„ÅôÔºÅ</strong>
            </p>
        </div>

        <!-- LEGACY SECTION - keeping for reference -->
        <div class="section" style="display:none;">
            <h2>üéØ „Åæ„Å®„ÇÅ„Å®Ê¨°„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó</h2>
            
            <h3>Chapter 18„ÅßÂ≠¶„Çì„Å†„Åì„Å®</h3>
            <ul>
                <li>yardstick„Éë„ÉÉ„Ç±„Éº„Ç∏„Å´„Çà„ÇãÂåÖÊã¨ÁöÑ„Å™„É¢„Éá„É´Ë©ï‰æ°</li>
                <li>ÂõûÂ∏∞„ÉªÂàÜÈ°ûÂïèÈ°å„Åù„Çå„Åû„Çå„ÅÆÈáçË¶Å„Å™Ë©ï‰æ°ÊåáÊ®ô</li>
                <li>Â§ö„ÇØ„É©„ÇπÂàÜÈ°û„ÅÆÁâπÊÆä„Å™Ë©ï‰æ°ÊâãÊ≥ï</li>
                <li>ROC„ÉªPRÊõ≤Á∑ö„Å´„Çà„ÇãÊÄßËÉΩ„ÅÆÂèØË¶ñÂåñ</li>
                <li>ÊúÄÈÅ©ÈñæÂÄ§„ÅÆÊ±∫ÂÆöÊñπÊ≥ï</li>
                <li>„Ç´„Çπ„Çø„É†Ë©ï‰æ°ÊåáÊ®ô„ÅÆ‰ΩúÊàê</li>
                <li>ÂåÖÊã¨ÁöÑ„Å™Ë©ï‰æ°„É¨„Éù„Éº„Éà„ÅÆËá™ÂãïÁîüÊàê</li>
            </ul>

            <h3>Ë©ï‰æ°ÊåáÊ®ôÈÅ∏Êäû„ÅÆ„Ç¨„Ç§„Éâ„É©„Ç§„É≥</h3>
            <div class="tip-box">
                <ul>
                    <li><strong>ÂõûÂ∏∞ÂïèÈ°å</strong>: RMSEÔºàËß£Èáà„Åó„ÇÑ„Åô„ÅÑÔºâ„ÄÅMAEÔºàÂ§ñ„ÇåÂÄ§„Å´È†ëÂÅ•Ôºâ</li>
                    <li><strong>„Éê„É©„É≥„ÇπÂàÜÈ°û</strong>: Accuracy„ÄÅF1-score</li>
                    <li><strong>‰∏çÂùáË°°ÂàÜÈ°û</strong>: Precision„ÄÅRecall„ÄÅPR-AUC</li>
                    <li><strong>„Ç≥„Çπ„ÉàËÄÉÊÖÆ</strong>: „Ç´„Çπ„Çø„É†ÊåáÊ®ôÔºà„Éì„Ç∏„Éç„ÇπË¶Å‰ª∂ÂèçÊò†Ôºâ</li>
                </ul>
            </div>

            <div class="warning-box">
                <p><strong>Ë©ï‰æ°„ÅÆÊ≥®ÊÑèÁÇπÔºö</strong></p>
                <ul>
                    <li>Âçò‰∏ÄÊåáÊ®ô„Å†„Åë„Åß„Å™„ÅèË§áÊï∞„ÅÆË¶≥ÁÇπ„Åã„ÇâË©ï‰æ°„Åô„Çã</li>
                    <li>„Éá„Éº„Çø„ÅÆÊÄßË≥™Ôºà‰∏çÂùáË°°„ÄÅÂ§ñ„ÇåÂÄ§Á≠âÔºâ„ÇíËÄÉÊÖÆ„Åô„Çã</li>
                    <li>„Éì„Ç∏„Éç„ÇπÁõÆÊ®ô„Å®ÊäÄË°ìÁöÑÊåáÊ®ô„ÇíÊï¥Âêà„Åï„Åõ„Çã</li>
                    <li>‰∫§Â∑ÆÊ§úË®º„Åß„ÅÆÂÆâÂÆöÊÄß„ÇÇÁ¢∫Ë™ç„Åô„Çã</li>
                </ul>
            </div>

            <h3>Ê¨°„ÅÆÁ´†„Å∏„ÅÆÊ∫ñÂÇô</h3>
            <p>Ê¨°„ÅÆÁ¨¨19Á´†„Åß„ÅØ„ÄÅË©ï‰æ°Ê∏à„Åø„É¢„Éá„É´„Çí‰Ωø„Å£„Åü<strong>‰∫àÊ∏¨„Å®Ëß£Èáà</strong>„ÇíÂ≠¶Áøí„Åó„Åæ„Åô„ÄÇÂÆüÈöõ„ÅÆ‰∫àÊ∏¨„Çø„Çπ„ÇØ„Åß„ÅÆÊ¥ªÁî®ÊñπÊ≥ï„Å®„ÄÅ„É¢„Éá„É´„ÅÆËß£ÈáàÂèØËÉΩÊÄß„Å´„Å§„ÅÑ„Å¶Ê∑±„ÅèÁêÜËß£„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ</p>
        </div>

        <!-- Bottom Navigation -->
        <nav class="chapter-nav" style="margin-top: 40px;">
            <a href="chapter10-advanced-dplyr.html" class="nav-button">Ch10: dplyrÂøúÁî®</a>
            <a href="chapter11-machine-learning.html" class="nav-button">Ch11: Ê©üÊ¢∞Â≠¶Áøí</a>
            <a href="chapter12-model-evaluation.html" class="nav-button">Ch12: „É¢„Éá„É´Ë©ï‰æ°</a>
            <a href="chapter13-advanced-ggplot2.html" class="nav-button">Ch13: ggplot2ÂøúÁî®</a>
            <a href="chapter14-interactive-visualization.html" class="nav-button">Ch14: ÂØæË©±ÁöÑÂèØË¶ñÂåñ</a>
            <a href="chapter15-big-data.html" class="nav-button">Ch15: „Éì„ÉÉ„Ç∞„Éá„Éº„Çø</a>
            <a href="chapter16-resampling-rsample.html" class="nav-button">Ch16: „É™„Çµ„É≥„Éó„É™„É≥„Ç∞</a>
            <a href="chapter17-hyperparameter-tuning.html" class="nav-button">Ch17: „ÉÅ„É•„Éº„Éã„É≥„Ç∞</a>
            <a href="chapter18-model-evaluation-yardstick.html" class="nav-button current">Ch18: „É¢„Éá„É´Ë©ï‰æ°</a>
            <a href="chapter19-prediction-interpretation.html" class="nav-button">Ch19: ‰∫àÊ∏¨Ëß£Èáà</a>
            <a href="chapter20-best-practices.html" class="nav-button">Ch20: „Éô„Çπ„Éà„Éó„É©„ÇØ„ÉÜ„Ç£„Çπ</a>
        </nav>

    <!-- Â≠¶Áøí„Å´„Åä„Åô„Åô„ÇÅ„ÅÆÊõ∏Á±ç -->
    <section class="book-recommendations" style="margin: 4rem 0; padding: 2rem; background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 20px; backdrop-filter: blur(10px);">
        <div class="container">
            <h3 style="color: var(--neon-cyan); font-family: var(--font-tech); font-size: 1.8rem; margin-bottom: 2rem; text-align: center;">
                üìö Â≠¶Áøí„Å´„Åä„Åô„Åô„ÇÅ„ÅÆÊõ∏Á±ç
            </h3>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem;">
                
                <!-- Book 1 -->
                <div class="book-card" style="background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 15px; padding: 1.5rem; transition: all 0.3s ease; position: relative; overflow: hidden;">
                    <a href="https://amzn.to/48d9vpc" target="_blank" rel="noopener" style="text-decoration: none; color: inherit;">
                        <div style="display: flex; flex-direction: column; height: 100%;">
                            <div style="flex: 1;">
                                <h4 style="color: var(--neon-lime); font-size: 1.2rem; margin-bottom: 1rem; font-family: var(--font-tech);">
                                    üî• R„É¶„Éº„Ç∂„ÅÆ„Åü„ÇÅ„ÅÆRStudio[ÂÆüË∑µ]ÂÖ•ÈñÄ
                                </h4>
                                <p style="color: rgba(255, 255, 255, 0.8); font-size: 0.95rem; line-height: 1.6; margin-bottom: 1rem;">
                                    tidyverse„ÅÆÂü∫Á§é„Åã„ÇâÂÆüË∑µ„Åæ„ÅßÁ∂≤ÁæÖ„Åó„ÅüÊó•Êú¨Ë™ûÊ±∫ÂÆöÁâà„ÄÇRStudio„Å®tidyverse„Åß„Éá„Éº„ÇøÂàÜÊûê„Çí„Éû„Çπ„Çø„Éº„ÄÇ
                                </p>
                            </div>
                            <div style="background: var(--gradient-cyber); color: var(--void-black); padding: 0.8rem 1.5rem; border-radius: 25px; text-align: center; font-weight: 600; font-family: var(--font-tech); margin-top: auto;">
                                Amazon„ÅßË©≥Á¥∞„ÇíË¶ã„Çã ‚Üí
                            </div>
                        </div>
                    </a>
                </div>
                
                <!-- Book 2 -->
                <div class="book-card" style="background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 15px; padding: 1.5rem; transition: all 0.3s ease; position: relative; overflow: hidden;">
                    <a href="https://amzn.to/3IfcanU" target="_blank" rel="noopener" style="text-decoration: none; color: inherit;">
                        <div style="display: flex; flex-direction: column; height: 100%;">
                            <div style="flex: 1;">
                                <h4 style="color: var(--neon-magenta); font-size: 1.2rem; margin-bottom: 1rem; font-family: var(--font-tech);">
                                    ü§ñ R„É¶„Éº„Ç∂„ÅÆ„Åü„ÇÅ„ÅÆtidymodels[ÂÆüË∑µ]ÂÖ•ÈñÄ
                                </h4>
                                <p style="color: rgba(255, 255, 255, 0.8); font-size: 0.95rem; line-height: 1.6; margin-bottom: 1rem;">
                                    tidymodels„ÅßÊ©üÊ¢∞Â≠¶Áøí„ÇíÂÆüË∑µ„Åô„Çã„Åü„ÇÅ„ÅÆÊó•Êú¨Ë™û„Ç¨„Ç§„Éâ„ÄÇ„É¢„Éá„É´ÊßãÁØâ„Åã„ÇâË©ï‰æ°„Åæ„ÅßÂÆåÂÖ®Á∂≤ÁæÖ„ÄÇ
                                </p>
                            </div>
                            <div style="background: var(--gradient-plasma); color: white; padding: 0.8rem 1.5rem; border-radius: 25px; text-align: center; font-weight: 600; font-family: var(--font-tech); margin-top: auto;">
                                Amazon„ÅßË©≥Á¥∞„ÇíË¶ã„Çã ‚Üí
                            </div>
                        </div>
                    </a>
                </div>
                
            </div>
            
            <div style="text-align: center; margin-top: 2rem;">
                <p style="color: rgba(255, 255, 255, 0.6); font-size: 0.9rem; font-style: italic;">
                    ‚Äª ÂΩì„Çµ„Ç§„Éà„ÅØAmazon„Ç¢„ÇΩ„Ç∑„Ç®„Ç§„Éà„Éó„É≠„Ç∞„É©„É†„Å´ÂèÇÂä†„Åó„Å¶„ÅÑ„Åæ„Åô
                </p>
            </div>
        </div>
    </section>
    
    <style>
    .book-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
        border-color: var(--neon-cyan);
    }

    .book-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        transition: left 0.5s ease;
    }

    .book-card:hover::before {
        left: 100%;
    }
    </style>

    </div>
</body>
</html>