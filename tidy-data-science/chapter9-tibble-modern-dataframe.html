<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬9ç« : tibble - ãƒ¢ãƒ€ãƒ³ãªãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ æ“ä½œ | Tidyverseå®Œå…¨ãƒã‚¹ã‚¿ãƒ¼</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --accent-neon: #00ff88;
            --accent-cyan: #00d4ff;
            --accent-purple: #9d4edd;
            --accent-gold: #ffd700;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --border-neon: #00ff88;
            --shadow-neon: 0 0 20px #00ff8840;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            line-height: 1.8;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: linear-gradient(45deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: 20px;
            border: 2px solid var(--accent-gold);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            animation: scan 3s infinite;
        }

        @keyframes scan {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        h1 {
            font-size: 3rem;
            font-weight: 700;
            color: var(--accent-gold);
            margin-bottom: 10px;
            text-shadow: 0 0 20px var(--accent-gold);
            position: relative;
            z-index: 1;
        }

        .subtitle {
            font-size: 1.4rem;
            color: var(--accent-cyan);
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .chapter-meta {
            display: flex;
            justify-content: center;
            gap: 20px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            position: relative;
            z-index: 1;
        }

        .progress-indicator {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .progress-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--bg-tertiary);
            border: 1px solid var(--text-secondary);
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: var(--accent-gold);
            border-color: var(--accent-gold);
            box-shadow: 0 0 8px var(--accent-gold);
        }

        .progress-dot.completed {
            background: var(--accent-cyan);
            border-color: var(--accent-cyan);
        }

        /* Navigation Widget */
        .chapter-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 6px;
            margin: 30px 0;
            padding: 10px;
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 1px solid var(--accent-gold);
            width: fit-content;
            max-width: 90vw;
            margin-left: auto;
            margin-right: auto;
            flex-wrap: wrap;
        }

        .nav-button {
            padding: 3px 8px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            text-decoration: none;
            border-radius: 4px;
            border: 1px solid var(--accent-cyan);
            transition: all 0.3s ease;
            font-size: 0.75rem;
            white-space: nowrap;
        }

        .nav-button:hover {
            background: var(--accent-cyan);
            color: var(--bg-primary);
            box-shadow: 0 0 10px var(--accent-cyan);
        }

        .nav-button.current {
            background: var(--accent-gold);
            color: var(--bg-primary);
            box-shadow: 0 0 10px var(--accent-gold);
        }

        /* Content Sections */
        .section {
            background: var(--bg-secondary);
            margin: 30px 0;
            padding: 30px;
            border-radius: 15px;
            border: 1px solid var(--accent-purple);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-gold), var(--accent-cyan), var(--accent-purple));
            border-radius: 15px 15px 0 0;
        }

        h2 {
            color: var(--accent-gold);
            font-size: 2rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px var(--accent-gold);
        }

        h3 {
            color: var(--accent-cyan);
            font-size: 1.5rem;
            margin: 25px 0 15px 0;
            text-shadow: 0 0 8px var(--accent-cyan);
        }

        h4 {
            color: var(--accent-purple);
            font-size: 1.2rem;
            margin: 20px 0 10px 0;
        }

        /* Code Blocks */
        .code-container {
            margin: 20px 0;
            background: #1a1a1a;
            border-radius: 10px;
            border: 1px solid var(--accent-gold);
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.1);
        }

        .code-header {
            background: var(--accent-gold);
            color: var(--bg-primary);
            padding: 10px 20px;
            font-weight: bold;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .code-header::before {
            content: 'ğŸ—ï¸';
            font-size: 1.1rem;
        }

        .code-content {
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.95rem;
            line-height: 1.6;
            background: #0d1117;
            color: #c9d1d9;
            overflow-x: auto;
        }

        /* Syntax highlighting */
        .keyword { color: #ff7b72; }
        .function { color: #d2a8ff; }
        .string { color: #a5d6ff; }
        .comment { color: #8b949e; font-style: italic; }
        .operator { color: #f85149; }
        .number { color: #79c0ff; }
        .variable { color: #ffa657; }

        /* Output Display */
        .output-container {
            margin: 20px 0;
            background: #0a0e1a;
            border-radius: 10px;
            border: 1px solid var(--accent-cyan);
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.1);
        }

        .output-header {
            background: var(--accent-cyan);
            color: var(--bg-primary);
            padding: 10px 20px;
            font-weight: bold;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .output-header::before {
            content: 'ğŸ“‹';
        }

        .output-content {
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: var(--accent-cyan);
        }

        /* Comparison Tables */
        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .comparison-box {
            background: var(--bg-tertiary);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--accent-purple);
        }

        .comparison-title {
            color: var(--accent-purple);
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .comparison-content {
            background: var(--bg-primary);
            padding: 15px;
            border-radius: 5px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Data Tables */
        .data-table {
            margin: 20px 0;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-tertiary);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid var(--accent-gold);
        }

        th {
            background: var(--accent-gold);
            color: var(--bg-primary);
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }

        td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--bg-secondary);
            color: var(--text-primary);
        }

        tr:nth-child(even) {
            background: rgba(255, 215, 0, 0.05);
        }

        tr:hover {
            background: rgba(255, 215, 0, 0.1);
        }

        /* Key Points */
        .key-points {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(0, 212, 255, 0.1) 100%);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-gold);
        }

        .key-points h4 {
            color: var(--accent-gold);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .key-points h4::before {
            content: 'ğŸ’¡';
        }

        .key-points ul {
            list-style: none;
            padding-left: 0;
        }

        .key-points li {
            margin: 8px 0;
            padding-left: 20px;
            position: relative;
        }

        .key-points li::before {
            content: 'â–¶';
            color: var(--accent-cyan);
            position: absolute;
            left: 0;
        }

        /* Warning/Tip boxes */
        .tip-box {
            background: rgba(157, 78, 221, 0.1);
            border: 1px solid var(--accent-purple);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-purple);
        }

        .tip-box h4 {
            color: var(--accent-purple);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tip-box h4::before {
            content: 'âš ï¸';
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            h1 {
                font-size: 2rem;
            }

            .subtitle {
                font-size: 1.1rem;
            }

            .chapter-meta {
                flex-direction: column;
                gap: 10px;
            }

            .chapter-nav {
                gap: 4px;
                padding: 8px;
            }

            .nav-button {
                padding: 2px 6px;
                font-size: 0.7rem;
            }

            .section {
                padding: 20px;
                margin: 20px 0;
            }

            h2 {
                font-size: 1.5rem;
            }

            .comparison-container {
                grid-template-columns: 1fr;
            }

            .code-content, .output-content {
                font-size: 0.85rem;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ç¬¬9ç« : tibble</h1>
            <p class="subtitle">ãƒ¢ãƒ€ãƒ³ãªãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ æ“ä½œ</p>
            <div class="chapter-meta">
                <span>ğŸ—ï¸ æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿</span>
                <span>ğŸ”§ ã‚¹ãƒãƒ¼ãƒˆè¡¨ç¤º</span>
                <span>âš¡ é«˜é€Ÿå‡¦ç†</span>
            </div>
            <div class="progress-indicator">
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot active"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
            </div>
        </header>

        <nav class="chapter-nav">
            <a href="chapter1-tidyverse-overview.html" class="nav-button">1</a>
            <a href="chapter2-dplyr-data-manipulation.html" class="nav-button">2</a>
            <a href="chapter3-ggplot2-visualization.html" class="nav-button">3</a>
            <a href="chapter4-tidyr-data-reshaping.html" class="nav-button">4</a>
            <a href="chapter5-stringr-text-processing.html" class="nav-button">5</a>
            <a href="chapter6-forcats-purrr-advanced.html" class="nav-button">6</a>
            <a href="chapter7-lubridate-datetime.html" class="nav-button">7</a>
            <a href="chapter8-readr-data-import.html" class="nav-button">8</a>
            <a href="#" class="nav-button current">9</a>
            <a href="chapter10-statistics-modeling.html" class="nav-button">10</a>
            <a href="chapter11-machine-learning.html" class="nav-button">11</a>
            <a href="chapter12-time-series.html" class="nav-button">12</a>
        </nav>

        <section class="section">
            <h2>ğŸ—ï¸ tibbleã¨data.frameã®é•ã„</h2>
            
            <p>tibbleã¯ã€Tidyverseã«ãŠã‘ã‚‹ãƒ¢ãƒ€ãƒ³ãªãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ å®Ÿè£…ã§ã™ã€‚å¾“æ¥ã®data.frameã®å•é¡Œç‚¹ã‚’è§£æ±ºã—ã€ã‚ˆã‚Šç›´æ„Ÿçš„ã§å®‰å…¨ãªãƒ‡ãƒ¼ã‚¿æ“ä½œã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚</p>

            <h3>åŸºæœ¬çš„ãªé•ã„ã®æ¯”è¼ƒ</h3>

            <div class="comparison-container">
                <div class="comparison-box">
                    <div class="comparison-title">data.frame</div>
                    <div class="comparison-content">
# å¾“æ¥ã®data.frame
df &lt;- data.frame(
  x = 1:1000,
  y = rnorm(1000)
)

# å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹
print(df)

# æ–‡å­—åˆ—ãŒè‡ªå‹•çš„ã«factorã«å¤‰æ›
data.frame(name = "ç”°ä¸­")
</div>
                </div>
                <div class="comparison-box">
                    <div class="comparison-title">tibble</div>
                    <div class="comparison-content">
# ãƒ¢ãƒ€ãƒ³ãªtibble
tb &lt;- tibble(
  x = 1:1000,
  y = rnorm(1000)
)

# æœ€åˆã®10è¡Œã®ã¿è¡¨ç¤º
print(tb)

# æ–‡å­—åˆ—ã¯ãã®ã¾ã¾æ–‡å­—åˆ—
tibble(name = "ç”°ä¸­")
</div>
                </div>
            </div>

            <div class="code-container">
                <div class="code-header">tibbleã®ä½œæˆã¨åŸºæœ¬æ“ä½œ</div>
                <div class="code-content">
<span class="keyword">library</span>(<span class="string">tibble</span>)
<span class="keyword">library</span>(<span class="string">dplyr</span>)

<span class="comment"># tibbleã®ä½œæˆæ–¹æ³•</span>
<span class="comment"># æ–¹æ³•1: tibble()é–¢æ•°</span>
employee_tibble <span class="operator">&lt;-</span> <span class="function">tibble</span>(
  id <span class="operator">=</span> <span class="number">1</span>:<span class="number">5</span>,
  name <span class="operator">=</span> <span class="function">c</span>(<span class="string">"ç”°ä¸­å¤ªéƒ"</span>, <span class="string">"ä½è—¤èŠ±å­"</span>, <span class="string">"éˆ´æœ¨ä¸€éƒ"</span>, <span class="string">"é«˜æ©‹ç¾å’²"</span>, <span class="string">"å±±ç”°å¥å¤ª"</span>),
  age <span class="operator">=</span> <span class="function">c</span>(<span class="number">28</span>, <span class="number">32</span>, <span class="number">45</span>, <span class="number">25</span>, <span class="number">39</span>),
  salary <span class="operator">=</span> <span class="function">c</span>(<span class="number">450000</span>, <span class="number">520000</span>, <span class="number">780000</span>, <span class="number">380000</span>, <span class="number">650000</span>),
  department <span class="operator">=</span> <span class="function">c</span>(<span class="string">"å–¶æ¥­"</span>, <span class="string">"é–‹ç™º"</span>, <span class="string">"ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ"</span>, <span class="string">"ãƒ‡ã‚¶ã‚¤ãƒ³"</span>, <span class="string">"é–‹ç™º"</span>)
)

<span class="function">print</span>(employee_tibble)

<span class="comment"># æ–¹æ³•2: data.frameã‹ã‚‰ã®å¤‰æ›</span>
df <span class="operator">&lt;-</span> <span class="function">data.frame</span>(
  x <span class="operator">=</span> <span class="number">1</span>:<span class="number">3</span>,
  y <span class="operator">=</span> <span class="function">c</span>(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>),
  stringsAsFactors <span class="operator">=</span> <span class="variable">FALSE</span>
)
tb_converted <span class="operator">&lt;-</span> <span class="function">as_tibble</span>(df)
<span class="function">print</span>(tb_converted)

<span class="comment"># æ–¹æ³•3: tribble()ã§è¡Œå˜ä½ä½œæˆ</span>
small_data <span class="operator">&lt;-</span> <span class="function">tribble</span>(
  ~name,     ~score, ~grade,
  <span class="string">"Alice"</span>,   <span class="number">85</span>,     <span class="string">"A"</span>,
  <span class="string">"Bob"</span>,     <span class="number">72</span>,     <span class="string">"B"</span>,
  <span class="string">"Charlie"</span>, <span class="number">91</span>,     <span class="string">"A"</span>
)
<span class="function">print</span>(small_data)

<span class="comment"># tibbleã®åŸºæœ¬æƒ…å ±</span>
<span class="function">print</span>(<span class="function">paste</span>(<span class="string">"ã‚¯ãƒ©ã‚¹:"</span>, <span class="function">class</span>(employee_tibble)))
<span class="function">print</span>(<span class="function">paste</span>(<span class="string">"è¡Œæ•°:"</span>, <span class="function">nrow</span>(employee_tibble)))
<span class="function">print</span>(<span class="function">paste</span>(<span class="string">"åˆ—æ•°:"</span>, <span class="function">ncol</span>(employee_tibble)))
<span class="function">print</span>(<span class="function">paste</span>(<span class="string">"åˆ—å:"</span>, <span class="function">paste</span>(<span class="function">names</span>(employee_tibble), collapse <span class="operator">=</span> <span class="string">", "</span>)))
</div>
            </div>

            <div class="output-container">
                <div class="output-header">tibbleä½œæˆçµæœ</div>
                <div class="output-content"># A tibble: 5 Ã— 5
     id name       age salary department
  &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;     
1     1 ç”°ä¸­å¤ªéƒ    28 450000 å–¶æ¥­      
2     2 ä½è—¤èŠ±å­    32 520000 é–‹ç™º      
3     3 éˆ´æœ¨ä¸€éƒ    45 780000 ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ
4     4 é«˜æ©‹ç¾å’²    25 380000 ãƒ‡ã‚¶ã‚¤ãƒ³  
5     5 å±±ç”°å¥å¤ª    39 650000 é–‹ç™º      

# A tibble: 3 Ã— 2
      x y    
  &lt;int&gt; &lt;chr&gt;
1     1 a    
2     2 b    
3     3 c    

# A tibble: 3 Ã— 3
  name    score grade
  &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;
1 Alice      85 A    
2 Bob        72 B    
3 Charlie    91 A    

[1] "ã‚¯ãƒ©ã‚¹: tbl_df tbl data.frame"
[1] "è¡Œæ•°: 5"
[1] "åˆ—æ•°: 5"
[1] "åˆ—å: id, name, age, salary, department"</div>
            </div>
        </section>

        <section class="section">
            <h2>ğŸ”§ tibbleã®é«˜åº¦ãªæ©Ÿèƒ½</h2>

            <h3>ãƒªã‚¹ãƒˆåˆ—ã¨ãƒã‚¹ãƒˆã—ãŸãƒ‡ãƒ¼ã‚¿</h3>

            <div class="code-container">
                <div class="code-header">ãƒªã‚¹ãƒˆåˆ—ã®æ´»ç”¨</div>
                <div class="code-content">
<span class="comment"># ãƒªã‚¹ãƒˆåˆ—ã‚’å«ã‚€tibble</span>
nested_data <span class="operator">&lt;-</span> <span class="function">tibble</span>(
  group <span class="operator">=</span> <span class="function">c</span>(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>),
  values <span class="operator">=</span> <span class="function">list</span>(
    <span class="function">c</span>(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>),
    <span class="function">c</span>(<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>),
    <span class="function">c</span>(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>)
  ),
  stats <span class="operator">=</span> <span class="function">list</span>(
    <span class="function">list</span>(mean <span class="operator">=</span> <span class="number">4</span>, sd <span class="operator">=</span> <span class="number">2.58</span>),
    <span class="function">list</span>(mean <span class="operator">=</span> <span class="number">4</span>, sd <span class="operator">=</span> <span class="number">2</span>),
    <span class="function">list</span>(mean <span class="operator">=</span> <span class="number">30</span>, sd <span class="operator">=</span> <span class="number">15.81</span>)
  )
)

<span class="function">print</span>(nested_data)

<span class="comment"># ãƒªã‚¹ãƒˆåˆ—ã‹ã‚‰å€¤ã‚’æŠ½å‡º</span>
<span class="function">print</span>(<span class="string">"ã‚°ãƒ«ãƒ¼ãƒ—Aã®å€¤:"</span>)
<span class="function">print</span>(nested_data$values[[<span class="number">1</span>]])

<span class="comment"># ãƒªã‚¹ãƒˆåˆ—ã®å„è¦ç´ ã«å¯¾ã™ã‚‹æ“ä½œ</span>
nested_with_summary <span class="operator">&lt;-</span> nested_data <span class="operator">%&gt;%</span>
  <span class="function">mutate</span>(
    length <span class="operator">=</span> <span class="function">map_int</span>(values, length),
    sum_values <span class="operator">=</span> <span class="function">map_dbl</span>(values, sum),
    first_value <span class="operator">=</span> <span class="function">map_dbl</span>(values, ~ .x[<span class="number">1</span>]),
    last_value <span class="operator">=</span> <span class="function">map_dbl</span>(values, ~ .x[<span class="function">length</span>(.x)])
  )

<span class="function">print</span>(nested_with_summary)

<span class="comment"># ãƒã‚¹ãƒˆã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ </span>
sales_by_region <span class="operator">&lt;-</span> <span class="function">tibble</span>(
  region <span class="operator">=</span> <span class="function">c</span>(<span class="string">"é–¢æ±"</span>, <span class="string">"é–¢è¥¿"</span>, <span class="string">"ä¹å·"</span>),
  data <span class="operator">=</span> <span class="function">list</span>(
    <span class="function">tibble</span>(month <span class="operator">=</span> <span class="number">1</span>:<span class="number">3</span>, sales <span class="operator">=</span> <span class="function">c</span>(<span class="number">100</span>, <span class="number">120</span>, <span class="number">110</span>)),
    <span class="function">tibble</span>(month <span class="operator">=</span> <span class="number">1</span>:<span class="number">3</span>, sales <span class="operator">=</span> <span class="function">c</span>(<span class="number">80</span>, <span class="number">95</span>, <span class="number">88</span>)),
    <span class="function">tibble</span>(month <span class="operator">=</span> <span class="number">1</span>:<span class="number">3</span>, sales <span class="operator">=</span> <span class="function">c</span>(<span class="number">60</span>, <span class="number">70</span>, <span class="number">65</span>))
  )
)

<span class="function">print</span>(sales_by_region)

<span class="comment"># ãƒã‚¹ãƒˆã—ãŸãƒ‡ãƒ¼ã‚¿ã®é›†è¨ˆ</span>
region_summary <span class="operator">&lt;-</span> sales_by_region <span class="operator">%&gt;%</span>
  <span class="function">mutate</span>(
    total_sales <span class="operator">=</span> <span class="function">map_dbl</span>(data, ~ <span class="function">sum</span>(.x$sales)),
    avg_sales <span class="operator">=</span> <span class="function">map_dbl</span>(data, ~ <span class="function">mean</span>(.x$sales)),
    growth_rate <span class="operator">=</span> <span class="function">map_dbl</span>(data, ~ {
      sales <span class="operator">&lt;-</span> .x$sales
      (sales[<span class="function">length</span>(sales)] - sales[<span class="number">1</span>]) / sales[<span class="number">1</span>] <span class="operator">*</span> <span class="number">100</span>
    })
  )

<span class="function">print</span>(region_summary)
</div>
            </div>

            <div class="output-container">
                <div class="output-header">ãƒªã‚¹ãƒˆåˆ—æ“ä½œçµæœ</div>
                <div class="output-content"># A tibble: 3 Ã— 3
  group values    stats   
  &lt;chr&gt; &lt;list&gt;    &lt;list&gt;  
1 A     &lt;dbl [4]&gt; &lt;list [2]&gt;
2 B     &lt;dbl [3]&gt; &lt;list [2]&gt;
3 C     &lt;dbl [5]&gt; &lt;list [2]&gt;

[1] "ã‚°ãƒ«ãƒ¼ãƒ—Aã®å€¤:"
[1] 1 3 5 7

# A tibble: 3 Ã— 7
  group values    stats     length sum_values first_value last_value
  &lt;chr&gt; &lt;list&gt;    &lt;list&gt;     &lt;int&gt;      &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt;
1 A     &lt;dbl [4]&gt; &lt;list [2]&gt;      4         16           1          7
2 B     &lt;dbl [3]&gt; &lt;list [2]&gt;      3         12           2          6
3 C     &lt;dbl [5]&gt; &lt;list [2]&gt;      5        150          10         50

# A tibble: 3 Ã— 2
  region data            
  &lt;chr&gt;  &lt;list&gt;          
1 é–¢æ±   &lt;tibble [3 Ã— 2]&gt;
2 é–¢è¥¿   &lt;tibble [3 Ã— 2]&gt;
3 ä¹å·   &lt;tibble [3 Ã— 2]&gt;

# A tibble: 3 Ã— 5
  region data             total_sales avg_sales growth_rate
  &lt;chr&gt;  &lt;list&gt;                 &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;
1 é–¢æ±   &lt;tibble [3 Ã— 2]&gt;        330      110          10
2 é–¢è¥¿   &lt;tibble [3 Ã— 2]&gt;        263       87.7        10
3 ä¹å·   &lt;tibble [3 Ã— 2]&gt;        195       65           8.33</div>
            </div>

            <h3>åˆ—ã®è¿½åŠ ãƒ»å‰Šé™¤ãƒ»å¤‰æ›´</h3>

            <div class="code-container">
                <div class="code-header">å‹•çš„ãªåˆ—æ“ä½œ</div>
                <div class="code-content">
<span class="comment"># åˆ—ã®å‹•çš„è¿½åŠ </span>
employee_expanded <span class="operator">&lt;-</span> employee_tibble <span class="operator">%&gt;%</span>
  <span class="function">add_column</span>(
    bonus <span class="operator">=</span> salary <span class="operator">*</span> <span class="number">0.1</span>,
    hire_year <span class="operator">=</span> <span class="function">c</span>(<span class="number">2020</span>, <span class="number">2019</span>, <span class="number">2015</span>, <span class="number">2021</span>, <span class="number">2017</span>),
    .before <span class="operator">=</span> <span class="string">"department"</span>  <span class="comment"># departmentåˆ—ã®å‰ã«æŒ¿å…¥</span>
  )

<span class="function">print</span>(employee_expanded)

<span class="comment"># è¡Œã®è¿½åŠ </span>
new_employee <span class="operator">&lt;-</span> employee_expanded <span class="operator">%&gt;%</span>
  <span class="function">add_row</span>(
    id <span class="operator">=</span> <span class="number">6</span>,
    name <span class="operator">=</span> <span class="string">"æ—ã•ãã‚‰"</span>,
    age <span class="operator">=</span> <span class="number">29</span>,
    salary <span class="operator">=</span> <span class="number">480000</span>,
    bonus <span class="operator">=</span> <span class="number">48000</span>,
    hire_year <span class="operator">=</span> <span class="number">2022</span>,
    department <span class="operator">=</span> <span class="string">"ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°"</span>
  )

<span class="function">print</span>(new_employee)

<span class="comment"># æ¡ä»¶ä»˜ãåˆ—ã®è¿½åŠ </span>
employee_with_status <span class="operator">&lt;-</span> new_employee <span class="operator">%&gt;%</span>
  <span class="function">mutate</span>(
    experience_years <span class="operator">=</span> <span class="number">2023</span> <span class="operator">-</span> hire_year,
    salary_grade <span class="operator">=</span> <span class="function">case_when</span>(
      salary <span class="operator">&lt;</span> <span class="number">400000</span> ~ <span class="string">"åˆç´š"</span>,
      salary <span class="operator">&lt;</span> <span class="number">600000</span> ~ <span class="string">"ä¸­ç´š"</span>,
      <span class="variable">TRUE</span> ~ <span class="string">"ä¸Šç´š"</span>
    ),
    is_senior <span class="operator">=</span> experience_years <span class="operator">&gt;=</span> <span class="number">5</span>,
    total_compensation <span class="operator">=</span> salary <span class="operator">+</span> bonus
  )

<span class="function">print</span>(employee_with_status)

<span class="comment"># åˆ—ã®é¸æŠã¨ä¸¦ã³æ›¿ãˆ</span>
selected_columns <span class="operator">&lt;-</span> employee_with_status <span class="operator">%&gt;%</span>
  <span class="function">select</span>(name, department, salary_grade, total_compensation, is_senior) <span class="operator">%&gt;%</span>
  <span class="function">arrange</span>(<span class="function">desc</span>(total_compensation))

<span class="function">print</span>(selected_columns)
</div>
            </div>

            <div class="output-container">
                <div class="output-header">åˆ—æ“ä½œçµæœ</div>
                <div class="output-content"># A tibble: 5 Ã— 7
     id name      age salary  bonus hire_year department  
  &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;       
1     1 ç”°ä¸­å¤ªéƒ   28 450000  45000      2020 å–¶æ¥­        
2     2 ä½è—¤èŠ±å­   32 520000  52000      2019 é–‹ç™º        
3     3 éˆ´æœ¨ä¸€éƒ   45 780000  78000      2015 ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ
4     4 é«˜æ©‹ç¾å’²   25 380000  38000      2021 ãƒ‡ã‚¶ã‚¤ãƒ³    
5     5 å±±ç”°å¥å¤ª   39 650000  65000      2017 é–‹ç™º        

# A tibble: 6 Ã— 11
     id name    age salary  bonus hire_year department experience_years salary_grade is_senior total_compensation
  &lt;int&gt; &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;                 &lt;dbl&gt; &lt;chr&gt;        &lt;lgl&gt;                  &lt;dbl&gt;
1     3 éˆ´æœ¨ä¸€éƒ 45 780000  78000      2015 ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ             8 ä¸Šç´š         TRUE                  858000
2     5 å±±ç”°å¥å¤ª 39 650000  65000      2017 é–‹ç™º                     6 ä¸Šç´š         TRUE                  715000
3     2 ä½è—¤èŠ±å­ 32 520000  52000      2019 é–‹ç™º                     4 ä¸­ç´š         FALSE                 572000
4     6 æ—ã•ãã‚‰ 29 480000  48000      2022 ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°           1 ä¸­ç´š         FALSE                 528000
5     1 ç”°ä¸­å¤ªéƒ 28 450000  45000      2020 å–¶æ¥­                     3 ä¸­ç´š         FALSE                 495000
6     4 é«˜æ©‹ç¾å’² 25 380000  38000      2021 ãƒ‡ã‚¶ã‚¤ãƒ³                 2 åˆç´š         FALSE                 418000</div>
            </div>
        </section>

        <section class="section">
            <h2>âš¡ tibbleã®è¡¨ç¤ºã¨ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½</h2>

            <div class="code-container">
                <div class="code-header">è¡¨ç¤ºã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</div>
                <div class="code-content">
<span class="comment"># å¤§ããªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ä½œæˆ</span>
<span class="function">set.seed</span>(<span class="number">123</span>)
large_tibble <span class="operator">&lt;-</span> <span class="function">tibble</span>(
  id <span class="operator">=</span> <span class="number">1</span>:<span class="number">100</span>,
  category <span class="operator">=</span> <span class="function">sample</span>(<span class="function">c</span>(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="string">"E"</span>), <span class="number">100</span>, replace <span class="operator">=</span> <span class="variable">TRUE</span>),
  value_1 <span class="operator">=</span> <span class="function">rnorm</span>(<span class="number">100</span>, <span class="number">50</span>, <span class="number">10</span>),
  value_2 <span class="operator">=</span> <span class="function">rnorm</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">20</span>),
  value_3 <span class="operator">=</span> <span class="function">rnorm</span>(<span class="number">100</span>, <span class="number">25</span>, <span class="number">5</span>),
  long_text <span class="operator">=</span> <span class="function">paste0</span>(<span class="string">"ã“ã‚Œã¯éå¸¸ã«é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã§ã™"</span>, <span class="number">1</span>:<span class="number">100</span>, <span class="string">"ç•ªç›®ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç¤ºã—ã¦ã„ã¾ã™"</span>),
  date <span class="operator">=</span> <span class="function">sample</span>(<span class="function">seq</span>(<span class="function">as.Date</span>(<span class="string">"2023-01-01"</span>), <span class="function">as.Date</span>(<span class="string">"2023-12-31"</span>), by <span class="operator">=</span> <span class="string">"day"</span>), <span class="number">100</span>)
)

<span class="comment"># ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¡¨ç¤º</span>
<span class="function">print</span>(<span class="string">"ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¡¨ç¤º:"</span>)
<span class="function">print</span>(large_tibble)

<span class="comment"># è¡¨ç¤ºè¡Œæ•°ã‚’å¤‰æ›´</span>
<span class="function">print</span>(<span class="string">"æœ€åˆã®3è¡Œã®ã¿è¡¨ç¤º:"</span>)
<span class="function">print</span>(large_tibble, n <span class="operator">=</span> <span class="number">3</span>)

<span class="comment"># ã™ã¹ã¦ã®åˆ—ã‚’è¡¨ç¤º</span>
<span class="function">print</span>(<span class="string">"å…¨åˆ—è¡¨ç¤º:"</span>)
<span class="function">print</span>(large_tibble, width <span class="operator">=</span> <span class="variable">Inf</span>)

<span class="comment"># glimpse()ã§æ§‹é€ ç¢ºèª</span>
<span class="function">print</span>(<span class="string">"ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®æ¦‚è¦:"</span>)
<span class="function">glimpse</span>(large_tibble)

<span class="comment"># View()é–¢æ•°ã§ã®è©³ç´°ç¢ºèªï¼ˆå®Ÿéš›ã«ã¯RStudioã§ä½¿ç”¨ï¼‰</span>
<span class="comment"># View(large_tibble)</span>

<span class="comment"># ç‰¹å®šã®åˆ—ã®ã‚µãƒ³ãƒ—ãƒ«</span>
<span class="function">print</span>(<span class="string">"ã‚«ãƒ†ã‚´ãƒªåˆ—ã®ã‚µãƒ³ãƒ—ãƒ«:"</span>)
<span class="function">print</span>(<span class="function">head</span>(large_tibble$category, <span class="number">10</span>))

<span class="comment"># ãƒ‡ãƒ¼ã‚¿å‹ã®è©³ç´°ç¢ºèª</span>
<span class="function">print</span>(<span class="string">"åˆ—ã®å‹æƒ…å ±:"</span>)
<span class="function">print</span>(<span class="function">map_chr</span>(large_tibble, class))

<span class="comment"># æ¬ æå€¤ã®ç¢ºèª</span>
<span class="comment"># ä¸€éƒ¨ã®ãƒ‡ãƒ¼ã‚¿ã«NAã‚’æŒ¿å…¥</span>
large_tibble_with_na <span class="operator">&lt;-</span> large_tibble <span class="operator">%&gt;%</span>
  <span class="function">mutate</span>(
    value_1 <span class="operator">=</span> <span class="function">ifelse</span>(<span class="function">row_number</span>() <span class="operator">%in%</span> <span class="function">c</span>(<span class="number">5</span>, <span class="number">15</span>, <span class="number">25</span>), <span class="variable">NA_real_</span>, value_1),
    category <span class="operator">=</span> <span class="function">ifelse</span>(<span class="function">row_number</span>() <span class="operator">%in%</span> <span class="function">c</span>(<span class="number">10</span>, <span class="number">20</span>), <span class="variable">NA_character_</span>, category)
  )

<span class="comment"># æ¬ æå€¤ã‚µãƒãƒªãƒ¼</span>
na_summary <span class="operator">&lt;-</span> large_tibble_with_na <span class="operator">%&gt;%</span>
  <span class="function">summarise_all</span>(~ <span class="function">sum</span>(<span class="function">is.na</span>(.)))

<span class="function">print</span>(<span class="string">"æ¬ æå€¤ã®æ•°:"</span>)
<span class="function">print</span>(na_summary)
</div>
            </div>

            <div class="output-container">
                <div class="output-header">è¡¨ç¤ºã¨ãƒ‡ãƒãƒƒã‚°çµæœ</div>
                <div class="output-content"># A tibble: 100 Ã— 7
      id category value_1 value_2 value_3 long_text                      date      
   &lt;int&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;                          &lt;date&gt;    
 1     1 A           44.4    87.3    24.4 ã“ã‚Œã¯éå¸¸ã«é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã§ã™1ç•ªâ€¦ 2023-04-25
 2     2 D           47.7    98.2    26.2 ã“ã‚Œã¯éå¸¸ã«é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã§ã™2ç•ªâ€¦ 2023-06-24
 3     3 E           65.6   116.     25.3 ã“ã‚Œã¯éå¸¸ã«é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã§ã™3ç•ªâ€¦ 2023-03-12
 4     4 A           59.1   118.     23.6 ã“ã‚Œã¯éå¸¸ã«é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã§ã™4ç•ªâ€¦ 2023-08-30
 5     5 C           50.3    95.7    19.9 ã“ã‚Œã¯éå¸¸ã«é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã§ã™5ç•ªâ€¦ 2023-04-23
 6     6 B           57.0   101.     27.1 ã“ã‚Œã¯éå¸¸ã«é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã§ã™6ç•ªâ€¦ 2023-02-06
 7     7 E           49.9    99.5    28.4 ã“ã‚Œã¯éå¸¸ã«é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã§ã™7ç•ªâ€¦ 2023-07-12
 8     8 C           72.4   135.     26.9 ã“ã‚Œã¯éå¸¸ã«é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã§ã™8ç•ªâ€¦ 2023-10-18
 9     9 A           44.1    88.6    24.9 ã“ã‚Œã¯éå¸¸ã«é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã§ã™9ç•ªâ€¦ 2023-05-31
10    10 B           48.8   110.     21.7 ã“ã‚Œã¯éå¸¸ã«é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã§ã™10ç•ªâ€¦ 2023-12-22
# â„¹ 90 more rows

æœ€åˆã®3è¡Œã®ã¿è¡¨ç¤º:
# A tibble: 100 Ã— 7
      id category value_1 value_2 value_3 long_text                      date      
   &lt;int&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;                          &lt;date&gt;    
 1     1 A           44.4    87.3    24.4 ã“ã‚Œã¯éå¸¸ã«é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã§ã™1ç•ªâ€¦ 2023-04-25
 2     2 D           47.7    98.2    26.2 ã“ã‚Œã¯éå¸¸ã«é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã§ã™2ç•ªâ€¦ 2023-06-24
 3     3 E           65.6   116.     25.3 ã“ã‚Œã¯éå¸¸ã«é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã§ã™3ç•ªâ€¦ 2023-03-12
# â„¹ 97 more rows

æ¬ æå€¤ã®æ•°:
# A tibble: 1 Ã— 7
     id category value_1 value_2 value_3 long_text  date
  &lt;int&gt;    &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;     &lt;int&gt; &lt;int&gt;
1     0        2       3       0       0         0     0</div>
            </div>
        </section>

        <section class="section">
            <h2>ğŸ“Š tibbleã‚’ä½¿ã£ãŸå®Ÿè·µçš„ãªãƒ‡ãƒ¼ã‚¿åˆ†æ</h2>

            <div class="code-container">
                <div class="code-header">å£²ä¸Šãƒ‡ãƒ¼ã‚¿ã®åŒ…æ‹¬çš„åˆ†æ</div>
                <div class="code-content">
<span class="comment"># è¤‡é›‘ãªå£²ä¸Šãƒ‡ãƒ¼ã‚¿ã®ä½œæˆ</span>
<span class="function">set.seed</span>(<span class="number">456</span>)
sales_analysis <span class="operator">&lt;-</span> <span class="function">tibble</span>(
  transaction_id <span class="operator">=</span> <span class="number">1</span>:<span class="number">1000</span>,
  customer_id <span class="operator">=</span> <span class="function">sample</span>(<span class="number">1</span>:<span class="number">200</span>, <span class="number">1000</span>, replace <span class="operator">=</span> <span class="variable">TRUE</span>),
  product_category <span class="operator">=</span> <span class="function">sample</span>(<span class="function">c</span>(<span class="string">"é›»å­æ©Ÿå™¨"</span>, <span class="string">"è¡£æ–™å“"</span>, <span class="string">"é£Ÿå“"</span>, <span class="string">"æ›¸ç±"</span>, <span class="string">"ã‚¹ãƒãƒ¼ãƒ„ç”¨å“"</span>), 
                                <span class="number">1000</span>, replace <span class="operator">=</span> <span class="variable">TRUE</span>),
  purchase_date <span class="operator">=</span> <span class="function">sample</span>(<span class="function">seq</span>(<span class="function">as.Date</span>(<span class="string">"2023-01-01"</span>), <span class="function">as.Date</span>(<span class="string">"2023-12-31"</span>), by <span class="operator">=</span> <span class="string">"day"</span>), 
                          <span class="number">1000</span>, replace <span class="operator">=</span> <span class="variable">TRUE</span>),
  amount <span class="operator">=</span> <span class="function">round</span>(<span class="function">rlnorm</span>(<span class="number">1000</span>, <span class="function">log</span>(<span class="number">5000</span>), <span class="number">1</span>)),
  payment_method <span class="operator">=</span> <span class="function">sample</span>(<span class="function">c</span>(<span class="string">"ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ"</span>, <span class="string">"ç¾é‡‘"</span>, <span class="string">"é›»å­ãƒãƒãƒ¼"</span>), 
                            <span class="number">1000</span>, replace <span class="operator">=</span> <span class="variable">TRUE</span>, prob <span class="operator">=</span> <span class="function">c</span>(<span class="number">0.6</span>, <span class="number">0.2</span>, <span class="number">0.2</span>)),
  store_location <span class="operator">=</span> <span class="function">sample</span>(<span class="function">c</span>(<span class="string">"æ±äº¬"</span>, <span class="string">"å¤§é˜ª"</span>, <span class="string">"åå¤å±‹"</span>, <span class="string">"ç¦å²¡"</span>), 
                            <span class="number">1000</span>, replace <span class="operator">=</span> <span class="variable">TRUE</span>)
) <span class="operator">%&gt;%</span>
  <span class="function">mutate</span>(
    month <span class="operator">=</span> <span class="function">lubridate::month</span>(purchase_date),
    quarter <span class="operator">=</span> <span class="function">lubridate::quarter</span>(purchase_date),
    day_of_week <span class="operator">=</span> <span class="function">lubridate::wday</span>(purchase_date, label <span class="operator">=</span> <span class="variable">TRUE</span>),
    amount_category <span class="operator">=</span> <span class="function">case_when</span>(
      amount <span class="operator">&lt;</span> <span class="number">2000</span> ~ <span class="string">"å°é¡"</span>,
      amount <span class="operator">&lt;</span> <span class="number">10000</span> ~ <span class="string">"ä¸­é¡"</span>,
      <span class="variable">TRUE</span> ~ <span class="string">"é«˜é¡"</span>
    )
  )

<span class="function">print</span>(<span class="string">"å£²ä¸Šãƒ‡ãƒ¼ã‚¿ã‚µãƒ³ãƒ—ãƒ«:"</span>)
<span class="function">print</span>(<span class="function">head</span>(sales_analysis))

<span class="comment"># é¡§å®¢åˆ¥ã®è³¼è²·ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ</span>
customer_patterns <span class="operator">&lt;-</span> sales_analysis <span class="operator">%&gt;%</span>
  <span class="function">group_by</span>(customer_id) <span class="operator">%&gt;%</span>
  <span class="function">summarise</span>(
    total_purchases <span class="operator">=</span> <span class="function">n</span>(),
    total_amount <span class="operator">=</span> <span class="function">sum</span>(amount),
    avg_amount <span class="operator">=</span> <span class="function">mean</span>(amount),
    favorite_category <span class="operator">=</span> <span class="function">names</span>(<span class="function">sort</span>(<span class="function">table</span>(product_category), decreasing <span class="operator">=</span> <span class="variable">TRUE</span>))[<span class="number">1</span>],
    preferred_payment <span class="operator">=</span> <span class="function">names</span>(<span class="function">sort</span>(<span class="function">table</span>(payment_method), decreasing <span class="operator">=</span> <span class="variable">TRUE</span>))[<span class="number">1</span>],
    first_purchase <span class="operator">=</span> <span class="function">min</span>(purchase_date),
    last_purchase <span class="operator">=</span> <span class="function">max</span>(purchase_date),
    purchase_span_days <span class="operator">=</span> <span class="function">as.numeric</span>(<span class="function">max</span>(purchase_date) <span class="operator">-</span> <span class="function">min</span>(purchase_date)),
    .groups <span class="operator">=</span> <span class="string">'drop'</span>
  ) <span class="operator">%&gt;%</span>
  <span class="function">mutate</span>(
    customer_segment <span class="operator">=</span> <span class="function">case_when</span>(
      total_amount <span class="operator">&gt;</span> <span class="number">50000</span> <span class="operator">&amp;&amp;</span> total_purchases <span class="operator">&gt;</span> <span class="number">10</span> ~ <span class="string">"VIP"</span>,
      total_amount <span class="operator">&gt;</span> <span class="number">20000</span> <span class="operator">||</span> total_purchases <span class="operator">&gt;</span> <span class="number">5</span> ~ <span class="string">"å„ªè‰¯"</span>,
      <span class="variable">TRUE</span> ~ <span class="string">"ä¸€èˆ¬"</span>
    )
  )

<span class="function">print</span>(<span class="string">"é¡§å®¢ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ†æ:"</span>)
<span class="function">print</span>(customer_patterns <span class="operator">%&gt;%</span> <span class="function">count</span>(customer_segment))

<span class="comment"># åœ°åŸŸåˆ¥ãƒ»æ™‚ç³»åˆ—åˆ†æ</span>
regional_monthly <span class="operator">&lt;-</span> sales_analysis <span class="operator">%&gt;%</span>
  <span class="function">group_by</span>(store_location, month) <span class="operator">%&gt;%</span>
  <span class="function">summarise</span>(
    transactions <span class="operator">=</span> <span class="function">n</span>(),
    total_sales <span class="operator">=</span> <span class="function">sum</span>(amount),
    avg_transaction <span class="operator">=</span> <span class="function">mean</span>(amount),
    unique_customers <span class="operator">=</span> <span class="function">n_distinct</span>(customer_id),
    .groups <span class="operator">=</span> <span class="string">'drop'</span>
  ) <span class="operator">%&gt;%</span>
  <span class="function">arrange</span>(store_location, month)

<span class="function">print</span>(<span class="string">"åœ°åŸŸåˆ¥æœˆæ¬¡å£²ä¸Šï¼ˆä¸Šä½10è¡Œï¼‰:"</span>)
<span class="function">print</span>(<span class="function">head</span>(regional_monthly, <span class="number">10</span>))

<span class="comment"># å•†å“ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®æ”¯æ‰•ã„æ–¹æ³•å‚¾å‘</span>
category_payment_analysis <span class="operator">&lt;-</span> sales_analysis <span class="operator">%&gt;%</span>
  <span class="function">group_by</span>(product_category, payment_method) <span class="operator">%&gt;%</span>
  <span class="function">summarise</span>(
    count <span class="operator">=</span> <span class="function">n</span>(),
    avg_amount <span class="operator">=</span> <span class="function">mean</span>(amount),
    .groups <span class="operator">=</span> <span class="string">'drop'</span>
  ) <span class="operator">%&gt;%</span>
  <span class="function">group_by</span>(product_category) <span class="operator">%&gt;%</span>
  <span class="function">mutate</span>(
    percentage <span class="operator">=</span> <span class="function">round</span>(count / <span class="function">sum</span>(count) <span class="operator">*</span> <span class="number">100</span>, <span class="number">1</span>)
  ) <span class="operator">%&gt;%</span>
  <span class="function">arrange</span>(product_category, <span class="function">desc</span>(percentage))

<span class="function">print</span>(<span class="string">"ã‚«ãƒ†ã‚´ãƒªåˆ¥æ”¯æ‰•ã„æ–¹æ³•å‚¾å‘:"</span>)
<span class="function">print</span>(category_payment_analysis)
</div>
            </div>

            <div class="output-container">
                <div class="output-header">å£²ä¸Šåˆ†æçµæœ</div>
                <div class="output-content">å£²ä¸Šãƒ‡ãƒ¼ã‚¿ã‚µãƒ³ãƒ—ãƒ«:
# A tibble: 6 Ã— 11
  transaction_id customer_id product_category purchase_date amount payment_method store_location month quarter day_of_week amount_category
           &lt;int&gt;       &lt;int&gt; &lt;chr&gt;            &lt;date&gt;         &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;          &lt;dbl&gt;   &lt;int&gt; &lt;ord&gt;       &lt;chr&gt;          
1              1          68 é›»å­æ©Ÿå™¨         2023-09-04      3676 ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ     æ±äº¬               9       3 Mon         ä¸­é¡           
2              2         177 æ›¸ç±             2023-11-15      1547 ç¾é‡‘           åå¤å±‹             11       4 Wed         å°é¡           
3              3         122 é£Ÿå“             2023-03-15      4048 ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ     ç¦å²¡               3       1 Wed         ä¸­é¡           
4              4         132 ã‚¹ãƒãƒ¼ãƒ„ç”¨å“     2023-07-20      2738 ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ     æ±äº¬               7       3 Thu         ä¸­é¡           
5              5         168 é£Ÿå“             2023-12-25      2156 é›»å­ãƒãƒãƒ¼     å¤§é˜ª              12       4 Mon         ä¸­é¡           
6              6         188 é›»å­æ©Ÿå™¨         2023-11-05      8556 ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ     å¤§é˜ª              11       4 Sun         ä¸­é¡           

é¡§å®¢ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ†æ:
# A tibble: 3 Ã— 2
  customer_segment     n
  &lt;chr&gt;            &lt;int&gt;
1 VIP                 14
2 ä¸€èˆ¬               147
3 å„ªè‰¯                39

åœ°åŸŸåˆ¥æœˆæ¬¡å£²ä¸Šï¼ˆä¸Šä½10è¡Œï¼‰:
# A tibble: 10 Ã— 6
   store_location month transactions total_sales avg_transaction unique_customers
   &lt;chr&gt;          &lt;dbl&gt;        &lt;int&gt;       &lt;dbl&gt;           &lt;dbl&gt;            &lt;int&gt;
 1 å¤§é˜ª               1           19      105732           5565.               18
 2 å¤§é˜ª               2           18       80654           4481.               17
 3 å¤§é˜ª               3           19       81965           4314.               16
 4 å¤§é˜ª               4           22      113256           5148.               18
 5 å¤§é˜ª               5           20      122089           6104.               18</div>
            </div>

            <div class="data-table">
                <table>
                    <thead>
                        <tr>
                            <th>tibbleã®ä¸»è¦é–¢æ•°</th>
                            <th>æ©Ÿèƒ½</th>
                            <th>ä½¿ç”¨ä¾‹</th>
                            <th>å‚™è€ƒ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>tibble()</td>
                            <td>tibbleã®ä½œæˆ</td>
                            <td>tibble(x = 1:3, y = c("a", "b", "c"))</td>
                            <td>åˆ—åŒå£«ã®å‚ç…§å¯èƒ½</td>
                        </tr>
                        <tr>
                            <td>tribble()</td>
                            <td>è¡Œå˜ä½ã§ã®ä½œæˆ</td>
                            <td>tribble(~x, ~y, 1, "a", 2, "b")</td>
                            <td>ç›´æ„Ÿçš„ãªè¡Œå…¥åŠ›</td>
                        </tr>
                        <tr>
                            <td>add_column()</td>
                            <td>åˆ—ã®è¿½åŠ </td>
                            <td>add_column(df, z = 1:3, .before = "y")</td>
                            <td>ä½ç½®æŒ‡å®šå¯èƒ½</td>
                        </tr>
                        <tr>
                            <td>add_row()</td>
                            <td>è¡Œã®è¿½åŠ </td>
                            <td>add_row(df, x = 4, y = "d")</td>
                            <td>ä½ç½®æŒ‡å®šå¯èƒ½</td>
                        </tr>
                        <tr>
                            <td>glimpse()</td>
                            <td>æ§‹é€ ç¢ºèª</td>
                            <td>glimpse(df)</td>
                            <td>strã®æ”¹è‰¯ç‰ˆ</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <div class="key-points">
            <h4>ç¬¬9ç« ã®é‡è¦ãƒã‚¤ãƒ³ãƒˆ</h4>
            <ul>
                <li><strong>ãƒ¢ãƒ€ãƒ³ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ </strong>ï¼šå®‰å…¨ã§ç›´æ„Ÿçš„ãªãƒ‡ãƒ¼ã‚¿æ“ä½œ</li>
                <li><strong>ã‚¹ãƒãƒ¼ãƒˆè¡¨ç¤º</strong>ï¼šå¤§é‡ãƒ‡ãƒ¼ã‚¿ã®è¦‹ã‚„ã™ã„å‡ºåŠ›</li>
                <li><strong>ãƒªã‚¹ãƒˆåˆ—</strong>ï¼šè¤‡é›‘ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®åŠ¹ç‡çš„ç®¡ç†</li>
                <li><strong>å‹å®‰å…¨æ€§</strong>ï¼šäºˆæœŸã—ãªã„å‹å¤‰æ›ã‚’é˜²æ­¢</li>
                <li><strong>ãƒ‡ãƒãƒƒã‚°æ”¯æ´</strong>ï¼šglimpse()ç­‰ã®å¼·åŠ›ãªåˆ†æãƒ„ãƒ¼ãƒ«</li>
                <li><strong>Tidyverseçµ±åˆ</strong>ï¼šä»–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹é€£æº</li>
            </ul>
        </div>

        <div class="tip-box">
            <h4>å®Ÿè·µçš„ã‚¢ãƒ‰ãƒã‚¤ã‚¹</h4>
            <p>tibbleã¯ã€data.frameã®æ”¹è‰¯ç‰ˆã¨ã—ã¦ã€ã‚ˆã‚Šå®‰å…¨ã§äºˆæ¸¬å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿æ“ä½œã‚’æä¾›ã—ã¾ã™ã€‚ç‰¹ã«å¤§è¦æ¨¡ãªãƒ‡ãƒ¼ã‚¿åˆ†æãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€tibbleã®å‹å®‰å…¨æ€§ã¨ã‚¹ãƒãƒ¼ãƒˆè¡¨ç¤ºæ©Ÿèƒ½ãŒé–‹ç™ºåŠ¹ç‡ã‚’å¤§å¹…ã«å‘ä¸Šã•ã›ã¾ã™ã€‚</p>
        </div>

        <nav class="chapter-nav">
            <a href="chapter8-readr-data-import.html" class="nav-button">â† ç¬¬8ç« </a>
            <a href="chapter10-statistics-modeling.html" class="nav-button">ç¬¬10ç«  â†’</a>
        </nav>
    </div>
</body>
</html>