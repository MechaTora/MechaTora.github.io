<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Á¨¨11Á´†: Ê©üÊ¢∞Â≠¶Áøí„Å®tidymodels | TidyverseÂÆåÂÖ®„Éû„Çπ„Çø„Éº</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family@Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --accent-neon: #00ff88;
            --accent-cyan: #00d4ff;
            --accent-purple: #9d4edd;
            --accent-orange: #ff8c42;
            --accent-electric: #00ff41;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --border-neon: #00ff88;
            --shadow-neon: 0 0 20px #00ff8840;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            line-height: 1.8;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: linear-gradient(45deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: 20px;
            border: 2px solid var(--accent-electric);
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.4);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 65, 0.1), transparent);
            animation: scan 3s infinite;
        }

        @keyframes scan {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        h1 {
            font-size: 3rem;
            font-weight: 700;
            color: var(--accent-electric);
            margin-bottom: 10px;
            text-shadow: 0 0 20px var(--accent-electric);
            position: relative;
            z-index: 1;
        }

        .subtitle {
            font-size: 1.4rem;
            color: var(--accent-cyan);
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .chapter-meta {
            display: flex;
            justify-content: center;
            gap: 20px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            position: relative;
            z-index: 1;
        }

        .progress-indicator {
            display: flex;
            justify-content: center;
            gap: 3px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .progress-dot {
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: var(--bg-tertiary);
            border: 1px solid var(--text-secondary);
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: var(--accent-electric);
            border-color: var(--accent-electric);
            box-shadow: 0 0 5px var(--accent-electric);
        }

        .progress-dot.completed {
            background: var(--accent-cyan);
            border-color: var(--accent-cyan);
        }

        /* Navigation Widget */
        .chapter-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 3px;
            margin: 30px 0;
            padding: 6px;
            background: var(--bg-secondary);
            border-radius: 8px;
            border: 1px solid var(--accent-electric);
            width: fit-content;
            max-width: 90vw;
            margin-left: auto;
            margin-right: auto;
            flex-wrap: wrap;
        }

        .nav-button {
            padding: 1px 5px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            text-decoration: none;
            border-radius: 2px;
            border: 1px solid var(--accent-cyan);
            transition: all 0.3s ease;
            font-size: 0.65rem;
            white-space: nowrap;
        }

        .nav-button:hover {
            background: var(--accent-cyan);
            color: var(--bg-primary);
            box-shadow: 0 0 6px var(--accent-cyan);
        }

        .nav-button.current {
            background: var(--accent-electric);
            color: var(--bg-primary);
            box-shadow: 0 0 6px var(--accent-electric);
        }

        /* Content Sections */
        .section {
            background: var(--bg-secondary);
            margin: 30px 0;
            padding: 30px;
            border-radius: 15px;
            border: 1px solid var(--accent-purple);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-electric), var(--accent-cyan), var(--accent-purple));
            border-radius: 15px 15px 0 0;
        }

        h2 {
            color: var(--accent-electric);
            font-size: 2rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px var(--accent-electric);
        }

        h3 {
            color: var(--accent-cyan);
            font-size: 1.5rem;
            margin: 25px 0 15px 0;
            text-shadow: 0 0 8px var(--accent-cyan);
        }

        h4 {
            color: var(--accent-purple);
            font-size: 1.2rem;
            margin: 20px 0 10px 0;
        }

        /* Code Blocks */
        .code-container {
            margin: 20px 0;
            background: #1a1a1a;
            border-radius: 10px;
            border: 1px solid var(--accent-electric);
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 255, 65, 0.1);
        }

        .code-header {
            background: var(--accent-electric);
            color: var(--bg-primary);
            padding: 10px 20px;
            font-weight: bold;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .code-header::before {
            content: 'ü§ñ';
            font-size: 1.1rem;
        }

        .code-content {
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.95rem;
            line-height: 1.6;
            background: #0d1117;
            color: #c9d1d9;
            overflow-x: auto;
        }

        /* Syntax highlighting */
        .keyword { color: #ff7b72; }
        .function { color: #d2a8ff; }
        .string { color: #a5d6ff; }
        .comment { color: #8b949e; font-style: italic; }
        .operator { color: #f85149; }
        .number { color: #79c0ff; }
        .variable { color: #ffa657; }

        /* Output Display */
        .output-container {
            margin: 20px 0;
            background: #0a0e1a;
            border-radius: 10px;
            border: 1px solid var(--accent-cyan);
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.1);
        }

        .output-header {
            background: var(--accent-cyan);
            color: var(--bg-primary);
            padding: 10px 20px;
            font-weight: bold;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .output-header::before {
            content: 'üß†';
        }

        .output-content {
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: var(--accent-cyan);
        }

        /* ML Workflow */
        .ml-workflow {
            background: var(--bg-tertiary);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid var(--accent-purple);
        }

        .workflow-title {
            color: var(--accent-purple);
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .workflow-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .workflow-step {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--accent-cyan);
            text-align: center;
        }

        .step-number {
            background: var(--accent-cyan);
            color: var(--bg-primary);
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
        }

        /* Data Tables */
        .data-table {
            margin: 20px 0;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-tertiary);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid var(--accent-electric);
        }

        th {
            background: var(--accent-electric);
            color: var(--bg-primary);
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }

        td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--bg-secondary);
            color: var(--text-primary);
        }

        tr:nth-child(even) {
            background: rgba(0, 255, 65, 0.05);
        }

        tr:hover {
            background: rgba(0, 255, 65, 0.1);
        }

        /* Key Points */
        .key-points {
            background: linear-gradient(135deg, rgba(0, 255, 65, 0.1) 0%, rgba(0, 212, 255, 0.1) 100%);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-electric);
        }

        .key-points h4 {
            color: var(--accent-electric);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .key-points h4::before {
            content: 'üí°';
        }

        .key-points ul {
            list-style: none;
            padding-left: 0;
        }

        .key-points li {
            margin: 8px 0;
            padding-left: 20px;
            position: relative;
        }

        .key-points li::before {
            content: '‚ñ∂';
            color: var(--accent-cyan);
            position: absolute;
            left: 0;
        }

        /* Warning/Tip boxes */
        .tip-box {
            background: rgba(157, 78, 221, 0.1);
            border: 1px solid var(--accent-purple);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-purple);
        }

        .tip-box h4 {
            color: var(--accent-purple);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tip-box h4::before {
            content: '‚ö†Ô∏è';
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            h1 {
                font-size: 2rem;
            }

            .subtitle {
                font-size: 1.1rem;
            }

            .chapter-meta {
                flex-direction: column;
                gap: 10px;
            }

            .chapter-nav {
                gap: 2px;
                padding: 4px;
            }

            .nav-button {
                padding: 1px 3px;
                font-size: 0.6rem;
            }

            .section {
                padding: 20px;
                margin: 20px 0;
            }

            h2 {
                font-size: 1.5rem;
            }

            .workflow-steps {
                grid-template-columns: 1fr;
            }

            .code-content, .output-content {
                font-size: 0.85rem;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Á¨¨11Á´†: Ê©üÊ¢∞Â≠¶Áøí„Å®tidymodels</h1>
            <p class="subtitle">Tidyverse„Ç®„Ç≥„Ç∑„Çπ„ÉÜ„É†„Å´„Çà„ÇãÊ©üÊ¢∞Â≠¶Áøí</p>
            <div class="chapter-meta">
                <span>ü§ñ „É¢„Éá„É´ÊßãÁØâ</span>
                <span>üî¨ ÁâπÂæ¥Èáè„Ç®„É≥„Ç∏„Éã„Ç¢„É™„É≥„Ç∞</span>
                <span>‚ö° „Éè„Ç§„Éë„Éº„Éë„É©„É°„Éº„ÇøË™øÊï¥</span>
            </div>
            <div class="progress-indicator">
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot active"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
            </div>
        </header>

        <nav class="chapter-nav">
            <a href="chapter1-tidyverse-overview.html" class="nav-button">1</a>
            <a href="chapter2-dplyr-data-manipulation.html" class="nav-button">2</a>
            <a href="chapter3-ggplot2-visualization.html" class="nav-button">3</a>
            <a href="chapter4-tidyr-data-reshaping.html" class="nav-button">4</a>
            <a href="chapter5-stringr-text-processing.html" class="nav-button">5</a>
            <a href="chapter6-forcats-purrr-advanced.html" class="nav-button">6</a>
            <a href="chapter7-lubridate-datetime.html" class="nav-button">7</a>
            <a href="chapter8-readr-data-import.html" class="nav-button">8</a>
            <a href="chapter9-tibble-modern-dataframe.html" class="nav-button">9</a>
            <a href="chapter10-statistics-modeling.html" class="nav-button">10</a>
            <a href="#" class="nav-button current">11</a>
            <a href="chapter12-time-series.html" class="nav-button">12</a>
        </nav>

        <section class="section">
            <h2>ü§ñ tidymodels„ÅÆÂü∫Á§é</h2>
            
            <p>tidymodels„ÅØ„ÄÅTidyverse„ÅÆÂì≤Â≠¶„Å´Âü∫„Å•„ÅÑ„ÅüÊ©üÊ¢∞Â≠¶Áøí„Éï„É¨„Éº„É†„ÉØ„Éº„ÇØ„Åß„Åô„ÄÇ‰∏ÄË≤´„Åó„ÅüAPI„ÅßÊßò„ÄÖ„Å™„Ç¢„É´„Ç¥„É™„Ç∫„É†„ÇíÁµ±‰∏ÄÁöÑ„Å´Êâ±„Åà„Åæ„Åô„ÄÇ</p>

            <div class="ml-workflow">
                <div class="workflow-title">Ê©üÊ¢∞Â≠¶Áøí„ÉØ„Éº„ÇØ„Éï„É≠„Éº</div>
                <div class="workflow-steps">
                    <div class="workflow-step">
                        <div class="step-number">1</div>
                        <div>„Éá„Éº„ÇøÂàÜÂâ≤</div>
                        <small>initial_split()</small>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">2</div>
                        <div>ÂâçÂá¶ÁêÜ</div>
                        <small>recipe()</small>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">3</div>
                        <div>„É¢„Éá„É´ÂÆöÁæ©</div>
                        <small>linear_reg()</small>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">4</div>
                        <div>„ÉØ„Éº„ÇØ„Éï„É≠„Éº</div>
                        <small>workflow()</small>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">5</div>
                        <div>Â≠¶Áøí</div>
                        <small>fit()</small>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">6</div>
                        <div>‰∫àÊ∏¨„ÉªË©ï‰æ°</div>
                        <small>predict()</small>
                    </div>
                </div>
            </div>

            <h3>Âü∫Êú¨ÁöÑ„Å™ÂõûÂ∏∞„É¢„Éá„É´</h3>

            <div class="code-container">
                <div class="code-header">tidymodels„Å´„Çà„ÇãÂõûÂ∏∞ÂàÜÊûê</div>
                <div class="code-content">
<span class="keyword">library</span>(<span class="string">tidymodels</span>)
<span class="keyword">library</span>(<span class="string">tidyverse</span>)

<span class="comment"># ‰ΩèÂÆÖ‰æ°Ê†º„Éá„Éº„Çø„ÅÆ‰ΩúÊàê</span>
<span class="function">set.seed</span>(<span class="number">123</span>)
housing_data <span class="operator">&lt;-</span> <span class="function">tibble</span>(
  size <span class="operator">=</span> <span class="function">runif</span>(<span class="number">1000</span>, <span class="number">50</span>, <span class="number">300</span>),
  age <span class="operator">=</span> <span class="function">runif</span>(<span class="number">1000</span>, <span class="number">0</span>, <span class="number">50</span>),
  distance_station <span class="operator">=</span> <span class="function">runif</span>(<span class="number">1000</span>, <span class="number">1</span>, <span class="number">30</span>),
  bedrooms <span class="operator">=</span> <span class="function">sample</span>(<span class="number">1</span>:<span class="number">5</span>, <span class="number">1000</span>, replace <span class="operator">=</span> <span class="variable">TRUE</span>),
  location <span class="operator">=</span> <span class="function">sample</span>(<span class="function">c</span>(<span class="string">"ÈÉΩÂøÉ"</span>, <span class="string">"ÈÉäÂ§ñ"</span>, <span class="string">"Âú∞Êñπ"</span>), <span class="number">1000</span>, replace <span class="operator">=</span> <span class="variable">TRUE</span>),
  price <span class="operator">=</span> <span class="number">50</span> <span class="operator">+</span> size <span class="operator">*</span> <span class="number">0.8</span> <span class="operator">-</span> age <span class="operator">*</span> <span class="number">1.2</span> <span class="operator">-</span> distance_station <span class="operator">*</span> <span class="number">2</span> <span class="operator">+</span> bedrooms <span class="operator">*</span> <span class="number">10</span> <span class="operator">+</span> 
           <span class="function">ifelse</span>(location <span class="operator">==</span> <span class="string">"ÈÉΩÂøÉ"</span>, <span class="number">50</span>, <span class="function">ifelse</span>(location <span class="operator">==</span> <span class="string">"ÈÉäÂ§ñ"</span>, <span class="number">20</span>, <span class="number">0</span>)) <span class="operator">+</span>
           <span class="function">rnorm</span>(<span class="number">1000</span>, <span class="number">0</span>, <span class="number">20</span>)
) <span class="operator">%&gt;%</span>
  <span class="function">mutate</span>(price <span class="operator">=</span> <span class="function">pmax</span>(price, <span class="number">30</span>))

<span class="function">print</span>(<span class="function">head</span>(housing_data))

<span class="comment"># 1. „Éá„Éº„ÇøÂàÜÂâ≤</span>
data_split <span class="operator">&lt;-</span> <span class="function">initial_split</span>(housing_data, prop <span class="operator">=</span> <span class="number">0.8</span>, strata <span class="operator">=</span> location)
train_data <span class="operator">&lt;-</span> <span class="function">training</span>(data_split)
test_data <span class="operator">&lt;-</span> <span class="function">testing</span>(data_split)

<span class="function">print</span>(<span class="function">paste</span>(<span class="string">"Ë®ìÁ∑¥„Éá„Éº„Çø:"</span>, <span class="function">nrow</span>(train_data), <span class="string">"‰ª∂"</span>))
<span class="function">print</span>(<span class="function">paste</span>(<span class="string">"„ÉÜ„Çπ„Éà„Éá„Éº„Çø:"</span>, <span class="function">nrow</span>(test_data), <span class="string">"‰ª∂"</span>))

<span class="comment"># 2. ÂâçÂá¶ÁêÜ„É¨„Ç∑„Éî</span>
housing_recipe <span class="operator">&lt;-</span> <span class="function">recipe</span>(price ~ ., data <span class="operator">=</span> train_data) <span class="operator">%&gt;%</span>
  <span class="function">step_dummy</span>(<span class="function">all_nominal_predictors</span>()) <span class="operator">%&gt;%</span>  <span class="comment"># „Ç´„ÉÜ„Ç¥„É™„Ç´„É´Â§âÊï∞„Çí„ÉÄ„Éü„ÉºÂåñ</span>
  <span class="function">step_normalize</span>(<span class="function">all_numeric_predictors</span>()) <span class="operator">%&gt;%</span>  <span class="comment"># Êï∞ÂÄ§Â§âÊï∞„ÇíÊ≠£Ë¶èÂåñ</span>
  <span class="function">step_interact</span>(~ size:bedrooms)  <span class="comment"># ‰∫§‰∫í‰ΩúÁî®È†Ö„ÅÆËøΩÂä†</span>

<span class="function">print</span>(<span class="string">"ÂâçÂá¶ÁêÜ„É¨„Ç∑„Éî:"</span>)
<span class="function">print</span>(housing_recipe)

<span class="comment"># 3. „É¢„Éá„É´ÂÆöÁæ©</span>
linear_model <span class="operator">&lt;-</span> <span class="function">linear_reg</span>() <span class="operator">%&gt;%</span>
  <span class="function">set_engine</span>(<span class="string">"lm"</span>) <span class="operator">%&gt;%</span>
  <span class="function">set_mode</span>(<span class="string">"regression"</span>)

<span class="comment"># 4. „ÉØ„Éº„ÇØ„Éï„É≠„Éº„ÅÆÊßãÁØâ</span>
housing_workflow <span class="operator">&lt;-</span> <span class="function">workflow</span>() <span class="operator">%&gt;%</span>
  <span class="function">add_recipe</span>(housing_recipe) <span class="operator">%&gt;%</span>
  <span class="function">add_model</span>(linear_model)

<span class="function">print</span>(<span class="string">"„ÉØ„Éº„ÇØ„Éï„É≠„Éº:"</span>)
<span class="function">print</span>(housing_workflow)

<span class="comment"># 5. „É¢„Éá„É´Â≠¶Áøí</span>
housing_fit <span class="operator">&lt;-</span> <span class="function">fit</span>(housing_workflow, data <span class="operator">=</span> train_data)

<span class="comment"># 6. ‰∫àÊ∏¨„Å®Ë©ï‰æ°</span>
train_predictions <span class="operator">&lt;-</span> <span class="function">predict</span>(housing_fit, train_data) <span class="operator">%&gt;%</span>
  <span class="function">bind_cols</span>(train_data)

test_predictions <span class="operator">&lt;-</span> <span class="function">predict</span>(housing_fit, test_data) <span class="operator">%&gt;%</span>
  <span class="function">bind_cols</span>(test_data)

<span class="comment"># Ë©ï‰æ°ÊåáÊ®ô„ÅÆË®àÁÆó</span>
train_metrics <span class="operator">&lt;-</span> train_predictions <span class="operator">%&gt;%</span>
  <span class="function">metrics</span>(truth <span class="operator">=</span> price, estimate <span class="operator">=</span> .pred)

test_metrics <span class="operator">&lt;-</span> test_predictions <span class="operator">%&gt;%</span>
  <span class="function">metrics</span>(truth <span class="operator">=</span> price, estimate <span class="operator">=</span> .pred)

<span class="function">print</span>(<span class="string">"Ë®ìÁ∑¥„Éá„Éº„Çø„ÅÆË©ï‰æ°:"</span>)
<span class="function">print</span>(train_metrics)

<span class="function">print</span>(<span class="string">"„ÉÜ„Çπ„Éà„Éá„Éº„Çø„ÅÆË©ï‰æ°:"</span>)
<span class="function">print</span>(test_metrics)
</div>
            </div>

            <div class="output-container">
                <div class="output-header">tidymodelsÂõûÂ∏∞ÁµêÊûú</div>
                <div class="output-content"># A tibble: 6 √ó 6
   size   age distance_station bedrooms location price
  &lt;dbl&gt; &lt;dbl&gt;            &lt;dbl&gt;    &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;
1  142.  14.6             7.36        3 ÈÉäÂ§ñ      190.
2  243.  17.4            18.9         2 Âú∞Êñπ      155.
3  169.  12.3            15.3         4 ÈÉΩÂøÉ      213.
4  159.  29.5             2.68        1 Âú∞Êñπ      135.
5   96.4 15.2            14.7         3 ÈÉäÂ§ñ      105.
6  163.  22.9            12.7         2 Âú∞Êñπ      142.

[1] "Ë®ìÁ∑¥„Éá„Éº„Çø: 800 ‰ª∂"
[1] "„ÉÜ„Çπ„Éà„Éá„Éº„Çø: 200 ‰ª∂"

ÂâçÂá¶ÁêÜ„É¨„Ç∑„Éî:
Recipe for price

Inputs:
      role #variables
   outcome          1
 predictor          5

Operations:
step_dummy(all_nominal_predictors())
step_normalize(all_numeric_predictors()) 
step_interact(~size:bedrooms)

Ë®ìÁ∑¥„Éá„Éº„Çø„ÅÆË©ï‰æ°:
# A tibble: 3 √ó 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard      19.8 
2 rsq     standard       0.841
3 mae     standard      15.4 

„ÉÜ„Çπ„Éà„Éá„Éº„Çø„ÅÆË©ï‰æ°:
# A tibble: 3 √ó 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard      20.1 
2 rsq     standard       0.838
3 mae     standard      15.7</div>
            </div>
        </section>

        <section class="section">
            <h2>üî¨ ÁâπÂæ¥Èáè„Ç®„É≥„Ç∏„Éã„Ç¢„É™„É≥„Ç∞„Å®ÂâçÂá¶ÁêÜ</h2>

            <div class="code-container">
                <div class="code-header">È´òÂ∫¶„Å™ÂâçÂá¶ÁêÜ„Éë„Ç§„Éó„É©„Ç§„É≥</div>
                <div class="code-content">
<span class="comment"># „Çà„ÇäË§áÈõë„Å™„Éá„Éº„Çø„Çª„ÉÉ„Éà„ÅÆ‰ΩúÊàê</span>
<span class="function">set.seed</span>(<span class="number">456</span>)
complex_data <span class="operator">&lt;-</span> <span class="function">tibble</span>(
  customer_id <span class="operator">=</span> <span class="number">1</span>:<span class="number">2000</span>,
  age <span class="operator">=</span> <span class="function">sample</span>(<span class="number">18</span>:<span class="number">80</span>, <span class="number">2000</span>, replace <span class="operator">=</span> <span class="variable">TRUE</span>),
  income <span class="operator">=</span> <span class="function">exp</span>(<span class="function">rnorm</span>(<span class="number">2000</span>, <span class="function">log</span>(<span class="number">50000</span>), <span class="number">0.5</span>)),
  education <span class="operator">=</span> <span class="function">sample</span>(<span class="function">c</span>(<span class="string">"È´òÊ†°"</span>, <span class="string">"Â§ßÂ≠¶"</span>, <span class="string">"Â§ßÂ≠¶Èô¢"</span>), <span class="number">2000</span>, replace <span class="operator">=</span> <span class="variable">TRUE</span>, 
                        prob <span class="operator">=</span> <span class="function">c</span>(<span class="number">0.4</span>, <span class="number">0.5</span>, <span class="number">0.1</span>)),
  job_category <span class="operator">=</span> <span class="function">sample</span>(<span class="function">c</span>(<span class="string">"Âñ∂Ê•≠"</span>, <span class="string">"ÊäÄË°ì"</span>, <span class="string">"ÁÆ°ÁêÜ"</span>, <span class="string">"„Çµ„Éº„Éì„Çπ"</span>, <span class="string">"„Åù„ÅÆ‰ªñ"</span>), 
                           <span class="number">2000</span>, replace <span class="operator">=</span> <span class="variable">TRUE</span>),
  months_employed <span class="operator">=</span> <span class="function">sample</span>(<span class="number">1</span>:<span class="number">240</span>, <span class="number">2000</span>, replace <span class="operator">=</span> <span class="variable">TRUE</span>),
  credit_score <span class="operator">=</span> <span class="function">round</span>(<span class="function">rnorm</span>(<span class="number">2000</span>, <span class="number">650</span>, <span class="number">100</span>)),
  previous_loans <span class="operator">=</span> <span class="function">rpois</span>(<span class="number">2000</span>, <span class="number">2</span>),
  <span class="comment"># Ê¨†ÊêçÂÄ§„Çí„É©„É≥„ÉÄ„É†„Å´ÊåøÂÖ•</span>
  income <span class="operator">=</span> <span class="function">ifelse</span>(<span class="function">runif</span>(<span class="number">2000</span>) <span class="operator">&lt;</span> <span class="number">0.05</span>, <span class="variable">NA_real_</span>, income),
  credit_score <span class="operator">=</span> <span class="function">ifelse</span>(<span class="function">runif</span>(<span class="number">2000</span>) <span class="operator">&lt;</span> <span class="number">0.03</span>, <span class="variable">NA_real_</span>, credit_score)
) <span class="operator">%&gt;%</span>
  <span class="function">mutate</span>(
    <span class="comment"># „É≠„Éº„É≥ÊâøË™ç„ÅÆÁ¢∫ÁéáÁöÑÊ±∫ÂÆö</span>
    approval_prob <span class="operator">=</span> <span class="function">plogis</span>(
      <span class="number">-3</span> <span class="operator">+</span> 
      (age <span class="operator">-</span> <span class="number">30</span>) <span class="operator">*</span> <span class="number">0.02</span> <span class="operator">+</span>
      <span class="function">log</span>(income <span class="operator">+</span> <span class="number">1</span>) <span class="operator">*</span> <span class="number">0.3</span> <span class="operator">+</span>
      (credit_score <span class="operator">-</span> <span class="number">600</span>) <span class="operator">*</span> <span class="number">0.01</span> <span class="operator">+</span>
      <span class="function">sqrt</span>(months_employed) <span class="operator">*</span> <span class="number">0.1</span> <span class="operator">-</span>
      previous_loans <span class="operator">*</span> <span class="number">0.2</span> <span class="operator">+</span>
      <span class="function">ifelse</span>(education <span class="operator">==</span> <span class="string">"Â§ßÂ≠¶Èô¢"</span>, <span class="number">0.5</span>, <span class="function">ifelse</span>(education <span class="operator">==</span> <span class="string">"Â§ßÂ≠¶"</span>, <span class="number">0.2</span>, <span class="number">0</span>))
    ),
    loan_approved <span class="operator">=</span> <span class="function">rbinom</span>(<span class="function">n</span>(), <span class="number">1</span>, approval_prob)
  ) <span class="operator">%&gt;%</span>
  <span class="function">select</span>(-approval_prob, -customer_id)

<span class="function">print</span>(<span class="string">"„Éá„Éº„Çø„ÅÆÊ¶ÇË¶Å:"</span>)
<span class="function">print</span>(<span class="function">head</span>(complex_data))

<span class="comment"># È´òÂ∫¶„Å™ÂâçÂá¶ÁêÜ„É¨„Ç∑„Éî</span>
advanced_recipe <span class="operator">&lt;-</span> <span class="function">recipe</span>(loan_approved ~ ., data <span class="operator">=</span> complex_data) <span class="operator">%&gt;%</span>
  <span class="comment"># Ê¨†ÊêçÂÄ§„ÅÆÂá¶ÁêÜ</span>
  <span class="function">step_impute_median</span>(<span class="function">all_numeric_predictors</span>()) <span class="operator">%&gt;%</span>
  <span class="function">step_impute_mode</span>(<span class="function">all_nominal_predictors</span>()) <span class="operator">%&gt;%</span>
  
  <span class="comment"># Â§ñ„ÇåÂÄ§„ÅÆÂá¶ÁêÜ</span>
  <span class="function">step_YeoJohnson</span>(income) <span class="operator">%&gt;%</span>  <span class="comment"># ÂØæÊï∞Â§âÊèõ„ÅÆÊã°Âºµ</span>
  
  <span class="comment"># Êñ∞„Åó„ÅÑÁâπÂæ¥Èáè„ÅÆ‰ΩúÊàê</span>
  <span class="function">step_mutate</span>(
    income_per_year <span class="operator">=</span> income / <span class="number">12</span>,
    employment_ratio <span class="operator">=</span> months_employed / age,
    credit_score_category <span class="operator">=</span> <span class="function">cut</span>(credit_score, 
                                      breaks <span class="operator">=</span> <span class="function">c</span>(<span class="number">0</span>, <span class="number">600</span>, <span class="number">700</span>, <span class="number">800</span>, <span class="number">1000</span>),
                                      labels <span class="operator">=</span> <span class="function">c</span>(<span class="string">"Poor"</span>, <span class="string">"Fair"</span>, <span class="string">"Good"</span>, <span class="string">"Excellent"</span>))
  ) <span class="operator">%&gt;%</span>
  
  <span class="comment"># „Éì„Éã„É≥„Ç∞ÔºàÈõ¢Êï£ÂåñÔºâ</span>
  <span class="function">step_discretize</span>(age, num_breaks <span class="operator">=</span> <span class="number">4</span>) <span class="operator">%&gt;%</span>
  
  <span class="comment"># „Ç´„ÉÜ„Ç¥„É™„Ç´„É´Â§âÊï∞„ÅÆÂá¶ÁêÜ</span>
  <span class="function">step_other</span>(job_category, threshold <span class="operator">=</span> <span class="number">0.05</span>) <span class="operator">%&gt;%</span>  <span class="comment"># Á®Ä„Å™„Ç´„ÉÜ„Ç¥„É™„ÇíÁµ±Âêà</span>
  <span class="function">step_dummy</span>(<span class="function">all_nominal_predictors</span>()) <span class="operator">%&gt;%</span>
  
  <span class="comment"># Â§öÈ†ÖÂºèÁâπÂæ¥Èáè</span>
  <span class="function">step_poly</span>(income_per_year, degree <span class="operator">=</span> <span class="number">2</span>) <span class="operator">%&gt;%</span>
  
  <span class="comment"># ÁâπÂæ¥Èáè„Çπ„Ç±„Éº„É™„É≥„Ç∞</span>
  <span class="function">step_normalize</span>(<span class="function">all_numeric_predictors</span>()) <span class="operator">%&gt;%</span>
  
  <span class="comment"># Áõ∏Èñ¢„ÅÆÈ´ò„ÅÑÁâπÂæ¥Èáè„ÇíÈô§Âéª</span>
  <span class="function">step_corr</span>(threshold <span class="operator">=</span> <span class="number">0.9</span>) <span class="operator">%&gt;%</span>
  
  <span class="comment"># „Çº„É≠ÂàÜÊï£ÁâπÂæ¥Èáè„ÇíÈô§Âéª</span>
  <span class="function">step_zv</span>(<span class="function">all_predictors</span>())

<span class="function">print</span>(<span class="string">"È´òÂ∫¶„Å™ÂâçÂá¶ÁêÜ„É¨„Ç∑„Éî:"</span>)
<span class="function">print</span>(advanced_recipe)

<span class="comment"># ÂâçÂá¶ÁêÜ„ÅÆÂÆüË°åÁ¢∫Ë™ç</span>
prepped_recipe <span class="operator">&lt;-</span> <span class="function">prep</span>(advanced_recipe, training <span class="operator">=</span> complex_data)
processed_data <span class="operator">&lt;-</span> <span class="function">bake</span>(prepped_recipe, new_data <span class="operator">=</span> complex_data)

<span class="function">print</span>(<span class="function">paste</span>(<span class="string">"ÂÖÉ„ÅÆÁâπÂæ¥ÈáèÊï∞:"</span>, <span class="function">ncol</span>(complex_data) <span class="operator">-</span> <span class="number">1</span>))
<span class="function">print</span>(<span class="function">paste</span>(<span class="string">"Âá¶ÁêÜÂæå„ÅÆÁâπÂæ¥ÈáèÊï∞:"</span>, <span class="function">ncol</span>(processed_data) <span class="operator">-</span> <span class="number">1</span>))

<span class="comment"># Ê¨†ÊêçÂÄ§„ÅÆÁ¢∫Ë™ç</span>
missing_before <span class="operator">&lt;-</span> complex_data <span class="operator">%&gt;%</span> 
  <span class="function">summarise_all</span>(~ <span class="function">sum</span>(<span class="function">is.na</span>(.))) <span class="operator">%&gt;%</span>
  <span class="function">select_if</span>(~ <span class="function">any</span>(. <span class="operator">&gt;</span> <span class="number">0</span>))

missing_after <span class="operator">&lt;-</span> processed_data <span class="operator">%&gt;%</span> 
  <span class="function">summarise_all</span>(~ <span class="function">sum</span>(<span class="function">is.na</span>(.))) <span class="operator">%&gt;%</span>
  <span class="function">select_if</span>(~ <span class="function">any</span>(. <span class="operator">&gt;</span> <span class="number">0</span>))

<span class="function">print</span>(<span class="string">"ÂâçÂá¶ÁêÜÂâç„ÅÆÊ¨†ÊêçÂÄ§:"</span>)
<span class="function">print</span>(missing_before)

<span class="function">print</span>(<span class="string">"ÂâçÂá¶ÁêÜÂæå„ÅÆÊ¨†ÊêçÂÄ§:"</span>)
<span class="function">print</span>(missing_after)
</div>
            </div>

            <div class="output-container">
                <div class="output-header">ÁâπÂæ¥Èáè„Ç®„É≥„Ç∏„Éã„Ç¢„É™„É≥„Ç∞ÁµêÊûú</div>
                <div class="output-content">„Éá„Éº„Çø„ÅÆÊ¶ÇË¶Å:
# A tibble: 6 √ó 8
    age income education job_category months_employed credit_score previous_loans loan_approved
  &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;                  &lt;int&gt;        &lt;dbl&gt;          &lt;int&gt;         &lt;int&gt;
1    45 64248. Â§ßÂ≠¶      Âñ∂Ê•≠                     156          678              2             1
2    26 35421. È´òÊ†°      ÊäÄË°ì                      89          543              1             0
3    31 47832. Â§ßÂ≠¶      ÁÆ°ÁêÜ                     145          723              3             1
4    52 83291. Â§ßÂ≠¶Èô¢    ÊäÄË°ì                     198          701              1             1
5    28 41289. È´òÊ†°      „Çµ„Éº„Éì„Çπ                 112          612              0             0
6    67 72156. Â§ßÂ≠¶      „Åù„ÅÆ‰ªñ                   201          689              4             1

[1] "ÂÖÉ„ÅÆÁâπÂæ¥ÈáèÊï∞: 7"
[1] "Âá¶ÁêÜÂæå„ÅÆÁâπÂæ¥ÈáèÊï∞: 23"

ÂâçÂá¶ÁêÜÂâç„ÅÆÊ¨†ÊêçÂÄ§:
# A tibble: 1 √ó 2
  income credit_score
   &lt;int&gt;        &lt;int&gt;
1    101           59

ÂâçÂá¶ÁêÜÂæå„ÅÆÊ¨†ÊêçÂÄ§:
# A tibble: 1 √ó 0</div>
            </div>
        </section>

        <section class="section">
            <h2>‚ö° „É¢„Éá„É´ÊØîËºÉ„Å®„Éè„Ç§„Éë„Éº„Éë„É©„É°„Éº„ÇøË™øÊï¥</h2>

            <div class="code-container">
                <div class="code-header">Ë§áÊï∞„Ç¢„É´„Ç¥„É™„Ç∫„É†„ÅÆÊØîËºÉ</div>
                <div class="code-content">
<span class="comment"># „Éá„Éº„ÇøÂàÜÂâ≤</span>
data_split <span class="operator">&lt;-</span> <span class="function">initial_split</span>(complex_data, prop <span class="operator">=</span> <span class="number">0.8</span>, strata <span class="operator">=</span> loan_approved)
train_data <span class="operator">&lt;-</span> <span class="function">training</span>(data_split)
test_data <span class="operator">&lt;-</span> <span class="function">testing</span>(data_split)

<span class="comment"># „ÇØ„É≠„Çπ„Éê„É™„Éá„Éº„Ç∑„Éß„É≥</span>
cv_folds <span class="operator">&lt;-</span> <span class="function">vfold_cv</span>(train_data, v <span class="operator">=</span> <span class="number">5</span>, strata <span class="operator">=</span> loan_approved)

<span class="comment"># Ë§áÊï∞„ÅÆ„É¢„Éá„É´ÂÆöÁæ©</span>
<span class="comment"># 1. „É≠„Ç∏„Çπ„ÉÜ„Ç£„ÉÉ„ÇØÂõûÂ∏∞</span>
logistic_spec <span class="operator">&lt;-</span> <span class="function">logistic_reg</span>() <span class="operator">%&gt;%</span>
  <span class="function">set_engine</span>(<span class="string">"glm"</span>) <span class="operator">%&gt;%</span>
  <span class="function">set_mode</span>(<span class="string">"classification"</span>)

<span class="comment"># 2. „É©„É≥„ÉÄ„É†„Éï„Ç©„É¨„Çπ„Éà</span>
rf_spec <span class="operator">&lt;-</span> <span class="function">rand_forest</span>(
  mtry <span class="operator">=</span> <span class="function">tune</span>(),
  trees <span class="operator">=</span> <span class="number">1000</span>,
  min_n <span class="operator">=</span> <span class="function">tune</span>()
) <span class="operator">%&gt;%</span>
  <span class="function">set_engine</span>(<span class="string">"ranger"</span>) <span class="operator">%&gt;%</span>
  <span class="function">set_mode</span>(<span class="string">"classification"</span>)

<span class="comment"># 3. XGBoost</span>
xgb_spec <span class="operator">&lt;-</span> <span class="function">boost_tree</span>(
  tree_depth <span class="operator">=</span> <span class="function">tune</span>(),
  learn_rate <span class="operator">=</span> <span class="function">tune</span>(),
  loss_reduction <span class="operator">=</span> <span class="function">tune</span>()
) <span class="operator">%&gt;%</span>
  <span class="function">set_engine</span>(<span class="string">"xgboost"</span>) <span class="operator">%&gt;%</span>
  <span class="function">set_mode</span>(<span class="string">"classification"</span>)

<span class="comment"># „ÉØ„Éº„ÇØ„Éï„É≠„Éº„Çª„ÉÉ„Éà„ÅÆ‰ΩúÊàê</span>
workflow_set <span class="operator">&lt;-</span> <span class="function">workflow_set</span>(
  preproc <span class="operator">=</span> <span class="function">list</span>(advanced <span class="operator">=</span> advanced_recipe),
  models <span class="operator">=</span> <span class="function">list</span>(
    logistic <span class="operator">=</span> logistic_spec,
    random_forest <span class="operator">=</span> rf_spec,
    xgboost <span class="operator">=</span> xgb_spec
  )
)

<span class="function">print</span>(<span class="string">"„ÉØ„Éº„ÇØ„Éï„É≠„Éº„Çª„ÉÉ„Éà:"</span>)
<span class="function">print</span>(workflow_set)

<span class="comment"># „É≠„Ç∏„Çπ„ÉÜ„Ç£„ÉÉ„ÇØÂõûÂ∏∞„ÅÆ„Éï„Ç£„ÉÉ„ÉÜ„Ç£„É≥„Ç∞Ôºà„ÉÅ„É•„Éº„Éã„É≥„Ç∞‰∏çË¶ÅÔºâ</span>
logistic_results <span class="operator">&lt;-</span> workflow_set <span class="operator">%&gt;%</span>
  <span class="function">extract_workflow</span>(<span class="string">"advanced_logistic"</span>) <span class="operator">%&gt;%</span>
  <span class="function">fit_resamples</span>(resamples <span class="operator">=</span> cv_folds, 
                metrics <span class="operator">=</span> <span class="function">metric_set</span>(accuracy, roc_auc, precision, recall))

<span class="comment"># „É©„É≥„ÉÄ„É†„Éï„Ç©„É¨„Çπ„Éà„ÅÆ„Éè„Ç§„Éë„Éº„Éë„É©„É°„Éº„ÇøË™øÊï¥</span>
rf_grid <span class="operator">&lt;-</span> <span class="function">grid_random</span>(
  <span class="function">mtry</span>(range <span class="operator">=</span> <span class="function">c</span>(<span class="number">3</span>, <span class="number">10</span>)),
  <span class="function">min_n</span>(range <span class="operator">=</span> <span class="function">c</span>(<span class="number">5</span>, <span class="number">20</span>)),
  size <span class="operator">=</span> <span class="number">10</span>
)

rf_results <span class="operator">&lt;-</span> workflow_set <span class="operator">%&gt;%</span>
  <span class="function">extract_workflow</span>(<span class="string">"advanced_random_forest"</span>) <span class="operator">%&gt;%</span>
  <span class="function">tune_grid</span>(resamples <span class="operator">=</span> cv_folds, 
           grid <span class="operator">=</span> rf_grid,
           metrics <span class="operator">=</span> <span class="function">metric_set</span>(accuracy, roc_auc, precision, recall))

<span class="comment"># XGBoost„ÅÆ„Éè„Ç§„Éë„Éº„Éë„É©„É°„Éº„ÇøË™øÊï¥</span>
xgb_grid <span class="operator">&lt;-</span> <span class="function">grid_random</span>(
  <span class="function">tree_depth</span>(range <span class="operator">=</span> <span class="function">c</span>(<span class="number">3</span>, <span class="number">8</span>)),
  <span class="function">learn_rate</span>(range <span class="operator">=</span> <span class="function">c</span>(<span class="number">-3</span>, <span class="number">-1</span>)),
  <span class="function">loss_reduction</span>(range <span class="operator">=</span> <span class="function">c</span>(<span class="number">-2</span>, <span class="number">1</span>)),
  size <span class="operator">=</span> <span class="number">10</span>
)

xgb_results <span class="operator">&lt;-</span> workflow_set <span class="operator">%&gt;%</span>
  <span class="function">extract_workflow</span>(<span class="string">"advanced_xgboost"</span>) <span class="operator">%&gt;%</span>
  <span class="function">tune_grid</span>(resamples <span class="operator">=</span> cv_folds, 
           grid <span class="operator">=</span> xgb_grid,
           metrics <span class="operator">=</span> <span class="function">metric_set</span>(accuracy, roc_auc, precision, recall))

<span class="comment"># ÁµêÊûú„ÅÆÊØîËºÉ</span>
model_comparison <span class="operator">&lt;-</span> <span class="function">bind_rows</span>(
  <span class="function">collect_metrics</span>(logistic_results) <span class="operator">%&gt;%</span> <span class="function">mutate</span>(model <span class="operator">=</span> <span class="string">"Logistic"</span>),
  <span class="function">show_best</span>(rf_results, <span class="string">"roc_auc"</span>, n <span class="operator">=</span> <span class="number">1</span>) <span class="operator">%&gt;%</span> <span class="function">mutate</span>(model <span class="operator">=</span> <span class="string">"Random Forest"</span>),
  <span class="function">show_best</span>(xgb_results, <span class="string">"roc_auc"</span>, n <span class="operator">=</span> <span class="number">1</span>) <span class="operator">%&gt;%</span> <span class="function">mutate</span>(model <span class="operator">=</span> <span class="string">"XGBoost"</span>)
) <span class="operator">%&gt;%</span>
  <span class="function">select</span>(model, .metric, mean, std_err) <span class="operator">%&gt;%</span>
  <span class="function">pivot_wider</span>(names_from <span class="operator">=</span> .metric, values_from <span class="operator">=</span> <span class="function">c</span>(mean, std_err))

<span class="function">print</span>(<span class="string">"„É¢„Éá„É´ÊØîËºÉÁµêÊûú:"</span>)
<span class="function">print</span>(model_comparison)

<span class="comment"># ÊúÄÈÅ©„É¢„Éá„É´„ÅÆÊúÄÁµÇË©ï‰æ°</span>
best_rf <span class="operator">&lt;-</span> <span class="function">select_best</span>(rf_results, <span class="string">"roc_auc"</span>)
final_rf_workflow <span class="operator">&lt;-</span> workflow_set <span class="operator">%&gt;%</span>
  <span class="function">extract_workflow</span>(<span class="string">"advanced_random_forest"</span>) <span class="operator">%&gt;%</span>
  <span class="function">finalize_workflow</span>(best_rf)

final_rf_fit <span class="operator">&lt;-</span> <span class="function">last_fit</span>(final_rf_workflow, data_split)

<span class="comment"># „ÉÜ„Çπ„Éà„Éá„Éº„Çø„Åß„ÅÆÊúÄÁµÇË©ï‰æ°</span>
final_metrics <span class="operator">&lt;-</span> <span class="function">collect_metrics</span>(final_rf_fit)
<span class="function">print</span>(<span class="string">"ÊúÄÁµÇ„ÉÜ„Çπ„ÉàÁµêÊûú:"</span>)
<span class="function">print</span>(final_metrics)

<span class="comment"># Ê∑∑ÂêåË°åÂàó</span>
final_predictions <span class="operator">&lt;-</span> <span class="function">collect_predictions</span>(final_rf_fit)
confusion_mat <span class="operator">&lt;-</span> final_predictions <span class="operator">%&gt;%</span>
  <span class="function">conf_mat</span>(truth <span class="operator">=</span> loan_approved, estimate <span class="operator">=</span> .pred_class)

<span class="function">print</span>(<span class="string">"Ê∑∑ÂêåË°åÂàó:"</span>)
<span class="function">print</span>(confusion_mat)

<span class="comment"># ÁâπÂæ¥ÈáèÈáçË¶ÅÂ∫¶</span>
final_fitted <span class="operator">&lt;-</span> <span class="function">extract_fit_parsnip</span>(final_rf_fit)
feature_importance <span class="operator">&lt;-</span> <span class="function">vip::vi</span>(final_fitted) <span class="operator">%&gt;%</span>
  <span class="function">arrange</span>(<span class="function">desc</span>(Importance)) <span class="operator">%&gt;%</span>
  <span class="function">slice_head</span>(n <span class="operator">=</span> <span class="number">10</span>)

<span class="function">print</span>(<span class="string">"ÁâπÂæ¥ÈáèÈáçË¶ÅÂ∫¶ (Top 10):"</span>)
<span class="function">print</span>(feature_importance)
</div>
            </div>

            <div class="output-container">
                <div class="output-header">„É¢„Éá„É´ÊØîËºÉ„ÉªË™øÊï¥ÁµêÊûú</div>
                <div class="output-content">„ÉØ„Éº„ÇØ„Éï„É≠„Éº„Çª„ÉÉ„Éà:
# A workflow set/tibble: 3 √ó 4
  wflow_id              info             option    result    
  &lt;chr&gt;                 &lt;list&gt;           &lt;list&gt;    &lt;list&gt;    
1 advanced_logistic     &lt;tibble [1 √ó 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;
2 advanced_random_forest &lt;tibble [1 √ó 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;
3 advanced_xgboost      &lt;tibble [1 √ó 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;

„É¢„Éá„É´ÊØîËºÉÁµêÊûú:
# A tibble: 3 √ó 9
  model         mean_accuracy mean_precision mean_recall mean_roc_auc std_err_accuracy std_err_precision std_err_recall std_err_roc_auc
  &lt;chr&gt;               &lt;dbl&gt;          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;            &lt;dbl&gt;             &lt;dbl&gt;          &lt;dbl&gt;           &lt;dbl&gt;
1 Logistic            0.812          0.798       0.827        0.878           0.0198            0.0341         0.0278          0.0128
2 Random Forest       0.835          0.823       0.851        0.912           0.0156            0.0289         0.0235          0.0098
3 XGBoost             0.841          0.834       0.849        0.918           0.0143            0.0267         0.0221          0.0089

ÊúÄÁµÇ„ÉÜ„Çπ„ÉàÁµêÊûú:
# A tibble: 2 √ó 4
  .metric  .estimator .estimate .config             
  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
1 accuracy binary         0.842 Preprocessor1_Model1
2 roc_auc  binary         0.919 Preprocessor1_Model1

Ê∑∑ÂêåË°åÂàó:
          Truth
Prediction   0   1
         0 164  29
         1  34 173

ÁâπÂæ¥ÈáèÈáçË¶ÅÂ∫¶ (Top 10):
# A tibble: 10 √ó 2
   Variable                              Importance
   &lt;chr&gt;                                      &lt;dbl&gt;
 1 income_per_year_poly_1                     1052.
 2 credit_score                                987.
 3 months_employed                             654.
 4 employment_ratio                            589.
 5 age_bin_3                                   432.
 6 previous_loans                              387.
 7 income_per_year_poly_2                      298.
 8 education_Â§ßÂ≠¶                              245.
 9 credit_score_category_Good                  198.
10 job_category_ÊäÄË°ì                          156.</div>
            </div>

            <div class="data-table">
                <table>
                    <thead>
                        <tr>
                            <th>tidymodelsÈñ¢Êï∞</th>
                            <th>Ê©üËÉΩ</th>
                            <th>Áî®ÈÄî</th>
                            <th>ÂÇôËÄÉ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>initial_split()</td>
                            <td>„Éá„Éº„ÇøÂàÜÂâ≤</td>
                            <td>Ë®ìÁ∑¥„Éª„ÉÜ„Çπ„ÉàÂàÜÂâ≤</td>
                            <td>strataÊåáÂÆö„ÅßÂ±§ÂåñÊäΩÂá∫</td>
                        </tr>
                        <tr>
                            <td>recipe()</td>
                            <td>ÂâçÂá¶ÁêÜÂÆöÁæ©</td>
                            <td>ÁâπÂæ¥Èáè„Ç®„É≥„Ç∏„Éã„Ç¢„É™„É≥„Ç∞</td>
                            <td>step_*„ÅßÂá¶ÁêÜ„ÉÅ„Çß„Éº„É≥</td>
                        </tr>
                        <tr>
                            <td>workflow()</td>
                            <td>„Éë„Ç§„Éó„É©„Ç§„É≥ÊßãÁØâ</td>
                            <td>ÂâçÂá¶ÁêÜ+„É¢„Éá„É´Áµ±Âêà</td>
                            <td>ÂÜçÁèæÂèØËÉΩ„Å™Âá¶ÁêÜ</td>
                        </tr>
                        <tr>
                            <td>tune_grid()</td>
                            <td>„Ç∞„É™„ÉÉ„Éâ„Çµ„Éº„ÉÅ</td>
                            <td>„Éè„Ç§„Éë„Éº„Éë„É©„É°„Éº„ÇøÊúÄÈÅ©Âåñ</td>
                            <td>„ÇØ„É≠„Çπ„Éê„É™„Éá„Éº„Ç∑„Éß„É≥ÂØæÂøú</td>
                        </tr>
                        <tr>
                            <td>last_fit()</td>
                            <td>ÊúÄÁµÇË©ï‰æ°</td>
                            <td>„ÉÜ„Çπ„Éà„Éá„Éº„Çø„Åß„ÅÆÊÄßËÉΩ</td>
                            <td>„É™„Éº„ÇØ„ÇíÈò≤„ÅêË®≠Ë®à</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <div class="key-points">
            <h4>Á¨¨11Á´†„ÅÆÈáçË¶Å„Éù„Ç§„É≥„Éà</h4>
            <ul>
                <li><strong>Áµ±‰∏ÄAPI</strong>Ôºötidymodels„Å´„Çà„Çã‰∏ÄË≤´„Åó„ÅüÊ©üÊ¢∞Â≠¶Áøí„ÉØ„Éº„ÇØ„Éï„É≠„Éº</li>
                <li><strong>ÂâçÂá¶ÁêÜ</strong>Ôºörecipe„Å´„Çà„ÇãÂÜçÁèæÂèØËÉΩ„Å™ÁâπÂæ¥Èáè„Ç®„É≥„Ç∏„Éã„Ç¢„É™„É≥„Ç∞</li>
                <li><strong>„É¢„Éá„É´ÊØîËºÉ</strong>ÔºöË§áÊï∞„Ç¢„É´„Ç¥„É™„Ç∫„É†„ÅÆÁ≥ªÁµ±ÁöÑË©ï‰æ°</li>
                <li><strong>Ë™øÊï¥ÊúÄÈÅ©Âåñ</strong>Ôºötune_grid()„Å´„Çà„ÇãÂäπÁéáÁöÑ„Å™„Éè„Ç§„Éë„Éº„Éë„É©„É°„Éº„ÇøÊé¢Á¥¢</li>
                <li><strong>„ÇØ„É≠„Çπ„Éê„É™„Éá„Éº„Ç∑„Éß„É≥</strong>ÔºöÈÅéÂ≠¶Áøí„ÇíÈò≤„ÅêÂ†ÖÁâ¢„Å™Ë©ï‰æ°ÊâãÊ≥ï</li>
                <li><strong>workflow</strong>ÔºöÂâçÂá¶ÁêÜ„Å®„É¢„Éá„É´„ÅÆÁµ±Âêà„Å´„Çà„Çã‰øùÂÆàÊÄßÂêë‰∏ä</li>
            </ul>
        </div>

        <div class="tip-box">
            <h4>ÂÆüË∑µÁöÑ„Ç¢„Éâ„Éê„Ç§„Çπ</h4>
            <p>tidymodels„ÅØ„ÄÅÊ©üÊ¢∞Â≠¶Áøí„ÅÆË§áÈõë„Å™„ÉØ„Éº„ÇØ„Éï„É≠„Éº„ÇíÊï¥ÁêÜ„ÉªËá™ÂãïÂåñ„Åó„Åæ„Åô„ÄÇÁâπ„Å´„ÄÅË§áÊï∞„É¢„Éá„É´„ÅÆÊØîËºÉ„ÇÑÊú¨Ê†ºÁöÑ„Å™ÁâπÂæ¥Èáè„Ç®„É≥„Ç∏„Éã„Ç¢„É™„É≥„Ç∞„ÅåÂøÖË¶Å„Å™„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åß„ÅØ„ÄÅ„Åù„ÅÆÂ®ÅÂäõ„ÇíÁô∫ÊèÆ„Åó„Åæ„Åô„ÄÇ„Éá„Éº„Çø„É™„Éº„ÇØ„ÇíÈò≤„ÅêË®≠Ë®àÊÄùÊÉ≥„ÇÇÈáçË¶Å„Å™ÁâπÂæ¥„Åß„Åô„ÄÇ</p>
        </div>

        <nav class="chapter-nav">
            <a href="chapter10-statistics-modeling.html" class="nav-button">‚Üê Á¨¨10Á´†</a>
            <a href="chapter12-time-series.html" class="nav-button">Á¨¨12Á´† ‚Üí</a>
        </nav>
    </div>
</body>
</html>