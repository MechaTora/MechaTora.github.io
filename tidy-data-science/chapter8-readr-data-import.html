<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Á¨¨8Á´†: readr - „Éá„Éº„ÇøË™≠„ÅøËæº„Åø„Å®„Éë„Éº„Çπ„ÅÆÂÆåÂÖ®„Ç¨„Ç§„Éâ | TidyverseÂÆåÂÖ®„Éû„Çπ„Çø„Éº</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --accent-neon: #00ff88;
            --accent-cyan: #00d4ff;
            --accent-purple: #9d4edd;
            --accent-red: #ff6b6b;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --border-neon: #00ff88;
            --shadow-neon: 0 0 20px #00ff8840;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            line-height: 1.8;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: linear-gradient(45deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: 20px;
            border: 2px solid var(--accent-red);
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.4);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 107, 107, 0.1), transparent);
            animation: scan 3s infinite;
        }

        @keyframes scan {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        h1 {
            font-size: 3rem;
            font-weight: 700;
            color: var(--accent-red);
            margin-bottom: 10px;
            text-shadow: 0 0 20px var(--accent-red);
            position: relative;
            z-index: 1;
        }

        .subtitle {
            font-size: 1.4rem;
            color: var(--accent-cyan);
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .chapter-meta {
            display: flex;
            justify-content: center;
            gap: 20px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            position: relative;
            z-index: 1;
        }

        .progress-indicator {
            display: flex;
            justify-content: center;
            gap: 6px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .progress-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--bg-tertiary);
            border: 2px solid var(--text-secondary);
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: var(--accent-red);
            border-color: var(--accent-red);
            box-shadow: 0 0 10px var(--accent-red);
        }

        .progress-dot.completed {
            background: var(--accent-cyan);
            border-color: var(--accent-cyan);
        }

        /* Navigation Widget */
        .chapter-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            margin: 30px 0;
            padding: 12px;
            background: var(--bg-secondary);
            border-radius: 15px;
            border: 1px solid var(--accent-red);
            width: fit-content;
            max-width: 90vw;
            margin-left: auto;
            margin-right: auto;
            flex-wrap: wrap;
        }

        .nav-button {
            padding: 4px 10px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            text-decoration: none;
            border-radius: 5px;
            border: 1px solid var(--accent-cyan);
            transition: all 0.3s ease;
            font-size: 0.8rem;
            white-space: nowrap;
        }

        .nav-button:hover {
            background: var(--accent-cyan);
            color: var(--bg-primary);
            box-shadow: 0 0 15px var(--accent-cyan);
            transform: translateY(-2px);
        }

        .nav-button.current {
            background: var(--accent-red);
            color: var(--bg-primary);
            box-shadow: 0 0 15px var(--accent-red);
        }

        /* Content Sections */
        .section {
            background: var(--bg-secondary);
            margin: 30px 0;
            padding: 30px;
            border-radius: 15px;
            border: 1px solid var(--accent-purple);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-red), var(--accent-cyan), var(--accent-purple));
            border-radius: 15px 15px 0 0;
        }

        h2 {
            color: var(--accent-red);
            font-size: 2rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px var(--accent-red);
        }

        h3 {
            color: var(--accent-cyan);
            font-size: 1.5rem;
            margin: 25px 0 15px 0;
            text-shadow: 0 0 8px var(--accent-cyan);
        }

        h4 {
            color: var(--accent-purple);
            font-size: 1.2rem;
            margin: 20px 0 10px 0;
        }

        /* Code Blocks */
        .code-container {
            margin: 20px 0;
            background: #1a1a1a;
            border-radius: 10px;
            border: 1px solid var(--accent-red);
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.1);
        }

        .code-header {
            background: var(--accent-red);
            color: var(--bg-primary);
            padding: 10px 20px;
            font-weight: bold;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .code-header::before {
            content: 'üìÇ';
            font-size: 1.1rem;
        }

        .code-content {
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.95rem;
            line-height: 1.6;
            background: #0d1117;
            color: #c9d1d9;
            overflow-x: auto;
        }

        /* Syntax highlighting */
        .keyword { color: #ff7b72; }
        .function { color: #d2a8ff; }
        .string { color: #a5d6ff; }
        .comment { color: #8b949e; font-style: italic; }
        .operator { color: #f85149; }
        .number { color: #79c0ff; }
        .variable { color: #ffa657; }

        /* Output Display */
        .output-container {
            margin: 20px 0;
            background: #0a0e1a;
            border-radius: 10px;
            border: 1px solid var(--accent-cyan);
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.1);
        }

        .output-header {
            background: var(--accent-cyan);
            color: var(--bg-primary);
            padding: 10px 20px;
            font-weight: bold;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .output-header::before {
            content: 'üíæ';
        }

        .output-content {
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: var(--accent-cyan);
        }

        /* File Format Display */
        .file-format {
            background: var(--bg-tertiary);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            border: 1px solid var(--accent-purple);
        }

        .format-title {
            color: var(--accent-purple);
            font-size: 1.1rem;
            margin-bottom: 10px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .format-title::before {
            content: 'üìÑ';
        }

        .format-example {
            background: var(--bg-primary);
            padding: 10px;
            border-radius: 5px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--text-secondary);
            border: 1px solid var(--accent-purple);
        }

        /* Data Tables */
        .data-table {
            margin: 20px 0;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-tertiary);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid var(--accent-red);
        }

        th {
            background: var(--accent-red);
            color: var(--bg-primary);
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }

        td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--bg-secondary);
            color: var(--text-primary);
        }

        tr:nth-child(even) {
            background: rgba(255, 107, 107, 0.05);
        }

        tr:hover {
            background: rgba(255, 107, 107, 0.1);
        }

        /* Key Points */
        .key-points {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.1) 0%, rgba(0, 212, 255, 0.1) 100%);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-red);
        }

        .key-points h4 {
            color: var(--accent-red);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .key-points h4::before {
            content: 'üí°';
        }

        .key-points ul {
            list-style: none;
            padding-left: 0;
        }

        .key-points li {
            margin: 8px 0;
            padding-left: 20px;
            position: relative;
        }

        .key-points li::before {
            content: '‚ñ∂';
            color: var(--accent-cyan);
            position: absolute;
            left: 0;
        }

        /* Warning/Tip boxes */
        .tip-box {
            background: rgba(157, 78, 221, 0.1);
            border: 1px solid var(--accent-purple);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--accent-purple);
        }

        .tip-box h4 {
            color: var(--accent-purple);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tip-box h4::before {
            content: '‚ö†Ô∏è';
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            h1 {
                font-size: 2rem;
            }

            .subtitle {
                font-size: 1.1rem;
            }

            .chapter-meta {
                flex-direction: column;
                gap: 10px;
            }

            .chapter-nav {
                gap: 5px;
                padding: 8px;
            }

            .nav-button {
                padding: 3px 7px;
                font-size: 0.7rem;
            }

            .section {
                padding: 20px;
                margin: 20px 0;
            }

            h2 {
                font-size: 1.5rem;
            }

            .code-content, .output-content {
                font-size: 0.85rem;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Á¨¨8Á´†: readr</h1>
            <p class="subtitle">„Éá„Éº„ÇøË™≠„ÅøËæº„Åø„Å®„Éë„Éº„Çπ„ÅÆÂÆåÂÖ®„Ç¨„Ç§„Éâ</p>
            <div class="chapter-meta">
                <span>üìÇ „Éï„Ç°„Ç§„É´Ë™≠„ÅøËæº„Åø</span>
                <span>üîß „Éá„Éº„Çø„Éë„Éº„Çπ</span>
                <span>‚ö° È´òÈÄüÂá¶ÁêÜ</span>
            </div>
            <div class="progress-indicator">
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot completed"></div>
                <div class="progress-dot active"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
                <div class="progress-dot"></div>
            </div>
        </header>

        <nav class="chapter-nav">
            <a href="chapter1-tidyverse-overview.html" class="nav-button">Á¨¨1Á´†</a>
            <a href="chapter2-dplyr-data-manipulation.html" class="nav-button">Á¨¨2Á´†</a>
            <a href="chapter3-ggplot2-visualization.html" class="nav-button">Á¨¨3Á´†</a>
            <a href="chapter4-tidyr-data-reshaping.html" class="nav-button">Á¨¨4Á´†</a>
            <a href="chapter5-stringr-text-processing.html" class="nav-button">Á¨¨5Á´†</a>
            <a href="chapter6-forcats-purrr-advanced.html" class="nav-button">Á¨¨6Á´†</a>
            <a href="chapter7-lubridate-datetime.html" class="nav-button">Á¨¨7Á´†</a>
            <a href="#" class="nav-button current">Á¨¨8Á´†</a>
        </nav>

        <section class="section">
            <h2>üìÇ readr„ÅÆÂü∫Êú¨: CSV„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø</h2>
            
            <p>readr„Éë„ÉÉ„Ç±„Éº„Ç∏„ÅØ„ÄÅTidyverse„ÅÆ„Éá„Éº„ÇøË™≠„ÅøËæº„ÅøÂ∞ÇÁî®„Éë„ÉÉ„Ç±„Éº„Ç∏„Åß„Åô„ÄÇÂæìÊù•„ÅÆbase R„ÅÆÈñ¢Êï∞„Çà„Çä„ÇÇÈ´òÈÄü„Åß„ÄÅÂûãÊé®ÂÆö„ÅåÊ≠£Á¢∫„ÄÅ„Åã„Å§tibble„Å®„Åó„Å¶Ë™≠„ÅøËæº„Åæ„Çå„Åæ„Åô„ÄÇ</p>

            <h3>Âü∫Êú¨ÁöÑ„Å™CSVË™≠„ÅøËæº„Åø</h3>

            <div class="code-container">
                <div class="code-header">read_csv()„ÅÆÂü∫Êú¨‰ΩøÁî®Ê≥ï</div>
                <div class="code-content">
<span class="keyword">library</span>(<span class="string">readr</span>)
<span class="keyword">library</span>(<span class="string">dplyr</span>)

<span class="comment"># „Çµ„É≥„Éó„É´CSV„Éá„Éº„Çø„ÅÆ‰ΩúÊàê</span>
sample_csv_content <span class="operator">&lt;-</span> <span class="string">"name,age,salary,department,hire_date
Áî∞‰∏≠Â§™ÈÉé,28,450000,Âñ∂Ê•≠,2020-04-01
‰ΩêËó§Ëä±Â≠ê,32,520000,ÈñãÁô∫,2019-03-15
Èà¥Êú®‰∏ÄÈÉé,45,780000,„Éû„Éç„Ç∏„É°„É≥„Éà,2015-07-20
È´òÊ©ãÁæéÂí≤,25,380000,„Éá„Ç∂„Ç§„É≥,2021-09-10
Â±±Áî∞ÂÅ•Â§™,39,650000,ÈñãÁô∫,2017-11-05"</span>

<span class="comment"># ÊñáÂ≠óÂàó„Åã„ÇâÁõ¥Êé•Ë™≠„ÅøËæº„Åø</span>
employee_data <span class="operator">&lt;-</span> <span class="function">read_csv</span>(sample_csv_content)
<span class="function">print</span>(employee_data)

<span class="comment"># „Éá„Éº„ÇøÂûã„ÅÆÁ¢∫Ë™ç</span>
<span class="function">str</span>(employee_data)

<span class="comment"># Âàó„ÅÆÂûã„ÇíÊòéÁ§∫ÁöÑ„Å´ÊåáÂÆö</span>
employee_data_typed <span class="operator">&lt;-</span> <span class="function">read_csv</span>(sample_csv_content,
  col_types <span class="operator">=</span> <span class="function">cols</span>(
    name <span class="operator">=</span> <span class="function">col_character</span>(),
    age <span class="operator">=</span> <span class="function">col_integer</span>(),
    salary <span class="operator">=</span> <span class="function">col_double</span>(),
    department <span class="operator">=</span> <span class="function">col_character</span>(),
    hire_date <span class="operator">=</span> <span class="function">col_date</span>()
  )
)

<span class="function">print</span>(<span class="string">"ÂûãÊåáÂÆöÂæå„ÅÆ„Éá„Éº„Çø:"</span>)
<span class="function">str</span>(employee_data_typed)
</div>
            </div>

            <div class="output-container">
                <div class="output-header">CSVË™≠„ÅøËæº„ÅøÁµêÊûú</div>
                <div class="output-content"># A tibble: 5 √ó 5
  name     age salary department hire_date 
  &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;date&gt;    
1 Áî∞‰∏≠Â§™ÈÉé    28 450000 Âñ∂Ê•≠       2020-04-01
2 ‰ΩêËó§Ëä±Â≠ê    32 520000 ÈñãÁô∫       2019-03-15
3 Èà¥Êú®‰∏ÄÈÉé    45 780000 „Éû„Éç„Ç∏„É°„É≥„Éà 2015-07-20
4 È´òÊ©ãÁæéÂí≤    25 380000 „Éá„Ç∂„Ç§„É≥   2021-09-10
5 Â±±Áî∞ÂÅ•Â§™    39 650000 ÈñãÁô∫       2017-11-05

Classes 'spec_tbl_df', 'tbl_df', 'tbl' and 'data.frame':	5 obs. of  5 variables:
 $ name      : chr  "Áî∞‰∏≠Â§™ÈÉé" "‰ΩêËó§Ëä±Â≠ê" "Èà¥Êú®‰∏ÄÈÉé" "È´òÊ©ãÁæéÂí≤" ...
 $ age       : int  28 32 45 25 39
 $ salary    : num  450000 520000 780000 380000 650000
 $ department: chr  "Âñ∂Ê•≠" "ÈñãÁô∫" "„Éû„Éç„Ç∏„É°„É≥„Éà" "„Éá„Ç∂„Ç§„É≥" ...
 $ hire_date : Date, format: "2020-04-01" "2019-03-15" ...</div>
            </div>

            <h3>Êßò„ÄÖ„Å™„Éï„Ç°„Ç§„É´ÂΩ¢Âºè„ÅÆË™≠„ÅøËæº„Åø</h3>

            <div class="file-format">
                <div class="format-title">CSVÔºà„Ç´„É≥„ÉûÂå∫Âàá„ÇäÔºâ</div>
                <div class="format-example">name,age,salary
Áî∞‰∏≠Â§™ÈÉé,28,450000
‰ΩêËó§Ëä±Â≠ê,32,520000</div>
            </div>

            <div class="file-format">
                <div class="format-title">TSVÔºà„Çø„ÉñÂå∫Âàá„ÇäÔºâ</div>
                <div class="format-example">name	age	salary
Áî∞‰∏≠Â§™ÈÉé	28	450000
‰ΩêËó§Ëä±Â≠ê	32	520000</div>
            </div>

            <div class="code-container">
                <div class="code-header">ÂêÑÁ®ÆÂΩ¢Âºè„ÅÆË™≠„ÅøËæº„Åø</div>
                <div class="code-content">
<span class="comment"># TSV„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø</span>
tsv_content <span class="operator">&lt;-</span> <span class="string">"name\tage\tsalary\tdepartment
Áî∞‰∏≠Â§™ÈÉé\t28\t450000\tÂñ∂Ê•≠
‰ΩêËó§Ëä±Â≠ê\t32\t520000\tÈñãÁô∫
Èà¥Êú®‰∏ÄÈÉé\t45\t780000\t„Éû„Éç„Ç∏„É°„É≥„Éà"</span>

tsv_data <span class="operator">&lt;-</span> <span class="function">read_tsv</span>(tsv_content)
<span class="function">print</span>(tsv_data)

<span class="comment"># „Ç´„Çπ„Çø„É†Âå∫Âàá„ÇäÊñáÂ≠ó„ÅÆ„Éï„Ç°„Ç§„É´</span>
custom_delim_content <span class="operator">&lt;-</span> <span class="string">"name|age|salary|department
Áî∞‰∏≠Â§™ÈÉé|28|450000|Âñ∂Ê•≠
‰ΩêËó§Ëä±Â≠ê|32|520000|ÈñãÁô∫
Èà¥Êú®‰∏ÄÈÉé|45|780000|„Éû„Éç„Ç∏„É°„É≥„Éà"</span>

custom_data <span class="operator">&lt;-</span> <span class="function">read_delim</span>(custom_delim_content, delim <span class="operator">=</span> <span class="string">"|"</span>)
<span class="function">print</span>(custom_data)

<span class="comment"># Âõ∫ÂÆöÂπÖ„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø</span>
fixed_width_content <span class="operator">&lt;-</span> <span class="string">"Áî∞‰∏≠Â§™ÈÉé    28450000Âñ∂Ê•≠    
‰ΩêËó§Ëä±Â≠ê    32520000ÈñãÁô∫    
Èà¥Êú®‰∏ÄÈÉé    45780000„Éû„Éç„Ç∏„É°„É≥„Éà"</span>

fixed_data <span class="operator">&lt;-</span> <span class="function">read_fwf</span>(fixed_width_content,
  <span class="function">fwf_widths</span>(<span class="function">c</span>(<span class="number">8</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">8</span>), <span class="function">c</span>(<span class="string">"name"</span>, <span class="string">"age"</span>, <span class="string">"salary"</span>, <span class="string">"department"</span>))
)
<span class="function">print</span>(fixed_data)

<span class="comment"># „Éò„ÉÉ„ÉÄ„Éº„Å™„Åó„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø</span>
no_header_content <span class="operator">&lt;-</span> <span class="string">"Áî∞‰∏≠Â§™ÈÉé,28,450000,Âñ∂Ê•≠
‰ΩêËó§Ëä±Â≠ê,32,520000,ÈñãÁô∫
Èà¥Êú®‰∏ÄÈÉé,45,780000,„Éû„Éç„Ç∏„É°„É≥„Éà"</span>

no_header_data <span class="operator">&lt;-</span> <span class="function">read_csv</span>(no_header_content, 
  col_names <span class="operator">=</span> <span class="function">c</span>(<span class="string">"name"</span>, <span class="string">"age"</span>, <span class="string">"salary"</span>, <span class="string">"department"</span>)
)
<span class="function">print</span>(no_header_data)
</div>
            </div>

            <div class="output-container">
                <div class="output-header">ÂêÑÁ®ÆÂΩ¢ÂºèË™≠„ÅøËæº„ÅøÁµêÊûú</div>
                <div class="output-content"># A tibble: 3 √ó 4
  name     age salary department
  &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;     
1 Áî∞‰∏≠Â§™ÈÉé    28 450000 Âñ∂Ê•≠      
2 ‰ΩêËó§Ëä±Â≠ê    32 520000 ÈñãÁô∫      
3 Èà¥Êú®‰∏ÄÈÉé    45 780000 „Éû„Éç„Ç∏„É°„É≥„Éà

# A tibble: 3 √ó 4
  name     age salary department
  &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;     
1 Áî∞‰∏≠Â§™ÈÉé    28 450000 Âñ∂Ê•≠      
2 ‰ΩêËó§Ëä±Â≠ê    32 520000 ÈñãÁô∫      
3 Èà¥Êú®‰∏ÄÈÉé    45 780000 „Éû„Éç„Ç∏„É°„É≥„Éà

# A tibble: 3 √ó 4
  name     age salary department
  &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;     
1 Áî∞‰∏≠Â§™ÈÉé    28 450000 Âñ∂Ê•≠      
2 ‰ΩêËó§Ëä±Â≠ê    32 520000 ÈñãÁô∫      
3 Èà¥Êú®‰∏ÄÈÉé    45 780000 „Éû„Éç„Ç∏„É°„É≥„Éà</div>
            </div>
        </section>

        <section class="section">
            <h2>üîß È´òÂ∫¶„Å™„Éë„Éº„Çπ„Ç™„Éó„Ç∑„Éß„É≥</h2>

            <h3>Ê¨†ÊêçÂÄ§„Å®„Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞</h3>

            <div class="code-container">
                <div class="code-header">Ê¨†ÊêçÂÄ§Âá¶ÁêÜ„Å®„Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞</div>
                <div class="code-content">
<span class="comment"># Ê¨†ÊêçÂÄ§„ÇíÂê´„ÇÄ„Éá„Éº„Çø</span>
messy_data_content <span class="operator">&lt;-</span> <span class="string">"name,age,salary,department,rating
Áî∞‰∏≠Â§™ÈÉé,28,450000,Âñ∂Ê•≠,4.5
‰ΩêËó§Ëä±Â≠ê,,520000,ÈñãÁô∫,N/A
Èà¥Êú®‰∏ÄÈÉé,45,NULL,„Éû„Éç„Ç∏„É°„É≥„Éà,5.0
È´òÊ©ãÁæéÂí≤,25,380000,,4.2
Â±±Áî∞ÂÅ•Â§™,invalid,650000,ÈñãÁô∫,3.8"</span>

<span class="comment"># Ê¨†ÊêçÂÄ§„ÅÆÊåáÂÆö</span>
messy_data <span class="operator">&lt;-</span> <span class="function">read_csv</span>(messy_data_content, 
  na <span class="operator">=</span> <span class="function">c</span>(<span class="string">""</span>, <span class="string">"NA"</span>, <span class="string">"N/A"</span>, <span class="string">"NULL"</span>, <span class="string">"invalid"</span>)
)

<span class="function">print</span>(messy_data)
<span class="function">print</span>(<span class="function">paste</span>(<span class="string">"Ê¨†ÊêçÂÄ§„ÅÆÊï∞:"</span>, <span class="function">sum</span>(<span class="function">is.na</span>(messy_data))))

<span class="comment"># ÂûãÂ§âÊèõ„ÅÆÂïèÈ°å„ÇíÁ¢∫Ë™ç</span>
parsing_problems <span class="operator">&lt;-</span> <span class="function">problems</span>(messy_data)
<span class="keyword">if</span> (<span class="function">nrow</span>(parsing_problems) <span class="operator">&gt;</span> <span class="number">0</span>) {
  <span class="function">print</span>(<span class="string">"„Éë„Éº„ÇπÂïèÈ°å:"</span>)
  <span class="function">print</span>(parsing_problems)
}

<span class="comment"># ÂÆâÂÖ®„Å™ÂûãÊåáÂÆö</span>
safe_data <span class="operator">&lt;-</span> <span class="function">read_csv</span>(messy_data_content,
  col_types <span class="operator">=</span> <span class="function">cols</span>(
    name <span class="operator">=</span> <span class="function">col_character</span>(),
    age <span class="operator">=</span> <span class="function">col_integer</span>(),
    salary <span class="operator">=</span> <span class="function">col_double</span>(),
    department <span class="operator">=</span> <span class="function">col_character</span>(),
    rating <span class="operator">=</span> <span class="function">col_double</span>()
  ),
  na <span class="operator">=</span> <span class="function">c</span>(<span class="string">""</span>, <span class="string">"NA"</span>, <span class="string">"N/A"</span>, <span class="string">"NULL"</span>, <span class="string">"invalid"</span>)
)

<span class="function">print</span>(<span class="string">"ÂÆâÂÖ®„Å´Ë™≠„ÅøËæº„Çì„Å†„Éá„Éº„Çø:"</span>)
<span class="function">print</span>(safe_data)

<span class="comment"># Ê¨†ÊêçÂÄ§„Éë„Çø„Éº„É≥„ÅÆÂàÜÊûê</span>
missing_summary <span class="operator">&lt;-</span> safe_data <span class="operator">%&gt;%</span>
  <span class="function">summarise_all</span>(~ <span class="function">sum</span>(<span class="function">is.na</span>(.))) <span class="operator">%&gt;%</span>
  <span class="function">pivot_longer</span>(<span class="function">everything</span>(), names_to <span class="operator">=</span> <span class="string">"column"</span>, values_to <span class="operator">=</span> <span class="string">"missing_count"</span>)

<span class="function">print</span>(<span class="string">"ÂàóÂà•Ê¨†ÊêçÂÄ§Êï∞:"</span>)
<span class="function">print</span>(missing_summary)
</div>
            </div>

            <div class="output-container">
                <div class="output-header">Ê¨†ÊêçÂÄ§Âá¶ÁêÜÁµêÊûú</div>
                <div class="output-content"># A tibble: 5 √ó 5
  name      age salary department rating
  &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;
1 Áî∞‰∏≠Â§™ÈÉé     28 450000 Âñ∂Ê•≠          4.5
2 ‰ΩêËó§Ëä±Â≠ê     NA 520000 ÈñãÁô∫           NA
3 Èà¥Êú®‰∏ÄÈÉé     45     NA „Éû„Éç„Ç∏„É°„É≥„Éà     5  
4 È´òÊ©ãÁæéÂí≤     25 380000 NA            4.2
5 Â±±Áî∞ÂÅ•Â§™     NA 650000 ÈñãÁô∫          3.8

[1] "Ê¨†ÊêçÂÄ§„ÅÆÊï∞: 5"

# A tibble: 5 √ó 2
  column     missing_count
  &lt;chr&gt;              &lt;int&gt;
1 name                   0
2 age                    2
3 salary                 1
4 department             1
5 rating                 1</div>
            </div>

            <h3>„Ç®„É≥„Ç≥„Éº„Éá„Ç£„É≥„Ç∞„Å®„É≠„Ç±„Éº„É´Ë®≠ÂÆö</h3>

            <div class="code-container">
                <div class="code-header">ÊñáÂ≠ó„Ç®„É≥„Ç≥„Éº„Éá„Ç£„É≥„Ç∞„ÅÆÂá¶ÁêÜ</div>
                <div class="code-content">
<span class="comment"># Êó•Êú¨Ë™û„É≠„Ç±„Éº„É´„ÅÆË®≠ÂÆö</span>
jp_locale <span class="operator">&lt;-</span> <span class="function">locale</span>(
  encoding <span class="operator">=</span> <span class="string">"UTF-8"</span>,
  decimal_mark <span class="operator">=</span> <span class="string">"."</span>,
  grouping_mark <span class="operator">=</span> <span class="string">","</span>,
  date_format <span class="operator">=</span> <span class="string">"%Y-%m-%d"</span>,
  time_format <span class="operator">=</span> <span class="string">"%H:%M:%S"</span>
)

<span class="comment"># Êï∞ÂÄ§ÂΩ¢Âºè„ÅÆÁï∞„Å™„Çã„Éá„Éº„Çø</span>
numeric_data_content <span class="operator">&lt;-</span> <span class="string">"product,price,quantity,date
Ë£ΩÂìÅA,\"1,250.50\",100,2023-12-01
Ë£ΩÂìÅB,\"2,350.75\",75,2023-12-02
Ë£ΩÂìÅC,\"890.25\",200,2023-12-03"</span>

<span class="comment"># „É≠„Ç±„Éº„É´ÊåáÂÆö„Åß„ÅÆË™≠„ÅøËæº„Åø</span>
numeric_data <span class="operator">&lt;-</span> <span class="function">read_csv</span>(numeric_data_content, locale <span class="operator">=</span> jp_locale)
<span class="function">print</span>(numeric_data)

<span class="comment"># Áï∞„Å™„ÇãÊó•‰ªòÂΩ¢Âºè„Å∏„ÅÆÂØæÂøú</span>
date_format_content <span class="operator">&lt;-</span> <span class="string">"event,date_jp,date_us,date_iso
„Ç§„Éô„É≥„Éà1,2023/12/01,12/01/2023,2023-12-01
„Ç§„Éô„É≥„Éà2,2023/12/15,12/15/2023,2023-12-15
„Ç§„Éô„É≥„Éà3,2024/01/05,01/05/2024,2024-01-05"</span>

date_data <span class="operator">&lt;-</span> <span class="function">read_csv</span>(date_format_content,
  col_types <span class="operator">=</span> <span class="function">cols</span>(
    event <span class="operator">=</span> <span class="function">col_character</span>(),
    date_jp <span class="operator">=</span> <span class="function">col_date</span>(format <span class="operator">=</span> <span class="string">"%Y/%m/%d"</span>),
    date_us <span class="operator">=</span> <span class="function">col_date</span>(format <span class="operator">=</span> <span class="string">"%m/%d/%Y"</span>),
    date_iso <span class="operator">=</span> <span class="function">col_date</span>()
  )
)

<span class="function">print</span>(date_data)

<span class="comment"># ÊôÇÂàª„Éá„Éº„Çø„ÅÆÂá¶ÁêÜ</span>
time_data_content <span class="operator">&lt;-</span> <span class="string">"task,start_time,end_time,duration
„Çø„Çπ„ÇØ1,09:30:00,11:45:30,02:15:30
„Çø„Çπ„ÇØ2,14:00:00,16:30:45,02:30:45
„Çø„Çπ„ÇØ3,10:15:30,12:00:00,01:44:30"</span>

time_data <span class="operator">&lt;-</span> <span class="function">read_csv</span>(time_data_content,
  col_types <span class="operator">=</span> <span class="function">cols</span>(
    task <span class="operator">=</span> <span class="function">col_character</span>(),
    start_time <span class="operator">=</span> <span class="function">col_time</span>(),
    end_time <span class="operator">=</span> <span class="function">col_time</span>(),
    duration <span class="operator">=</span> <span class="function">col_time</span>()
  )
)

<span class="function">print</span>(time_data)
<span class="function">str</span>(time_data)
</div>
            </div>

            <div class="output-container">
                <div class="output-header">„Ç®„É≥„Ç≥„Éº„Éá„Ç£„É≥„Ç∞Âá¶ÁêÜÁµêÊûú</div>
                <div class="output-content"># A tibble: 3 √ó 4
  product price quantity date      
  &lt;chr&gt;   &lt;dbl&gt;    &lt;dbl&gt; &lt;date&gt;    
1 Ë£ΩÂìÅA   1251.      100 2023-12-01
2 Ë£ΩÂìÅB   2351.       75 2023-12-02
3 Ë£ΩÂìÅC    890.      200 2023-12-03

# A tibble: 3 √ó 4
  event     date_jp    date_us    date_iso  
  &lt;chr&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    
1 „Ç§„Éô„É≥„Éà1 2023-12-01 2023-12-01 2023-12-01
2 „Ç§„Éô„É≥„Éà2 2023-12-15 2023-12-15 2023-12-15
3 „Ç§„Éô„É≥„Éà3 2024-01-05 2024-01-05 2024-01-05

# A tibble: 3 √ó 4
  task    start_time end_time   duration  
  &lt;chr&gt;   &lt;time&gt;     &lt;time&gt;     &lt;time&gt;    
1 „Çø„Çπ„ÇØ1 09:30      11:45:30   02:15:30  
2 „Çø„Çπ„ÇØ2 14:00      16:30:45   02:30:45  
3 „Çø„Çπ„ÇØ3 10:15:30   12:00      01:44:30</div>
            </div>
        </section>

        <section class="section">
            <h2>‚ö° Â§ßÂÆπÈáè„Éá„Éº„Çø„ÅÆÈ´òÈÄüÂá¶ÁêÜ</h2>

            <div class="code-container">
                <div class="code-header">„ÉÅ„É£„É≥„ÇØË™≠„ÅøËæº„Åø„Å®„Çπ„Éà„É™„Éº„Éü„É≥„Ç∞Âá¶ÁêÜ</div>
                <div class="code-content">
<span class="comment"># Â§ßÂÆπÈáè„Éá„Éº„Çø„ÅÆ„Çµ„É≥„Éó„É´‰ΩúÊàê</span>
<span class="function">set.seed</span>(<span class="number">123</span>)
large_data_sample <span class="operator">&lt;-</span> <span class="function">tibble</span>(
  id <span class="operator">=</span> <span class="number">1</span>:<span class="number">10000</span>,
  name <span class="operator">=</span> <span class="function">paste0</span>(<span class="string">"User_"</span>, <span class="function">sprintf</span>(<span class="string">"%05d"</span>, <span class="number">1</span>:<span class="number">10000</span>)),
  category <span class="operator">=</span> <span class="function">sample</span>(<span class="function">c</span>(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="string">"E"</span>), <span class="number">10000</span>, replace <span class="operator">=</span> <span class="variable">TRUE</span>),
  value <span class="operator">=</span> <span class="function">rnorm</span>(<span class="number">10000</span>, <span class="number">100</span>, <span class="number">20</span>),
  date <span class="operator">=</span> <span class="function">sample</span>(<span class="function">seq</span>(<span class="function">as.Date</span>(<span class="string">"2023-01-01"</span>), <span class="function">as.Date</span>(<span class="string">"2023-12-31"</span>), by <span class="operator">=</span> <span class="string">"day"</span>), <span class="number">10000</span>, replace <span class="operator">=</span> <span class="variable">TRUE</span>)
)

<span class="comment"># CSV„Éï„Ç°„Ç§„É´„Å®„Åó„Å¶‰øùÂ≠òÔºàÂÆüÈöõ„ÅÆ„Éï„Ç°„Ç§„É´Âá¶ÁêÜ„Çí„Ç∑„Éü„É•„É¨„Éº„ÉàÔºâ</span>
large_csv_content <span class="operator">&lt;-</span> <span class="function">format_csv</span>(large_data_sample)

<span class="comment"># ÊúÄÂàù„ÅÆÊï∞Ë°å„Å†„ÅëÁ¢∫Ë™ç</span>
<span class="function">print</span>(<span class="string">"Â§ßÂÆπÈáè„Éá„Éº„Çø„ÅÆÂÖàÈ†≠Ë°å:"</span>)
<span class="function">cat</span>(<span class="function">substr</span>(large_csv_content, <span class="number">1</span>, <span class="number">300</span>), <span class="string">"..."</span>)

<span class="comment"># „ÉÅ„É£„É≥„ÇØ„Çµ„Ç§„Ç∫„ÇíÊåáÂÆö„Åó„ÅüË™≠„ÅøËæº„Åø</span>
process_chunk <span class="operator">&lt;-</span> <span class="keyword">function</span>(chunk, pos) {
  <span class="comment"># ÂêÑ„ÉÅ„É£„É≥„ÇØ„ÅÆÁµ±Ë®à„ÇíË®àÁÆó</span>
  chunk_stats <span class="operator">&lt;-</span> chunk <span class="operator">%&gt;%</span>
    <span class="function">group_by</span>(category) <span class="operator">%&gt;%</span>
    <span class="function">summarise</span>(
      count <span class="operator">=</span> <span class="function">n</span>(),
      avg_value <span class="operator">=</span> <span class="function">mean</span>(value),
      max_value <span class="operator">=</span> <span class="function">max</span>(value),
      .groups <span class="operator">=</span> <span class="string">'drop'</span>
    ) <span class="operator">%&gt;%</span>
    <span class="function">mutate</span>(chunk_pos <span class="operator">=</span> pos)
  
  <span class="keyword">return</span>(chunk_stats)
}

<span class="comment"># „ÉÅ„É£„É≥„ÇØÂçò‰Ωç„Åß„ÅÆÂá¶ÁêÜÔºà„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥Ôºâ</span>
chunk_size <span class="operator">&lt;-</span> <span class="number">2000</span>
chunk_results <span class="operator">&lt;-</span> <span class="function">list</span>()

<span class="keyword">for</span> (i <span class="keyword">in</span> <span class="function">seq</span>(<span class="number">1</span>, <span class="function">nrow</span>(large_data_sample), by <span class="operator">=</span> chunk_size)) {
  end_idx <span class="operator">&lt;-</span> <span class="function">min</span>(i <span class="operator">+</span> chunk_size <span class="operator">-</span> <span class="number">1</span>, <span class="function">nrow</span>(large_data_sample))
  chunk <span class="operator">&lt;-</span> large_data_sample[i:end_idx, ]
  chunk_result <span class="operator">&lt;-</span> <span class="function">process_chunk</span>(chunk, i)
  chunk_results[[<span class="function">length</span>(chunk_results) <span class="operator">+</span> <span class="number">1</span>]] <span class="operator">&lt;-</span> chunk_result
}

<span class="comment"># „ÉÅ„É£„É≥„ÇØÁµêÊûú„ÅÆÁµ±Âêà</span>
combined_results <span class="operator">&lt;-</span> <span class="function">bind_rows</span>(chunk_results) <span class="operator">%&gt;%</span>
  <span class="function">group_by</span>(category) <span class="operator">%&gt;%</span>
  <span class="function">summarise</span>(
    total_count <span class="operator">=</span> <span class="function">sum</span>(count),
    avg_value <span class="operator">=</span> <span class="function">weighted.mean</span>(avg_value, count),
    max_value <span class="operator">=</span> <span class="function">max</span>(max_value),
    chunks_processed <span class="operator">=</span> <span class="function">n_distinct</span>(chunk_pos),
    .groups <span class="operator">=</span> <span class="string">'drop'</span>
  )

<span class="function">print</span>(<span class="string">"„ÉÅ„É£„É≥„ÇØÂá¶ÁêÜÁµêÊûú:"</span>)
<span class="function">print</span>(combined_results)

<span class="comment"># „É°„É¢„É™‰ΩøÁî®Èáè„ÅÆÊØîËºÉ</span>
<span class="function">print</span>(<span class="function">paste</span>(<span class="string">"ÂÖ®„Éá„Éº„Çø„Çµ„Ç§„Ç∫:"</span>, <span class="function">object.size</span>(large_data_sample), <span class="string">"bytes"</span>))
<span class="function">print</span>(<span class="function">paste</span>(<span class="string">"„ÉÅ„É£„É≥„ÇØ„Çµ„Ç§„Ç∫:"</span>, <span class="function">object.size</span>(large_data_sample[<span class="number">1</span>:chunk_size, ]), <span class="string">"bytes"</span>))
</div>
            </div>

            <div class="output-container">
                <div class="output-header">Â§ßÂÆπÈáè„Éá„Éº„ÇøÂá¶ÁêÜÁµêÊûú</div>
                <div class="output-content">Â§ßÂÆπÈáè„Éá„Éº„Çø„ÅÆÂÖàÈ†≠Ë°å:
id,name,category,value,date
1,User_00001,A,87.3769775281997,2023-11-15
2,User_00002,D,99.1648379853979,2023-06-24
3,User_00003,E,115.872981428754,2023-03-12
4,User_00004,A,118.207475714851,2023-08-...

„ÉÅ„É£„É≥„ÇØÂá¶ÁêÜÁµêÊûú:
# A tibble: 5 √ó 5
  category total_count avg_value max_value chunks_processed
  &lt;chr&gt;          &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;            &lt;int&gt;
1 A               1986      99.8      164.                5
2 B               2038     100.       169.                5
3 C               1974      99.9      171.                5
4 D               2011     100.       165.                5
5 E               1991     100.       170.                5

[1] "ÂÖ®„Éá„Éº„Çø„Çµ„Ç§„Ç∫: 560344 bytes"
[1] "„ÉÅ„É£„É≥„ÇØ„Çµ„Ç§„Ç∫: 112344 bytes"</div>
            </div>

            <h3>„Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÊúÄÈÅ©Âåñ„ÉÜ„ÇØ„Éã„ÉÉ„ÇØ</h3>

            <div class="code-container">
                <div class="code-header">Ë™≠„ÅøËæº„ÅøÊÄßËÉΩ„ÅÆÊúÄÈÅ©Âåñ</div>
                <div class="code-content">
<span class="comment"># ÂûãÊé®ÂÆö„ÅÆ„Çπ„Ç≠„ÉÉ„ÉóÔºà‰∫ãÂâç„Å´Âûã„Åå„Çè„Åã„Å£„Å¶„ÅÑ„ÇãÂ†¥ÂêàÔºâ</span>
optimized_read <span class="operator">&lt;-</span> <span class="keyword">function</span>(content) {
  <span class="comment"># Âûã„ÇíÊòéÁ§∫ÁöÑ„Å´ÊåáÂÆö„Åô„Çã„Åì„Å®„ÅßÊé®ÂÆöÂá¶ÁêÜ„Çí„Çπ„Ç≠„ÉÉ„Éó</span>
  <span class="function">read_csv</span>(content,
    col_types <span class="operator">=</span> <span class="function">cols</span>(
      id <span class="operator">=</span> <span class="function">col_integer</span>(),
      name <span class="operator">=</span> <span class="function">col_character</span>(),
      category <span class="operator">=</span> <span class="function">col_character</span>(),
      value <span class="operator">=</span> <span class="function">col_double</span>(),
      date <span class="operator">=</span> <span class="function">col_date</span>()
    ),
    progress <span class="operator">=</span> <span class="variable">FALSE</span>  <span class="comment"># „Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº„ÇíÁÑ°ÂäπÂåñ</span>
  )
}

<span class="comment"># ÂøÖË¶Å„Å™Âàó„ÅÆ„ÅøË™≠„ÅøËæº„Åø</span>
selective_read <span class="operator">&lt;-</span> <span class="keyword">function</span>(content, selected_cols) {
  all_cols <span class="operator">&lt;-</span> <span class="function">c</span>(<span class="string">"id"</span>, <span class="string">"name"</span>, <span class="string">"category"</span>, <span class="string">"value"</span>, <span class="string">"date"</span>)
  col_types_list <span class="operator">&lt;-</span> <span class="function">list</span>(
    id <span class="operator">=</span> <span class="function">col_integer</span>(),
    name <span class="operator">=</span> <span class="function">col_character</span>(),
    category <span class="operator">=</span> <span class="function">col_character</span>(),
    value <span class="operator">=</span> <span class="function">col_double</span>(),
    date <span class="operator">=</span> <span class="function">col_date</span>()
  )
  
  <span class="comment"># ‰∏çË¶Å„Å™Âàó„Çí„Çπ„Ç≠„ÉÉ„Éó</span>
  skip_cols <span class="operator">&lt;-</span> all_cols[!all_cols <span class="operator">%in%</span> selected_cols]
  <span class="keyword">for</span> (col <span class="keyword">in</span> skip_cols) {
    col_types_list[[col]] <span class="operator">&lt;-</span> <span class="function">col_skip</span>()
  }
  
  <span class="function">read_csv</span>(content, col_types <span class="operator">=</span> <span class="function">do.call</span>(cols, col_types_list))
}

<span class="comment"># ÊÄßËÉΩ„ÉÜ„Çπ„Éà„ÅÆ‰æã</span>
<span class="function">print</span>(<span class="string">"ÊúÄÈÅ©Âåñ„Åï„Çå„ÅüË™≠„ÅøËæº„ÅøÔºàID„ÄÅ„Ç´„ÉÜ„Ç¥„É™„ÄÅÂÄ§„ÅÆ„ÅøÔºâ:"</span>)
optimized_data <span class="operator">&lt;-</span> <span class="function">selective_read</span>(large_csv_content, <span class="function">c</span>(<span class="string">"id"</span>, <span class="string">"category"</span>, <span class="string">"value"</span>))
<span class="function">print</span>(<span class="function">head</span>(optimized_data))

<span class="comment"># „Éá„Éº„ÇøÂ§âÊèõ„Å®ÂêåÊôÇË™≠„ÅøËæº„Åø</span>
transform_on_read <span class="operator">&lt;-</span> <span class="keyword">function</span>(content) {
  <span class="function">read_csv</span>(content,
    col_types <span class="operator">=</span> <span class="function">cols</span>(
      id <span class="operator">=</span> <span class="function">col_integer</span>(),
      name <span class="operator">=</span> <span class="function">col_character</span>(),
      category <span class="operator">=</span> <span class="function">col_character</span>(),
      value <span class="operator">=</span> <span class="function">col_double</span>(),
      date <span class="operator">=</span> <span class="function">col_date</span>()
    )
  ) <span class="operator">%&gt;%</span>
    <span class="function">mutate</span>(
      value_category <span class="operator">=</span> <span class="function">case_when</span>(
        value <span class="operator">&lt;</span> <span class="number">80</span> ~ <span class="string">"‰Ωé"</span>,
        value <span class="operator">&lt;</span> <span class="number">120</span> ~ <span class="string">"‰∏≠"</span>,
        <span class="variable">TRUE</span> ~ <span class="string">"È´ò"</span>
      ),
      is_weekend <span class="operator">=</span> <span class="function">lubridate::wday</span>(date) <span class="operator">%in%</span> <span class="function">c</span>(<span class="number">1</span>, <span class="number">7</span>)
    )
}

<span class="comment"># Â§âÊèõ‰ªò„ÅçË™≠„ÅøËæº„Åø„ÅÆ‰æã</span>
<span class="function">print</span>(<span class="string">"Â§âÊèõ‰ªò„ÅçË™≠„ÅøËæº„Åø„ÅÆÁµêÊûú:"</span>)
transformed_data <span class="operator">&lt;-</span> <span class="function">transform_on_read</span>(<span class="function">head</span>(<span class="function">strsplit</span>(large_csv_content, <span class="string">"\n"</span>)[[<span class="number">1</span>]], <span class="number">10</span>) <span class="operator">%&gt;%</span> <span class="function">paste</span>(collapse <span class="operator">=</span> <span class="string">"\n"</span>))
<span class="function">print</span>(transformed_data)
</div>
            </div>

            <div class="output-container">
                <div class="output-header">ÊúÄÈÅ©ÂåñË™≠„ÅøËæº„ÅøÁµêÊûú</div>
                <div class="output-content">ÊúÄÈÅ©Âåñ„Åï„Çå„ÅüË™≠„ÅøËæº„ÅøÔºàID„ÄÅ„Ç´„ÉÜ„Ç¥„É™„ÄÅÂÄ§„ÅÆ„ÅøÔºâ:
# A tibble: 6 √ó 3
     id category value
  &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;
1     1 A         87.4
2     2 D         99.2
3     3 E        116. 
4     4 A        118. 
5     5 C         95.7
6     6 B        101. 

Â§âÊèõ‰ªò„ÅçË™≠„ÅøËæº„Åø„ÅÆÁµêÊûú:
# A tibble: 9 √ó 7
     id name      category value date       value_category is_weekend
  &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;          &lt;lgl&gt;     
1     1 User_00001 A         87.4 2023-11-15 ‰∏≠             FALSE     
2     2 User_00002 D         99.2 2023-06-24 ‰∏≠             TRUE      
3     3 User_00003 E        116.  2023-03-12 ‰∏≠             TRUE      
4     4 User_00004 A        118.  2023-08-30 ‰∏≠             FALSE     
5     5 User_00005 C         95.7 2023-04-23 ‰∏≠             TRUE      
6     6 User_00006 B        101.  2023-02-06 ‰∏≠             FALSE     
7     7 User_00007 E         99.5 2023-07-12 ‰∏≠             FALSE     
8     8 User_00008 C        135.  2023-10-18 È´ò             FALSE     
9     9 User_00009 A         88.6 2023-05-31 ‰∏≠             FALSE</div>
            </div>
        </section>

        <section class="section">
            <h2>üìä ÂÆüË∑µÁöÑ„Å™„Éá„Éº„ÇøË™≠„ÅøËæº„Åø„ÉØ„Éº„ÇØ„Éï„É≠„Éº</h2>

            <div class="code-container">
                <div class="code-header">Ë§áÊï∞„Éï„Ç°„Ç§„É´„ÅÆ‰∏ÄÊã¨Ë™≠„ÅøËæº„Åø</div>
                <div class="code-content">
<span class="comment"># Ë§áÊï∞„ÅÆÊúàÊ¨°„Éï„Ç°„Ç§„É´„Çí„Ç∑„Éü„É•„É¨„Éº„Éà</span>
create_monthly_sales <span class="operator">&lt;-</span> <span class="keyword">function</span>(month) {
  <span class="function">set.seed</span>(month)
  <span class="function">tibble</span>(
    month <span class="operator">=</span> month,
    product_id <span class="operator">=</span> <span class="function">paste0</span>(<span class="string">"P"</span>, <span class="function">sprintf</span>(<span class="string">"%03d"</span>, <span class="number">1</span>:<span class="number">50</span>)),
    sales <span class="operator">=</span> <span class="function">round</span>(<span class="function">rnorm</span>(<span class="number">50</span>, <span class="number">1000</span> <span class="operator">+</span> month <span class="operator">*</span> <span class="number">100</span>, <span class="number">200</span>)),
    region <span class="operator">=</span> <span class="function">sample</span>(<span class="function">c</span>(<span class="string">"ÂåóÊµ∑ÈÅì"</span>, <span class="string">"Èñ¢Êù±"</span>, <span class="string">"Èñ¢Ë•ø"</span>, <span class="string">"‰πùÂ∑û"</span>), <span class="number">50</span>, replace <span class="operator">=</span> <span class="variable">TRUE</span>),
    date <span class="operator">=</span> <span class="function">as.Date</span>(<span class="function">paste0</span>(<span class="string">"2023-"</span>, <span class="function">sprintf</span>(<span class="string">"%02d"</span>, month), <span class="string">"-15"</span>))
  )
}

<span class="comment"># 12„É∂ÊúàÂàÜ„ÅÆ„Éá„Éº„Çø„Çí‰ΩúÊàê</span>
monthly_files <span class="operator">&lt;-</span> <span class="function">map</span>(<span class="number">1</span>:<span class="number">12</span>, create_monthly_sales)
<span class="function">names</span>(monthly_files) <span class="operator">&lt;-</span> <span class="function">paste0</span>(<span class="string">"sales_2023_"</span>, <span class="function">sprintf</span>(<span class="string">"%02d"</span>, <span class="number">1</span>:<span class="number">12</span>), <span class="string">".csv"</span>)

<span class="comment"># ÂêÑ„Éï„Ç°„Ç§„É´„ÇíCSVÊñáÂ≠óÂàó„Å´Â§âÊèõ</span>
csv_contents <span class="operator">&lt;-</span> <span class="function">map</span>(monthly_files, format_csv)

<span class="comment"># ÂêÑ„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„ÅøÈñ¢Êï∞</span>
read_monthly_file <span class="operator">&lt;-</span> <span class="keyword">function</span>(csv_content, filename) {
  data <span class="operator">&lt;-</span> <span class="function">read_csv</span>(csv_content, 
    col_types <span class="operator">=</span> <span class="function">cols</span>(
      month <span class="operator">=</span> <span class="function">col_integer</span>(),
      product_id <span class="operator">=</span> <span class="function">col_character</span>(),
      sales <span class="operator">=</span> <span class="function">col_double</span>(),
      region <span class="operator">=</span> <span class="function">col_character</span>(),
      date <span class="operator">=</span> <span class="function">col_date</span>()
    ),
    progress <span class="operator">=</span> <span class="variable">FALSE</span>
  ) <span class="operator">%&gt;%</span>
    <span class="function">mutate</span>(source_file <span class="operator">=</span> filename)
  
  <span class="keyword">return</span>(data)
}

<span class="comment"># ÂÖ®„Éï„Ç°„Ç§„É´„Çí‰∏ÄÊã¨Ë™≠„ÅøËæº„Åø</span>
all_sales_data <span class="operator">&lt;-</span> <span class="function">map2_dfr</span>(csv_contents, <span class="function">names</span>(csv_contents), read_monthly_file)

<span class="comment"># „Éá„Éº„Çø„ÅÆÁµ±Âêà„Å®Ê§úË®º</span>
data_summary <span class="operator">&lt;-</span> all_sales_data <span class="operator">%&gt;%</span>
  <span class="function">group_by</span>(month, region) <span class="operator">%&gt;%</span>
  <span class="function">summarise</span>(
    total_sales <span class="operator">=</span> <span class="function">sum</span>(sales),
    avg_sales <span class="operator">=</span> <span class="function">mean</span>(sales),
    product_count <span class="operator">=</span> <span class="function">n_distinct</span>(product_id),
    .groups <span class="operator">=</span> <span class="string">'drop'</span>
  ) <span class="operator">%&gt;%</span>
  <span class="function">arrange</span>(month, region)

<span class="function">print</span>(<span class="string">"Áµ±Âêà„Éá„Éº„Çø„ÅÆË¶ÅÁ¥Ñ:"</span>)
<span class="function">print</span>(<span class="function">head</span>(data_summary, <span class="number">10</span>))

<span class="comment"># „Éá„Éº„ÇøÂìÅË≥™„ÉÅ„Çß„ÉÉ„ÇØ</span>
quality_check <span class="operator">&lt;-</span> all_sales_data <span class="operator">%&gt;%</span>
  <span class="function">summarise</span>(
    total_records <span class="operator">=</span> <span class="function">n</span>(),
    missing_sales <span class="operator">=</span> <span class="function">sum</span>(<span class="function">is.na</span>(sales)),
    duplicate_records <span class="operator">=</span> <span class="function">sum</span>(<span class="function">duplicated</span>(.)),
    unique_products <span class="operator">=</span> <span class="function">n_distinct</span>(product_id),
    date_range <span class="operator">=</span> <span class="function">paste</span>(<span class="function">min</span>(date), <span class="string">"to"</span>, <span class="function">max</span>(date)),
    files_processed <span class="operator">=</span> <span class="function">n_distinct</span>(source_file)
  )

<span class="function">print</span>(<span class="string">"„Éá„Éº„ÇøÂìÅË≥™„ÉÅ„Çß„ÉÉ„ÇØ:"</span>)
<span class="function">print</span>(quality_check)
</div>
            </div>

            <div class="output-container">
                <div class="output-header">Ë§áÊï∞„Éï„Ç°„Ç§„É´Ë™≠„ÅøËæº„ÅøÁµêÊûú</div>
                <div class="output-content">Áµ±Âêà„Éá„Éº„Çø„ÅÆË¶ÅÁ¥Ñ:
# A tibble: 10 √ó 5
   month region total_sales avg_sales product_count
   &lt;int&gt; &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;         &lt;int&gt;
 1     1 ‰πùÂ∑û        13145      1095.            12
 2     1 ÂåóÊµ∑ÈÅì      14036      1170.            12
 3     1 Èñ¢Êù±        13015      1085.            12
 4     1 Èñ¢Ë•ø        13874      1156.            12
 5     2 ‰πùÂ∑û        15034      1253.            12
 6     2 ÂåóÊµ∑ÈÅì      15789      1316.            12
 7     2 Èñ¢Êù±        15456      1288.            12
 8     2 Èñ¢Ë•ø        14721      1227.            12
 9     3 ‰πùÂ∑û        16123      1344.            12
10     3 ÂåóÊµ∑ÈÅì      17234      1436.            12

„Éá„Éº„ÇøÂìÅË≥™„ÉÅ„Çß„ÉÉ„ÇØ:
# A tibble: 1 √ó 6
  total_records missing_sales duplicate_records unique_products date_range    files_processed
          &lt;int&gt;         &lt;int&gt;             &lt;int&gt;           &lt;int&gt; &lt;chr&gt;                   &lt;int&gt;
1           600             0                 0              50 2023-01-15 to 2023-12-15          12</div>
            </div>

            <div class="data-table">
                <table>
                    <thead>
                        <tr>
                            <th>readrÈñ¢Êï∞</th>
                            <th>Áî®ÈÄî</th>
                            <th>‰∏ªË¶Å„Ç™„Éó„Ç∑„Éß„É≥</th>
                            <th>Âá∫ÂäõÂΩ¢Âºè</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>read_csv()</td>
                            <td>CSVÔºà„Ç´„É≥„ÉûÂå∫Âàá„ÇäÔºâ</td>
                            <td>col_types, na, locale</td>
                            <td>tibble</td>
                        </tr>
                        <tr>
                            <td>read_tsv()</td>
                            <td>TSVÔºà„Çø„ÉñÂå∫Âàá„ÇäÔºâ</td>
                            <td>col_types, na</td>
                            <td>tibble</td>
                        </tr>
                        <tr>
                            <td>read_delim()</td>
                            <td>‰ªªÊÑè„ÅÆÂå∫Âàá„ÇäÊñáÂ≠ó</td>
                            <td>delim, col_types</td>
                            <td>tibble</td>
                        </tr>
                        <tr>
                            <td>read_fwf()</td>
                            <td>Âõ∫ÂÆöÂπÖ„Éï„Ç°„Ç§„É´</td>
                            <td>fwf_widths, col_types</td>
                            <td>tibble</td>
                        </tr>
                        <tr>
                            <td>read_lines()</td>
                            <td>Ë°åÂçò‰ΩçË™≠„ÅøËæº„Åø</td>
                            <td>n_max, skip</td>
                            <td>character vector</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <div class="key-points">
            <h4>Á¨¨8Á´†„ÅÆÈáçË¶Å„Éù„Ç§„É≥„Éà</h4>
            <ul>
                <li><strong>È´òÈÄüË™≠„ÅøËæº„Åø</strong>Ôºöreadr„ÅØbase R„Çà„ÇäÈ´òÈÄü„ÅßÂûãÊé®ÂÆö„ÅåÊ≠£Á¢∫</li>
                <li><strong>ÂûãÊåáÂÆö</strong>Ôºöcol_typesÂºïÊï∞„ÅßÊ≠£Á¢∫„Å™„Éá„Éº„ÇøÂûã„Çí‰øùË®º</li>
                <li><strong>Ê¨†ÊêçÂÄ§Âá¶ÁêÜ</strong>ÔºönaÂºïÊï∞„ÅßÊßò„ÄÖ„Å™Ê¨†ÊêçÂÄ§Ë°®Áèæ„Å´ÂØæÂøú</li>
                <li><strong>„Ç®„É≥„Ç≥„Éº„Éá„Ç£„É≥„Ç∞</strong>ÔºölocaleË®≠ÂÆö„ÅßÂõΩÈöõÂåñ„Éá„Éº„Çø„Å´ÂØæÂøú</li>
                <li><strong>Â§ßÂÆπÈáè„Éá„Éº„Çø</strong>Ôºö„ÉÅ„É£„É≥„ÇØË™≠„ÅøËæº„Åø„Åß„É°„É¢„É™ÂäπÁéá„ÇíÊúÄÈÅ©Âåñ</li>
                <li><strong>‰∏ÄÊã¨Âá¶ÁêÜ</strong>ÔºöË§áÊï∞„Éï„Ç°„Ç§„É´„ÅÆÁµ±ÂêàË™≠„ÅøËæº„Åø„ÉØ„Éº„ÇØ„Éï„É≠„Éº</li>
            </ul>
        </div>

        <div class="tip-box">
            <h4>ÂÆüË∑µÁöÑ„Ç¢„Éâ„Éê„Ç§„Çπ</h4>
            <p>readr„Éë„ÉÉ„Ç±„Éº„Ç∏„ÅØ„ÄÅ„Éá„Éº„ÇøÂàÜÊûê„ÅÆÊúÄÂàù„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó„ÅßÈáçË¶Å„Å™ÂΩπÂâ≤„ÇíÊûú„Åü„Åó„Åæ„Åô„ÄÇÁâπ„Å´„ÄÅÂ§ßÂÆπÈáè„Éá„Éº„Çø„ÇÑË§áÈõë„Å™ÂΩ¢Âºè„ÅÆ„Éá„Éº„Çø„ÇíÊâ±„ÅÜÈöõ„ÅØ„ÄÅÈÅ©Âàá„Å™ÂûãÊåáÂÆö„Å®„Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞„ÅåÂæåÁ∂ö„ÅÆÂàÜÊûêÁ≤æÂ∫¶„ÇíÂ§ß„Åç„ÅèÂ∑¶Âè≥„Åó„Åæ„Åô„ÄÇ</p>
        </div>

        <nav class="chapter-nav">
            <a href="chapter7-lubridate-datetime.html" class="nav-button">‚Üê Á¨¨7Á´†</a>
            <a href="chapter9-tibble-modern-dataframe.html" class="nav-button">Á¨¨9Á´† ‚Üí</a>
        </nav>
    </div>
</body>
</html>